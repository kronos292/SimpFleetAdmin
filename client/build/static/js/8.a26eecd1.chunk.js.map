{"version":3,"sources":["components/Analytics/Job/JobAnalytics.js","components/Analytics/Analytics.js"],"names":["JobAnalytics","state","userCompany","vessel","jobMonthCategories","jobDeliveryCategories","jobCompaniesCategories","AnalysData","jobVesselsCategories","jobWeeks","axios","get","then","res","Company","data","CompanyCategories","i","length","cmp","Companies","_id","ListCompany","push","setState","jobs","jobAnalys","jobweekdata","job","monthOfJob","Date","jobBookingDateTime","getMonth","getFullYear","weekDate","getDay","firstdateOfweek","lastdateOfweek","parseInt","getDate","monthOfweek","monthOflast","yearOfweek","lastyearOfweek","datest","datels","monthst","monthls","yearst","yearls","jobListweek","jobListMonth","undefined","vesselLoadingLocation","name","jobListLocation","user","jobListCompanies","vesselName","jobListVessels","sort","a","b","toString","month","catch","err","console","log","prevProps","prevState","snapshot","this","jobMonthAnalys","jobDeliveryCategory","WeeksData","jobMonthCategory","jobVesselsCategory","Vessel","jobCompaniesCategory","Component","Analytics","fluid"],"mappings":"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","file":"static/js/8.a26eecd1.chunk.js","sourcesContent":["import React, { Component } from \"react\";\r\nimport axios from \"axios\";\r\nimport BreakdownByMonth from \"@bit/ssddev.simpfleet.a-month-table\";\r\nimport BreakdownByDeliveryLocations from \"@bit/ssddev.simpfleet.a-delv-table\";\r\nimport BreakdownByVessels from \"@bit/ssddev.simpfleet.a-vess-table\";\r\nimport BreakdownByCompanies from \"@bit/ssddev.simpfleet.a-comp-table\";\r\nimport Charts from \"@bit/ssddev.simpfleet.charts\";\r\nimport WeeksTable from \"@bit/ssddev.simpfleet.tables\";\r\nclass JobAnalytics extends Component {\r\n  state = {\r\n    userCompany: null,\r\n    vessel: null,\r\n    jobMonthCategories: null,\r\n    jobDeliveryCategories: null,\r\n    jobCompaniesCategories: null,\r\n    AnalysData: null,\r\n    jobVesselsCategories: null,\r\n    jobWeeks: null\r\n  };\r\n\r\n  componentDidMount() {\r\n    /* get user company */\r\n    axios.get(\"/api/company/usercompany\").then(res => {\r\n      let Company = res.data;\r\n      let CompanyCategories = {};\r\n      for (let i = 0; i < Company.length; i++) {\r\n        const cmp = Company[i];\r\n        const Companies = cmp._id;\r\n        let ListCompany = CompanyCategories[Companies];\r\n        if (!ListCompany) {\r\n          ListCompany = [];\r\n          CompanyCategories[Companies] = ListCompany;\r\n        }\r\n        ListCompany.push(cmp);\r\n      }\r\n      this.setState({\r\n        userCompany: CompanyCategories\r\n      });\r\n    });\r\n    /* get vessel */\r\n    axios.get(\"/api/vessels\").then(res => {\r\n      this.setState({ vessel: res.data });\r\n    });\r\n    // Get all jobs\r\n    axios\r\n      .get(\r\n        `/api/jobs?user_only=false&numLimit=false&archive_only=false&non_archive_only=false&page=false&limit=false`\r\n      )\r\n      .then(res => {\r\n        let jobs = res.data;\r\n        let jobMonthCategories = {};\r\n        let jobDeliveryCategories = {};\r\n        let jobCompaniesCategories = {};\r\n        let jobVesselsCategories = {};\r\n        let jobAnalys = {};\r\n        let jobweekdata = {};\r\n        for (let i = 0; i < jobs.length; i++) {\r\n          const job = jobs[i];\r\n          const monthOfJob = `${new Date(job.jobBookingDateTime).getMonth() +\r\n            1}/${new Date(job.jobBookingDateTime).getFullYear()}`;\r\n          let weekDate = \"\";\r\n          if (new Date(job.jobBookingDateTime).getFullYear() % 4 === 0) {\r\n            if (new Date(job.jobBookingDateTime).getDay() !== 1) {\r\n              let firstdateOfweek = 0;\r\n              if (new Date(job.jobBookingDateTime).getDay() === 0) {\r\n                firstdateOfweek =\r\n                  parseInt(new Date(job.jobBookingDateTime).getDate()) + 1;\r\n              } else {\r\n                firstdateOfweek =\r\n                  parseInt(new Date(job.jobBookingDateTime).getDate()) -\r\n                  parseInt(new Date(job.jobBookingDateTime).getDay() - 1);\r\n              }\r\n              let lastdateOfweek = firstdateOfweek + 6;\r\n              let monthOfweek = parseInt(\r\n                new Date(job.jobBookingDateTime).getMonth() + 1\r\n              );\r\n              let monthOflast = parseInt(\r\n                new Date(job.jobBookingDateTime).getMonth() + 1\r\n              );\r\n              let yearOfweek = parseInt(\r\n                new Date(job.jobBookingDateTime).getFullYear()\r\n              );\r\n              let lastyearOfweek = parseInt(\r\n                new Date(job.jobBookingDateTime).getFullYear()\r\n              );\r\n\r\n              if (firstdateOfweek < 1) {\r\n                if (monthOfweek === 1) {\r\n                  firstdateOfweek += 31;\r\n                  monthOfweek = 12;\r\n                  yearOfweek -= 1;\r\n                } else if (monthOfweek === 2) {\r\n                  firstdateOfweek += 31;\r\n                  monthOfweek = 1;\r\n                } else if (monthOfweek === 3) {\r\n                  firstdateOfweek += 29;\r\n                  monthOfweek = 2;\r\n                } else if (monthOfweek === 4) {\r\n                  firstdateOfweek += 31;\r\n                  monthOfweek = 3;\r\n                } else if (monthOfweek === 5) {\r\n                  firstdateOfweek += 30;\r\n                  monthOfweek = 4;\r\n                } else if (monthOfweek === 6) {\r\n                  firstdateOfweek += 31;\r\n                  monthOfweek = 5;\r\n                } else if (monthOfweek === 7) {\r\n                  firstdateOfweek += 30;\r\n                  monthOfweek = 6;\r\n                } else if (monthOfweek === 8) {\r\n                  firstdateOfweek += 31;\r\n                  monthOfweek = 7;\r\n                } else if (monthOfweek === 9) {\r\n                  firstdateOfweek += 31;\r\n                  monthOfweek = 8;\r\n                } else if (monthOfweek === 10) {\r\n                  firstdateOfweek += 30;\r\n                  monthOfweek = 9;\r\n                } else if (monthOfweek === 11) {\r\n                  firstdateOfweek += 31;\r\n                  monthOfweek = 10;\r\n                } else if (monthOfweek === 12) {\r\n                  firstdateOfweek += 30;\r\n                  monthOfweek = 11;\r\n                }\r\n              }\r\n              if (monthOfweek === 2 && lastdateOfweek > 28) {\r\n                lastdateOfweek -= 29;\r\n                monthOflast = 3;\r\n              } else if (lastdateOfweek > 31) {\r\n                if (monthOfweek === 1) {\r\n                  lastdateOfweek -= 31;\r\n                  monthOflast = 2;\r\n                } else if (monthOfweek === 3) {\r\n                  lastdateOfweek -= 31;\r\n                  monthOflast = 4;\r\n                } else if (monthOfweek === 4) {\r\n                  lastdateOfweek -= 30;\r\n                  monthOflast = 5;\r\n                } else if (monthOfweek === 5) {\r\n                  lastdateOfweek -= 31;\r\n                  monthOflast = 6;\r\n                } else if (monthOfweek === 6) {\r\n                  lastdateOfweek -= 30;\r\n                  monthOflast = 7;\r\n                } else if (monthOfweek === 7) {\r\n                  lastdateOfweek -= 31;\r\n                  monthOflast = 8;\r\n                } else if (monthOfweek === 8) {\r\n                  lastdateOfweek -= 31;\r\n                  monthOflast = 9;\r\n                } else if (monthOfweek === 9) {\r\n                  lastdateOfweek -= 30;\r\n                  monthOflast = 10;\r\n                } else if (monthOfweek === 10) {\r\n                  lastdateOfweek -= 31;\r\n                  monthOflast = 11;\r\n                } else if (monthOfweek === 11) {\r\n                  lastdateOfweek -= 30;\r\n                  monthOflast = 12;\r\n                } else if (monthOfweek === 12) {\r\n                  lastdateOfweek -= 31;\r\n                  monthOflast = 1;\r\n                  lastyearOfweek += 1;\r\n                }\r\n              }\r\n              weekDate = `${firstdateOfweek}/${monthOfweek}/${yearOfweek} - ${lastdateOfweek}/${monthOflast}/${lastyearOfweek}`;\r\n            } else {\r\n              let datest = parseInt(new Date(job.jobBookingDateTime).getDate());\r\n              let datels = datest + 6;\r\n              let monthst = parseInt(\r\n                new Date(job.jobBookingDateTime).getMonth() + 1\r\n              );\r\n              let monthls = parseInt(\r\n                new Date(job.jobBookingDateTime).getMonth() + 1\r\n              );\r\n              let yearst = parseInt(\r\n                new Date(job.jobBookingDateTime).getFullYear()\r\n              );\r\n              let yearls = parseInt(\r\n                new Date(job.jobBookingDateTime).getFullYear()\r\n              );\r\n\r\n              if (monthst === 2 && datels > 28) {\r\n                datels -= 29;\r\n                monthls = 3;\r\n              } else if (datels > 31) {\r\n                if (monthst === 1) {\r\n                  datels -= 31;\r\n                  monthls = 2;\r\n                } else if (monthst === 3) {\r\n                  datels -= 31;\r\n                  monthls = 4;\r\n                } else if (monthst === 4) {\r\n                  datels -= 30;\r\n                  monthls = 5;\r\n                } else if (monthst === 5) {\r\n                  datels -= 31;\r\n                  monthls = 6;\r\n                } else if (monthst === 6) {\r\n                  datels -= 30;\r\n                  monthls = 7;\r\n                } else if (monthst === 7) {\r\n                  datels -= 31;\r\n                  monthls = 8;\r\n                } else if (monthst === 8) {\r\n                  datels -= 31;\r\n                  monthls = 9;\r\n                } else if (monthst === 9) {\r\n                  datels -= 30;\r\n                  monthls = 10;\r\n                } else if (monthst === 10) {\r\n                  datels -= 31;\r\n                  monthls = 11;\r\n                } else if (monthst === 11) {\r\n                  datels -= 30;\r\n                  monthls = 12;\r\n                } else if (monthst === 12) {\r\n                  datels -= 31;\r\n                  monthls = 1;\r\n                  yearls += 1;\r\n                }\r\n              }\r\n              weekDate = `${datest}/${monthst}/${yearst} - ${datels}/${monthls}/${yearls}`;\r\n            }\r\n          } else {\r\n            if (new Date(job.jobBookingDateTime).getDay() !== 1) {\r\n              let firstdateOfweek = 0;\r\n              if (new Date(job.jobBookingDateTime).getDay() === 0) {\r\n                firstdateOfweek =\r\n                  parseInt(new Date(job.jobBookingDateTime).getDate()) + 1;\r\n              } else {\r\n                firstdateOfweek =\r\n                  parseInt(new Date(job.jobBookingDateTime).getDate()) -\r\n                  parseInt(new Date(job.jobBookingDateTime).getDay() - 1);\r\n              }\r\n              let lastdateOfweek = firstdateOfweek + 6;\r\n              let monthOfweek = parseInt(\r\n                new Date(job.jobBookingDateTime).getMonth() + 1\r\n              );\r\n              let monthOflast = parseInt(\r\n                new Date(job.jobBookingDateTime).getMonth() + 1\r\n              );\r\n              let yearOfweek = parseInt(\r\n                new Date(job.jobBookingDateTime).getFullYear()\r\n              );\r\n              let lastyearOfweek = parseInt(\r\n                new Date(job.jobBookingDateTime).getFullYear()\r\n              );\r\n\r\n              if (firstdateOfweek < 1) {\r\n                if (monthOfweek === 1) {\r\n                  firstdateOfweek += 31;\r\n                  monthOfweek = 12;\r\n                  yearOfweek -= 1;\r\n                } else if (monthOfweek === 2) {\r\n                  firstdateOfweek += 31;\r\n                  monthOfweek = 1;\r\n                } else if (monthOfweek === 3) {\r\n                  firstdateOfweek += 28;\r\n                  monthOfweek = 2;\r\n                } else if (monthOfweek === 4) {\r\n                  firstdateOfweek += 31;\r\n                  monthOfweek = 3;\r\n                } else if (monthOfweek === 5) {\r\n                  firstdateOfweek += 30;\r\n                  monthOfweek = 4;\r\n                } else if (monthOfweek === 6) {\r\n                  firstdateOfweek += 31;\r\n                  monthOfweek = 5;\r\n                } else if (monthOfweek === 7) {\r\n                  firstdateOfweek += 30;\r\n                  monthOfweek = 6;\r\n                } else if (monthOfweek === 8) {\r\n                  firstdateOfweek += 31;\r\n                  monthOfweek = 7;\r\n                } else if (monthOfweek === 9) {\r\n                  firstdateOfweek += 31;\r\n                  monthOfweek = 8;\r\n                } else if (monthOfweek === 10) {\r\n                  firstdateOfweek += 30;\r\n                  monthOfweek = 9;\r\n                } else if (monthOfweek === 11) {\r\n                  firstdateOfweek += 31;\r\n                  monthOfweek = 10;\r\n                } else if (monthOfweek === 12) {\r\n                  firstdateOfweek += 30;\r\n                  monthOfweek = 11;\r\n                }\r\n              }\r\n              if (monthOfweek === 2 && lastdateOfweek > 28) {\r\n                lastdateOfweek -= 28;\r\n                monthOflast = 3;\r\n              } else if (lastdateOfweek > 31) {\r\n                if (monthOfweek === 1) {\r\n                  lastdateOfweek -= 31;\r\n                  monthOflast = 2;\r\n                } else if (monthOfweek === 3) {\r\n                  lastdateOfweek -= 31;\r\n                  monthOflast = 4;\r\n                } else if (monthOfweek === 4) {\r\n                  lastdateOfweek -= 30;\r\n                  monthOflast = 5;\r\n                } else if (monthOfweek === 5) {\r\n                  lastdateOfweek -= 31;\r\n                  monthOflast = 6;\r\n                } else if (monthOfweek === 6) {\r\n                  lastdateOfweek -= 30;\r\n                  monthOflast = 7;\r\n                } else if (monthOfweek === 7) {\r\n                  lastdateOfweek -= 31;\r\n                  monthOflast = 8;\r\n                } else if (monthOfweek === 8) {\r\n                  lastdateOfweek -= 31;\r\n                  monthOflast = 9;\r\n                } else if (monthOfweek === 9) {\r\n                  lastdateOfweek -= 30;\r\n                  monthOflast = 10;\r\n                } else if (monthOfweek === 10) {\r\n                  lastdateOfweek -= 31;\r\n                  monthOflast = 11;\r\n                } else if (monthOfweek === 11) {\r\n                  lastdateOfweek -= 30;\r\n                  monthOflast = 12;\r\n                } else if (monthOfweek === 12) {\r\n                  lastdateOfweek -= 31;\r\n                  monthOflast = 1;\r\n                  lastyearOfweek += 1;\r\n                }\r\n              }\r\n              weekDate = `${firstdateOfweek}/${monthOfweek}/${yearOfweek} - ${lastdateOfweek}/${monthOflast}/${lastyearOfweek}`;\r\n            } else {\r\n              let datest = parseInt(new Date(job.jobBookingDateTime).getDate());\r\n              let datels = datest + 6;\r\n              let monthst = parseInt(\r\n                new Date(job.jobBookingDateTime).getMonth() + 1\r\n              );\r\n              let monthls = parseInt(\r\n                new Date(job.jobBookingDateTime).getMonth() + 1\r\n              );\r\n              let yearst = parseInt(\r\n                new Date(job.jobBookingDateTime).getFullYear()\r\n              );\r\n              let yearls = parseInt(\r\n                new Date(job.jobBookingDateTime).getFullYear()\r\n              );\r\n\r\n              if (monthst === 2 && datels > 28) {\r\n                datels -= 29;\r\n                monthls = 3;\r\n              } else if (datels > 31) {\r\n                if (monthst === 1) {\r\n                  datels -= 31;\r\n                  monthls = 2;\r\n                } else if (monthst === 3) {\r\n                  datels -= 31;\r\n                  monthls = 4;\r\n                } else if (monthst === 4) {\r\n                  datels -= 30;\r\n                  monthls = 5;\r\n                } else if (monthst === 5) {\r\n                  datels -= 31;\r\n                  monthls = 6;\r\n                } else if (monthst === 6) {\r\n                  datels -= 30;\r\n                  monthls = 7;\r\n                } else if (monthst === 7) {\r\n                  datels -= 31;\r\n                  monthls = 8;\r\n                } else if (monthst === 8) {\r\n                  datels -= 31;\r\n                  monthls = 9;\r\n                } else if (monthst === 9) {\r\n                  datels -= 30;\r\n                  monthls = 10;\r\n                } else if (monthst === 10) {\r\n                  datels -= 31;\r\n                  monthls = 11;\r\n                } else if (monthst === 11) {\r\n                  datels -= 30;\r\n                  monthls = 12;\r\n                } else if (monthst === 12) {\r\n                  datels -= 31;\r\n                  monthls = 1;\r\n                  yearls += 1;\r\n                }\r\n              }\r\n              weekDate = `${datest}/${monthst}/${yearst} - ${datels}/${monthls}/${yearls}`;\r\n            }\r\n          }\r\n          let jobListweek = jobweekdata[weekDate];\r\n          if (!jobListweek) {\r\n            jobListweek = [];\r\n            jobweekdata[weekDate] = jobListweek;\r\n          }\r\n          let jobListMonth = jobMonthCategories[monthOfJob];\r\n          if (!jobListMonth) {\r\n            jobListMonth = [];\r\n            jobMonthCategories[monthOfJob] = jobListMonth;\r\n          }\r\n          if (job.vesselLoadingLocation !== undefined) {\r\n            if (job.vesselLoadingLocation !== null) {\r\n              if (job.vesselLoadingLocation.name !== undefined) {\r\n                if (job.vesselLoadingLocation.name !== null) {\r\n                  let jobListLocation =\r\n                    jobDeliveryCategories[job.vesselLoadingLocation.name];\r\n                  if (!jobListLocation) {\r\n                    jobListLocation = [];\r\n                    jobDeliveryCategories[\r\n                      job.vesselLoadingLocation.name\r\n                    ] = jobListLocation;\r\n                  }\r\n                  jobListLocation.push(job);\r\n                }\r\n              }\r\n            }\r\n          }\r\n          if (job.user.userCompany !== null) {\r\n            let jobListCompanies = jobCompaniesCategories[job.user.userCompany];\r\n            if (!jobListCompanies) {\r\n              jobListCompanies = [];\r\n              jobCompaniesCategories[job.user.userCompany] = jobListCompanies;\r\n            }\r\n            jobListCompanies.push(job);\r\n          }\r\n\r\n          if (job.vessel !== null && job.vessel.vesselName !== null) {\r\n            let jobListVessels = jobVesselsCategories[job.vessel._id];\r\n            if (!jobListVessels) {\r\n              jobListVessels = [];\r\n              jobVesselsCategories[job.vessel._id] = jobListVessels;\r\n            }\r\n            jobListVessels.push(job);\r\n          }\r\n          jobListweek.push(job);\r\n          jobListMonth.push(job);\r\n        }\r\n        jobs.sort((a, b) => {\r\n          return (\r\n            new Date(a.jobBookingDateTime.toString()) -\r\n            new Date(b.jobBookingDateTime.toString())\r\n          );\r\n        });\r\n\r\n        for (let i = 0; i < jobs.length; i++) {\r\n          const job = jobs[i];\r\n          const month = `${new Date(job.jobBookingDateTime).getMonth() +\r\n            1}/${new Date(job.jobBookingDateTime).getFullYear()}`;\r\n          let jobListMonth = jobAnalys[month];\r\n          if (!jobListMonth) {\r\n            jobListMonth = [];\r\n            jobAnalys[month] = jobListMonth;\r\n          }\r\n          jobListMonth.push(job);\r\n        }\r\n        this.setState({\r\n          jobMonthCategories: jobMonthCategories,\r\n          jobDeliveryCategories: jobDeliveryCategories,\r\n          jobCompaniesCategories: jobCompaniesCategories,\r\n          AnalysData: jobAnalys,\r\n          jobVesselsCategories: jobVesselsCategories,\r\n          jobWeeks: jobweekdata\r\n        });\r\n      })\r\n      .catch(err => {\r\n        console.log(err);\r\n      });\r\n  }\r\n\r\n  componentDidUpdate(prevProps, prevState, snapshot) {\r\n    console.log(this.state);\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div>\r\n        <Charts\r\n          jobMonthAnalys={this.state.AnalysData}\r\n          jobDeliveryCategory={this.state.jobDeliveryCategories}\r\n        />\r\n        <WeeksTable\r\n          WeeksData={this.state.jobWeeks}\r\n          Company={this.state.userCompany}\r\n        />\r\n        <BreakdownByMonth jobMonthCategory={this.state.jobMonthCategories} />\r\n        <BreakdownByDeliveryLocations\r\n          jobDeliveryCategory={this.state.jobDeliveryCategories}\r\n        />\r\n        <BreakdownByVessels\r\n          jobVesselsCategory={this.state.jobVesselsCategories}\r\n          Vessel={this.state.vessel}\r\n        />\r\n        <BreakdownByCompanies\r\n          jobCompaniesCategory={this.state.jobCompaniesCategories}\r\n          Company={this.state.userCompany}\r\n        />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default JobAnalytics;\r\n","import React, {Component} from 'react';\r\nimport {Container} from \"reactstrap\";\r\n\r\nimport JobAnalytics from \"./Job/JobAnalytics\";\r\n\r\nclass Analytics extends Component {\r\n    render() {\r\n        return(\r\n            <Container fluid>\r\n                <br/>\r\n                <JobAnalytics/>\r\n            </Container>\r\n        );\r\n    }\r\n}\r\n\r\nexport default Analytics;"],"sourceRoot":""}