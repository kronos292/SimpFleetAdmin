{"version":3,"sources":["components/Dashboard/Job/JobSummaryTableDisplayMobile.js","components/Dashboard/Job/JobSummaryTableSearchBar.js","components/common/Pagination.js","components/Dashboard/Job/JobSummaryTable.js","components/common/PrivateRoute.js","components/layout/ExNavbar.js","components/layout/Footer.js","components/auth/Login.js","components/Dashboard/Admin/AdminDashboard.js","components/Dashboard/Consumer/ConsumerDashboard.js","components/Dashboard/Dashboard.js","components/History/User/UserHistory.js","components/History/Admin/AdminHistory.js","components/History/History.js","components/Job/JobAssignment/JobAssignment.js","components/SideMenuSlider/SideMenuSlider.js","components/Job/JobDetails/Form/JobItemInput.js","components/ui/Modal/AffirmationModal.js","components/ui/Modal/InformationModal.js","components/Job/JobDetails/Form/DateInputComponent.js","components/Job/JobDetails/JobDetailCard.js","components/Job/JobDetails/Files/FileDropzone.js","components/Job/JobDetails/Files/FileUpload.js","components/Job/JobDetails/Files/FileDisplay.js","components/Job/JobDetails/Files/FileUploadSection.js","components/Job/JobDetails/Files/FilePreview/FileDownloader.js","components/Job/JobDetails/Files/FilePreview/JobFileModal.js","components/Job/JobDetails/Files/JobFileSummaryTable.js","components/Job/JobDetails/Files/JobFileSummaryTableMobileSlider.js","components/Job/JobDetails/Files/JobFileSummaryTableMobile.js","components/Job/JobDetails/Files/JobFilesDisplay.js","components/Job/JobDetails/JobDetailsEdit.js","components/Job/JobDetails/JobStatusDisplay/JobStatusDisplay.js","components/Job/JobDetails/JobDropoffDetail.js","components/Job/JobDetails/JobBillingDetail/JobBillingDetail.js","components/Job/JobDetails/JobDetails.js","components/UserApproval/UserApprovalModal.js","components/UserApproval/UserApproval.js","components/LogisticsUserApproval/LogisticsUserApprovalModal.js","components/LogisticsUserApproval/LogisticsUserApproval.js","components/EditUsers/EditUsers.js","App.js","actions/fetchActions.js","serviceWorker.js","reducers/fetchReducer.js","reducers/errorReducer.js","reducers/index.js","store.js","index.js","actions/types.js","components/SidebarMenu/SidebarMenu.js","components/Job/JobDetails/JobShareModal/JobShareModal.js","components/Job/JobShareSlide/JobShareSlide.js","components/Job/CreateJob.js","components/Job/CreateJobModal.js","actions/authAction.js","validation/is-empty.js"],"names":["JobSummaryTableDisplayMobile","state","selectedShareIconIndex","columns","title","field","render","rowData","className","moment","eta","format","name","disableClick","sorting","filtering","props","button","status","timestamp","job","jobTrackers","filter","o","index","length","allowArchive","onClick","event","isArchived","saveJobArchive","key","tableData","id","toggleSharingModal","jobClicked","data","this","components","Container","Paper","elevation","options","paging","padding","headerStyle","fontFamily","fontSize","fontWeight","color","onRowClick","handleRowClick","Component","JobSummaryTableSearchBar","logisticCompany","category","undefined","i","companyName","_id","check","Fragment","class","type","activeFilter","pendingJobFilter","ongoingJobFilter","closedJobFilter","cancelledJobFilter","exportTable","editable","style","width","text","jobBookingDateTime","maxLine","ellipsis","trimRight","basedOn","user","userCompany","firstName","lastName","vessel","vesselName","toUpperCase","vesselIMOID","customSort","a","b","localeCompare","vesselLoadingLocationObj","jobItems","map","items","quantity","uom","jobOfflandItems","paymentTrackers","label","ala","isCancelled","variant","File","timeUploaded","lookup","Row","showTitle","actionsColumnIndex","isEditable","Assignment","onRowUpdate","newData","oldData","Promise","resolve","setTimeout","logisticsCompany","jobAssignmentNew","jobAssignmentNewArray","push","axios","put","jobAssignments","then","res","reload","catch","err","console","log","vesselLoadingLocation","psaBerthingDateTime","vesselLoadingDateTime","timeA","timeB","isBefore","Pagination","postsPerPage","totalPosts","paginate","currentPage","pageNumbers","Math","ceil","aria-label","aria-hidden","number","createRow","imo","price","vesselImo","JobSummaryTable","jobs","showSharingModal","copied","archived","inputSelected","jobFilesArray","jobAssignmentArray","componentDidMount","e","rd","history","handleShareModalClose","setState","handleCopy","window","handleCopiedClose","handleArchiveClose","SlideTransition","Slide","direction","sendEmailUpdate","handleSelect","dataBackup","filtered","wb","ExcelJs","ws","addWorksheet","header","mergeCells","getCell","value","deliverItems","offlandItems","x","fileName","xlsx","writeBuffer","buf","saveAs","Blob","get","contents","user_only","numLimit","archive_only","non_archive_only","sort","Date","toString","subtotal","reduce","jobItem","sum","jobFile","jobAssignment","jobId","vesselArrivalDateTime","auth","indexOfLastPost","indexofFirstPost","vesselDeliveries","statusString","statusStyle","userType","data-title","bordered","hover","striped","responsive","minWidth","bind","slice","JobShareModal","show","joblinkurl","Close","Snackbar","anchorOrigin","horizontal","vertical","open","message","action","IconButton","TransitionComponent","maxWidth","JobShareSlide","onClose","withRouter","connect","component","rest","isAuthenticated","to","ExNavbar","Navbar","expand","Brand","href","preventDefault","Image","src","Nav","Item","Footer","xs","md","span","offset","defaultActiveKey","Link","target","query","icon","faWhatsapp","faFacebook","faInstagram","faLinkedin","faTelegram","Login","onChecked","rememberMe","checked","renderContent","errors","fluid","size","onSubmit","Grid","container","spacing","item","TextField","email","onChange","fullWidth","autoComplete","autoFocus","Typography","display","margin","password","helperText","FormControlLabel","control","Checkbox","Button","localStorage","getItem","nextProps","userData","setItem","loginUser","theme","createMuiTheme","palette","primary","main","ThemeProvider","AdminDashboard","searchText","postPerPage","pageNumber","ConsumerDashboard","SidebarMenu","Dashboard","UserHistory","AdminHistory","marginTop","History","JobAssignment","logisticsCompanies","saveJobAssignments","location","renderLogisticsCompanies","jobAssignmentObj","j","logisticsCompanyObj","reverse","SideMenuSlider","showHistory","showModal","handleOpenModal","handleCloseModal","pageWrapId","outerContainerId","customBurgerIcon","isOpen","onStateChange","handleMenuStateChange","customCrossIcon","handleCloseMenu","Fab","marginRight","Divider","onLogoutClick","CreateJobModal","fullScreen","handlePopoverOpen","createUOMList","JobItemInput","priceList","UOMList","onQuantityUpdate","newProduct","Number","products","newProducts","product","setItems","indexOf","splice","handleAddEvent","itemPrice","floor","random","UOM","renderMenu","includes","jobItemSelected","MenuItem","Prepend","parseInt","document","getElementById","alt","min","onKeyDown","keyCode","stopPropagation","Append","onKeyPress","test","AffirmationModal","isMobile","updatePredicate","addEventListener","removeEventListener","innerWidth","Dialog","modal","toggle","DialogTitle","DialogContent","children","DialogActions","affirmativeAction","affirmativeText","marginLeft","cancelText","InformationModal","onClosed","DateInputComponent","focused","onClickOutside","toggleController","marginBottom","DateTime","disabled","faCalendarAlt","zIndex","position","date","onDateChange","handleDateChange","onOutsideClick","numberOfMonths","isOutsideRange","day","isInclusivelyAfterDay","JobDetailsCard","jobEdit","showJobUpdateModal","jobUpdatedModal","currentCareOffParty","jobPrevState","showItemsDeliverList","focusedVesselArriveDate","ItemsDeliverAnchorEl","ItemsOfflandAnchorEl","handleVesselLoadingLocationChange","handleVesselArrivalDateChange","toISOString","handleVesselArrivalTimeChange","toDate","handleVesselLighterLocationChange","vesselLighterLocation","handleVesselLighterNameChange","vesselLighterName","handleVesselBerthingDateTimeChange","handleVesselUnberthingDateTimeChange","psaUnberthingDateTime","handleVesselLoadingDateChange","handleVesselLoadingTimeChange","handleRemarksChange","remarks","handleVesselLighterRemarksChange","vesselLighterRemarks","validateItems","filteredItems","saveJobDetails","filteredOfflandingItems","now","careOffParties","setHours","getHours","alert","careOffParty","checkValidDate","d","handleDeliverClose","handleOfflandClose","handleCreateDSAChange","createDSA","handleOtherVesselLocationChange","renderJobTimeDetails","vesselLoadingTime","psaBerthingTime","psaUnberthingTime","sm","paddingRight","paddingLeft","showSecond","defaultValue","allowEmpty","vesselLighterDateTime","otherVesselLocation","openDeliver","Boolean","jobItemText","concat","openOffland","jobOfflandItemsText","square","rows","vesselCallsign","Group","Label","Control","as","join","currentTarget","Popover","anchorEl","transformOrigin","JSON","parse","stringify","FileDropzone","highlight","openFileDialog","fileInputRef","current","click","fileListToArray","list","array","onFilesAdded","evt","files","onDragOver","onDragLeave","onDrop","dataTransfer","React","createRef","cursor","ref","multiple","textDecoration","FileUpload","uploading","handleOnMouseEnter","handleOnMouseOut","renderUploadDisplay","file","onMouseEnter","onMouseLeave","height","FileDisplay","edit","handleEdit","fileURL","handleDocumentTitleChange","filename","ButtonGroup","border","handleSingleDelete","FileUploadSection","requirements","needPrintCopy","signAndReturn","numCopies","documentType","retrieveRequirement","requirement","fullRequirements","loadRequirements","jobFileRequirements","updateRequirement","boolean","newRequirements","handlePrintCopyChange","handleSignAndReturnChange","handleUploadType","handleNumberOfCopiesChange","handleAddDocument","formData","FormData","append","post","headers","finally","jobID","handleEditDocument","successClose","req","FormLabel","RadioGroup","row","Radio","checkedIcon","renderUpload","placeholder","handleCancel","FileDownloader","Object","keys","jobFileUrls","responseType","blob","downloadUrl","URL","createObjectURL","createElement","download","body","appendChild","remove","error","downloadSelectedFiles","faDownload","JobFileModal","showPreviewModal","setModalFlag","fileUrlArray","split","fileType","toLowerCase","useState","onHide","dialogClassName","createData","copies","jobFileChange","JobFileSummaryTable","hoverKey","showDropdown","toggleModal","handleDropdown","handleDownload","nextContext","refresh","jobFiles","cellStyle","editFile","deleteFile","minHeight","selection","rowStyle","toolbarButtonAlignment","showTextRowsSelected","actions","tooltip","ClearIcon","deleteMultipleFiles","JobFileSummaryTableMobileSlider","Drawer","anchor","PaperProps","List","ListItem","ListItemText","JobFileSummaryTableMobile","showSlider","jobFileSelected","handleSlider","handleSliderClose","DeleteIcon","JobFilesDisplay","editJobFile","showJobFileDeleteModal","jobFileToDelete","activeScreen","selectOption","numPages","getJobFiles","userJobFiles","newJobFiles","updateJobFiles","handleDeleteJobFiles","deleteJobFiles","delete","handleMultipleDelete","delArray","handleUploadSuccess","handleEditFile","handleEditCancel","faPlusSquare","JobDetailsEdit","jobStatuses","description","trackingType","jobStatus","showCheckJobStatusModal","cancellationConfirmationModal","updateJobStatus","checkJobTracker","cancelJob","cancel","JobStatusDisplay","showJobDetailsEdit","steps","activeStep","renderSteps","step","statusSelected","icons","finish","JobDropoffDetail","LogisticsCompanies","address","contactNumber","website","openingHours","addLL","lat","lng","currentCompany","handleRemarks","handleSaveRemarks","deliveryDate","setDate","getDate","getMonth","getFullYear","LCOpeningHours","getDropoffTime","Map","withScriptjs","withGoogleMap","defaultZoom","defaultCenter","googleMapURL","loadingElement","containerElement","mapElement","JobBillingDetail","showJobCancelModal","paymentTrackerList","updatePaymentTracker","paymentTacker","userId","renderCancelProcedure","userPaymentTrackers","renderAdminPaymentPanel","tracker","v","userPaymentTracker","paymentIndex","saveJobCancellation","AntTabs","withStyles","root","borderBottom","indicator","backgroundColor","Tabs","AntTab","textTransform","typography","fontWeightRegular","opacity","fontWeightMedium","outline","selected","Tab","disableRipple","JobDetails","jobLink","setTabURL","tabName","url","searchParams","set","pushState","generateInvitationLink","handleClose","handleChangeTab","newValue","queryString","search","tab","showComponent","JobDetailCard","Breadcrumbs","separator","disablePadding","handleDrawerClick","enabled","isPopoverOpen","handlePopoverClose","onEscapeKey","containerStyle","windowBorderPadding","content","targetRect","popoverRect","arrowColor","arrowSize","arrowStyle","borderRadius","centered","UserApprovalModal","role","data-dismiss","onUpdateIsApprove","users","UserApproval","compObj","compName","isApproved","data-toggle","data-target","tabIndex","aria-labelledby","cs","LogisticsUserApprovalModal","LogisticsUserApproval","company","EditUsers","logisticsColumns","logisticsData","Axios","prevState","DynamicImport","load","default","MainNavbar","Home","Analytics","App","openMenu","handleOpenMenu","exact","path","dispatch","FETCH_USER","payload","hostname","match","initialState","combineReducers","isEmpty","GET_ERRORS","middleware","thunk","store","createStore","rootReducer","compose","applyMiddleware","__REDUX_DEVTOOLS_EXTENSION__","ReactDOM","navigator","serviceWorker","ready","registration","unregister","sidebarOpen","defaultRenderTag","tag","onRemove","classNameRemove","getTagDisplayValue","other","wordBreak","emailList","emailInputs","mobileWebShare","showSuccessSnackBar","handleMessageChange","updateEmailList","handleEmailInputChange","handleInputClear","webShareJobLink","share","sendEmail","trim","handleSnackBarClose","validate","onCopy","onChangeInput","inputValue","inputProps","tagProps","addKeys","renderTag","clsx","CreateJob","uploadedFile","vessels","submitButtonActive","isLoading","vesselQueryResults","vesselSelected","handleJobIdChange","validateCareOffs","filteredCareOffParties","personName","handleNextStep","handlePaymentBack","renderText","renderJobTimeInfo","Col","_renderMenuItemChildren","option","results","menuProps","priority","handleTypeAheadVesselNameChange","handleKeyDown","handleTypeAheadVesselSelect","handleVesselSelectChange","textArr","renderJobInfo","required","renderMenuItemChildren","labelKey","maxResults","minLength","onInputChange","filterBy","emptyLabel","renderJobPayment","FormControl","paddingTop","paddingBottom","obj","renderSuccess","xmlns","viewBox","cx","cy","r","fill","mobile","renderForm","formDisplay","response","logoutUser","module","exports"],"mappings":"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","file":"static/js/main.64f6d945.chunk.js","sourcesContent":["import React, { Component } from \"react\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport MaterialTable from \"material-table\";\r\nimport ShareIcon from \"@material-ui/icons/Share\";\r\nimport ArchiveIcon from \"@material-ui/icons/Archive\";\r\nimport moment from \"moment\";\r\n\r\nclass JobSummaryTableDisplayMobile extends Component {\r\n  constructor() {\r\n    super();\r\n    this.state = {\r\n      selectedShareIconIndex: 0\r\n    };\r\n  }\r\n  render() {\r\n    return (\r\n      <MaterialTable\r\n        columns={[\r\n          {\r\n            title: \"ETA\",\r\n            field: \"eta\",\r\n            render: rowData => (\r\n              <span className=\"job-table-text\">\r\n                {moment(rowData.eta).format(\"DD MMMM YYYY, HH:mm\")}\r\n              </span>\r\n            )\r\n          },\r\n          {\r\n            title: \"Job Number\",\r\n            field: \"name\",\r\n            render: rowData => (\r\n              <span className=\"job-table-text\">{rowData.name}</span>\r\n            )\r\n          },\r\n          {\r\n            title: \"Status\",\r\n            field: \"status\",\r\n            disableClick: true,\r\n            sorting: false,\r\n            filtering: false,\r\n            render: rowData => (\r\n              <div>\r\n                {this.props.button ? (\r\n                  <div className=\"d-flex align-items-center\">\r\n                    <div className=\"d-flex justify-content-center flex-column\">\r\n                      <span className=\"job-table-text\">\r\n                        {rowData.status[0].title}\r\n                      </span>\r\n                      <i className=\"job-table-helper-text\">\r\n                        {moment(rowData.status[0].timestamp).format(\r\n                          \"MMM DD YYYY, HH:mm\"\r\n                        )}\r\n                      </i>\r\n                    </div>\r\n                    {rowData.job.jobTrackers.filter(o => {\r\n                      return o.index === 6;\r\n                    }).length > 0 && this.props.allowArchive ? (\r\n                      <ArchiveIcon\r\n                        onClick={event => {\r\n                          rowData.job.isArchived = true;\r\n                          this.props.saveJobArchive(rowData.job);\r\n                        }}\r\n                        key={rowData.tableData.id}\r\n                        className=\"job-summary-icon-buttons\"\r\n                      />\r\n                    ) : (\r\n                      <ShareIcon\r\n                        onClick={event => {\r\n                          this.props.toggleSharingModal(true);\r\n                          this.props.jobClicked(rowData.job);\r\n                        }}\r\n                        key={rowData.tableData.id}\r\n                        className=\"job-summary-icon-buttons\"\r\n                      />\r\n                    )}\r\n                  </div>\r\n                ) : (\r\n                  <div>\r\n                    <div className=\"d-flex justify-content-center flex-column\">\r\n                      <span className=\"job-table-text\">\r\n                        {rowData.status[0].title}\r\n                      </span>\r\n                      <i className=\"job-table-helper-text\">\r\n                        {moment(rowData.status[0].timestamp).format(\r\n                          \"MMM DD YYYY, HH:mm\"\r\n                        )}\r\n                      </i>\r\n                    </div>\r\n                  </div>\r\n                )}\r\n              </div>\r\n            )\r\n          }\r\n        ]}\r\n        data={this.props.data}\r\n        components={{\r\n          Container: props => <Paper {...props} elevation={0} />\r\n        }}\r\n        title={this.props.title}\r\n        options={{\r\n          sorting: true,\r\n          paging: false,\r\n          padding: \"dense\",\r\n          // showTitle: false,\r\n          headerStyle: {\r\n            fontFamily: \"Roboto\",\r\n            fontSize: \"14px\",\r\n            fontWeight: \"bold\",\r\n            color: \"#707070\"\r\n          }\r\n        }}\r\n        onRowClick={this.props.handleRowClick}\r\n      />\r\n    );\r\n  }\r\n}\r\nexport default JobSummaryTableDisplayMobile;\r\n","import React, { Component } from \"react\";\r\nimport Button from \"react-bootstrap/Button\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport MaterialTable, { MTableBodyRow } from \"material-table\";\r\nimport ShareIcon from \"@material-ui/icons/Share\";\r\nimport ArchiveIcon from \"@material-ui/icons/Archive\";\r\nimport moment from \"moment\";\r\nimport LinesEllipsis from \"react-lines-ellipsis\";\r\nimport axios from \"axios\";\r\n\r\nexport default class JobSummaryTableSearchBar extends Component {\r\n  render() {\r\n    let logisticCompany = this.props.logisticCompany;\r\n    let category = { undefined: \"-\" };\r\n    for (let i = 0; i < logisticCompany.length; i++) {\r\n      let companyName = category[logisticCompany[i]._id];\r\n      if (!companyName) {\r\n        companyName = logisticCompany[i].name;\r\n        category[logisticCompany[i]._id] = companyName;\r\n      }\r\n    }\r\n    if (this.props.check !== undefined) {\r\n      return (\r\n        <React.Fragment>\r\n          {/* title */}\r\n          <h3 className=\"job-summary-header\">Dashboard</h3>\r\n          {/* filter */}\r\n          <div className=\"row zindex\">\r\n            <div class=\"filter btn-group btn-group-toggle mt-1 col-7\">\r\n              <button\r\n                type=\"button\"\r\n                class={`filter btn text-secondary btn-outline-light ${\r\n                  this.props.activeFilter === \"pendingJob\" ? \"active\" : null\r\n                }`}\r\n                onClick={() => this.props.pendingJobFilter()}\r\n              >\r\n                Pending Job\r\n              </button>\r\n              <button\r\n                type=\"button\"\r\n                class={`filter btn text-secondary btn-outline-light ${\r\n                  this.props.activeFilter === \"ongoingJob\" ? \"active\" : null\r\n                }`}\r\n                onClick={() => this.props.ongoingJobFilter()}\r\n              >\r\n                Ongoing Job\r\n              </button>\r\n              <button\r\n                type=\"button\"\r\n                class={`filter btn text-secondary btn-outline-light ${\r\n                  this.props.activeFilter === \"closedJob\" ? \"active\" : null\r\n                }`}\r\n                onClick={() => this.props.closedJobFilter()}\r\n              >\r\n                Closed Job\r\n              </button>\r\n              <button\r\n                type=\"button\"\r\n                class={`filter btn text-secondary btn-outline-light ${\r\n                  this.props.activeFilter === \"cancelledJob\" ? \"active\" : null\r\n                }`}\r\n                onClick={() => this.props.cancelledJobFilter()}\r\n              >\r\n                Cancelled Job\r\n              </button>\r\n            </div>\r\n            {/* export */}\r\n            <div className=\"col-2 ml-5 mt-1\">\r\n              <button\r\n                className=\"btn text-secondary btn-outline-light filter\"\r\n                onClick={() => this.props.exportTable()}\r\n              >\r\n                Export<i class=\"fas fa-file-excel ml-3\"></i>\r\n              </button>\r\n            </div>\r\n          </div>\r\n          {/* table */}\r\n          <div className=\"upper\">\r\n            <MaterialTable\r\n              columns={[\r\n                /* job created* = created record date */\r\n                {\r\n                  title: \"Job Created\",\r\n                  field: \"jobCreated\",\r\n                  editable: \"never\",\r\n                  render: rowData => (\r\n                    <div\r\n                      className=\"d-flex align-items-center\"\r\n                      style={{ width: \"15vw\" }}\r\n                    >\r\n                      <div style={{ width: \"100%\" }}>\r\n                        <LinesEllipsis\r\n                          style={{ width: \"100%\" }}\r\n                          text={\r\n                            (rowData.job.jobBookingDateTime !== null) |\r\n                            (rowData.job.jobBookingDateTime !== undefined)\r\n                              ? moment(rowData.job.jobBookingDateTime).format(\r\n                                  \"DD MMM YYYY, HH:mm\"\r\n                                )\r\n                              : \"-\"\r\n                          }\r\n                          maxLine=\"1\"\r\n                          ellipsis=\"...\"\r\n                          trimRight\r\n                          basedOn=\"letters\"\r\n                          className={\"job-table-text\"}\r\n                        />\r\n                      </div>\r\n                    </div>\r\n                  )\r\n                },\r\n                /* date of delivery */\r\n                {\r\n                  title: \"Date of Delivery\",\r\n                  field: \"dateOfDelivery\",\r\n                  editable: \"never\",\r\n                  render: rowData => (\r\n                    <div\r\n                      className=\"d-flex align-items-center\"\r\n                      style={{ width: \"15vw\" }}\r\n                    >\r\n                      <div style={{ width: \"100%\" }}>\r\n                        <LinesEllipsis\r\n                          style={{ width: \"100%\" }}\r\n                          text=\"-\"\r\n                          maxLine=\"1\"\r\n                          ellipsis=\"...\"\r\n                          trimRight\r\n                          basedOn=\"letters\"\r\n                          className={\"job-table-text\"}\r\n                        />\r\n                      </div>\r\n                    </div>\r\n                  )\r\n                },\r\n                /* client */\r\n                {\r\n                  title: \"Client\",\r\n                  field: \"userCompanyName\",\r\n                  editable: \"never\",\r\n                  render: rowData => (\r\n                    <div\r\n                      className=\"d-flex align-items-center\"\r\n                      style={{ width: \"20vw\" }}\r\n                    >\r\n                      <div style={{ width: \"100%\" }}>\r\n                        <LinesEllipsis\r\n                          style={{ width: \"100%\" }}\r\n                          text={\r\n                            rowData.job.user.userCompany !== null\r\n                              ? rowData.job.user.firstName ===\r\n                                rowData.job.user.lastName\r\n                                ? rowData.job.user.firstName +\r\n                                  \", \" +\r\n                                  rowData.job.user.userCompany.name\r\n                                : rowData.job.user.firstName +\r\n                                  \" \" +\r\n                                  rowData.job.user.lastName +\r\n                                  \", \" +\r\n                                  rowData.job.user.userCompany.name\r\n                              : \"-\"\r\n                          }\r\n                          maxLine=\"1\"\r\n                          ellipsis=\"...\"\r\n                          trimRight\r\n                          basedOn=\"letters\"\r\n                          className={\"job-table-text\"}\r\n                        />\r\n                      </div>\r\n                    </div>\r\n                  )\r\n                },\r\n                /* job number */\r\n                {\r\n                  title: \"Job Number\",\r\n                  field: \"name\",\r\n                  editable: \"never\",\r\n                  render: rowData => (\r\n                    <div\r\n                      className=\"d-flex align-items-center\"\r\n                      style={{ width: \"10vw\" }}\r\n                    >\r\n                      <div style={{ width: \"100%\" }}>\r\n                        <LinesEllipsis\r\n                          style={{ width: \"100%\" }}\r\n                          text={\r\n                            rowData.name !== null || rowData.name !== undefined\r\n                              ? rowData.name\r\n                              : \"-\"\r\n                          }\r\n                          maxLine=\"1\"\r\n                          ellipsis=\"...\"\r\n                          trimRight\r\n                          basedOn=\"letters\"\r\n                          className={\"job-table-text\"}\r\n                        />\r\n                      </div>\r\n                    </div>\r\n                  )\r\n                },\r\n                /* vessel */\r\n                {\r\n                  title: \"Vessel\",\r\n                  field: \"vesselName\",\r\n                  editable: \"never\",\r\n                  render: rowData => (\r\n                    <div\r\n                      className=\"d-flex align-items-center\"\r\n                      style={{ width: \"20vw\" }}\r\n                    >\r\n                      <div style={{ width: \"100%\" }}>\r\n                        <LinesEllipsis\r\n                          style={{ width: \"100%\" }}\r\n                          text={\r\n                            rowData.job.vessel !== null\r\n                              ? rowData.job.vessel.vesselName !== undefined\r\n                                ? rowData.job.vessel.vesselName.toUpperCase()\r\n                                : \"-\"\r\n                              : \"-\"\r\n                          }\r\n                          maxLine=\"1\"\r\n                          ellipsis=\"...\"\r\n                          trimRight\r\n                          basedOn=\"letters\"\r\n                          className={\"job-table-text\"}\r\n                        />\r\n                        <i className=\"job-table-helper-text\">\r\n                          {rowData.job.vessel !== null\r\n                            ? rowData.job.vessel.vesselIMOID\r\n                            : \"\"}\r\n                        </i>\r\n                      </div>\r\n                    </div>\r\n                  ),\r\n                  customSort: (a, b) =>\r\n                    a.job.vessel.vesselName.localeCompare(\r\n                      b.job.vessel.vesselName\r\n                    )\r\n                },\r\n                /* vessel loading location */\r\n                {\r\n                  title: \"Vessel Loading Location\",\r\n                  field: \"vesselLoadingLocation\",\r\n                  editable: \"never\",\r\n                  render: rowData => (\r\n                    <div\r\n                      className=\"d-flex align-items-center\"\r\n                      style={{ width: \"20vw\" }}\r\n                    >\r\n                      <div style={{ width: \"100%\" }}>\r\n                        <LinesEllipsis\r\n                          style={{ width: \"100%\" }}\r\n                          text={\r\n                            rowData.job.vesselLoadingLocationObj !== undefined\r\n                              ? rowData.job.vesselLoadingLocationObj !== null\r\n                                ? rowData.job.vesselLoadingLocationObj.name\r\n                                : \"-\"\r\n                              : \"-\"\r\n                          }\r\n                          maxLine=\"1\"\r\n                          ellipsis=\"...\"\r\n                          trimRight\r\n                          basedOn=\"letters\"\r\n                          className={\"job-table-text\"}\r\n                        />\r\n                      </div>\r\n                    </div>\r\n                  )\r\n                },\r\n                /* delivery item* = jobItems */\r\n                {\r\n                  title: \"Delivery Items\",\r\n                  field: \"deliveryitems\",\r\n                  editable: \"never\",\r\n                  render: rowData => (\r\n                    <div\r\n                      className=\"d-flex align-items-center\"\r\n                      style={{ width: \"15vw\" }}\r\n                    >\r\n                      <div className=\"\" style={{ width: \"100%\" }}>\r\n                        {rowData.job.jobItems.length !== 0 ? (\r\n                          rowData.job.jobItems.map((items, index) => {\r\n                            return (\r\n                              <LinesEllipsis\r\n                                style={{ width: \"100%\" }}\r\n                                text={\r\n                                  index === rowData.job.jobItems.length - 1\r\n                                    ? items.quantity + \" \" + items.uom\r\n                                    : items.quantity + \" \" + items.uom + \", \"\r\n                                }\r\n                                maxLine=\"1\"\r\n                                ellipsis=\"...\"\r\n                                trimRight\r\n                                basedOn=\"letters\"\r\n                                className={\"job-table-text\"}\r\n                              />\r\n                            );\r\n                          })\r\n                        ) : (\r\n                          <LinesEllipsis\r\n                            style={{ width: \"100%\" }}\r\n                            text=\"-\"\r\n                            maxLine=\"1\"\r\n                            ellipsis=\"...\"\r\n                            trimRight\r\n                            basedOn=\"letters\"\r\n                            className={\"job-table-text\"}\r\n                          />\r\n                        )}\r\n                      </div>\r\n                    </div>\r\n                  )\r\n                },\r\n                /* offland item* = OfflandItems */\r\n                {\r\n                  title: \"Offland Items\",\r\n                  field: \"jobOfflandItems\",\r\n                  editable: \"never\",\r\n                  render: rowData => (\r\n                    <div\r\n                      className=\"d-flex align-items-center\"\r\n                      style={{ width: \"15vw\" }}\r\n                    >\r\n                      <div className=\"\" style={{ width: \"100%\" }}>\r\n                        {rowData.job.jobOfflandItems.length !== 0 ? (\r\n                          rowData.job.jobOfflandItems.map((items, index) => {\r\n                            return (\r\n                              <LinesEllipsis\r\n                                style={{ width: \"100%\" }}\r\n                                text={\r\n                                  index ===\r\n                                  rowData.job.jobOfflandItems.length - 1\r\n                                    ? items.quantity + \" \" + items.uom\r\n                                    : items.quantity + \" \" + items.uom + \", \"\r\n                                }\r\n                                maxLine=\"1\"\r\n                                ellipsis=\"...\"\r\n                                trimRight\r\n                                basedOn=\"letters\"\r\n                                className={\"job-table-text\"}\r\n                              />\r\n                            );\r\n                          })\r\n                        ) : (\r\n                          <LinesEllipsis\r\n                            style={{ width: \"100%\" }}\r\n                            text=\"-\"\r\n                            maxLine=\"1\"\r\n                            ellipsis=\"...\"\r\n                            trimRight\r\n                            basedOn=\"letters\"\r\n                            className={\"job-table-text\"}\r\n                          />\r\n                        )}\r\n                      </div>\r\n                    </div>\r\n                  )\r\n                },\r\n                /* billing* = payment tracker */\r\n                {\r\n                  title: \"Billing\",\r\n                  field: \"billing\",\r\n                  editable: \"never\",\r\n                  render: rowData => (\r\n                    <div\r\n                      className=\"d-flex align-items-center\"\r\n                      style={{ width: \"20vw\" }}\r\n                    >\r\n                      <div style={{ width: \"100%\" }}>\r\n                        <LinesEllipsis\r\n                          style={{ width: \"100%\" }}\r\n                          text={\r\n                            rowData.job.paymentTrackers.length === 3\r\n                              ? rowData.job.paymentTrackers[2].label\r\n                              : rowData.job.paymentTrackers.length === 2\r\n                              ? rowData.job.paymentTrackers[1].label\r\n                              : rowData.job.paymentTrackers.length === 1\r\n                              ? rowData.job.paymentTrackers[0].label\r\n                              : \"-\"\r\n                          }\r\n                          maxLine=\"1\"\r\n                          ala\r\n                          ellipsis=\"...\"\r\n                          trimRight\r\n                          basedOn=\"letters\"\r\n                          className={\"job-table-text\"}\r\n                        />\r\n                        <i className=\"job-table-helper-text\">$XX</i>\r\n                      </div>\r\n                    </div>\r\n                  )\r\n                },\r\n                /* status */\r\n                {\r\n                  title: \"Status\",\r\n                  field: \"status\",\r\n                  editable: \"never\",\r\n                  disableClick: true,\r\n                  sorting: false,\r\n                  filtering: false,\r\n                  render: rowData => (\r\n                    <div\r\n                      className=\"d-flex align-items-center\"\r\n                      style={{ width: \"20vw\" }}\r\n                    >\r\n                      <div style={{ width: \"100%\" }}>\r\n                        <LinesEllipsis\r\n                          style={{ width: \"100%\" }}\r\n                          text={\r\n                            rowData.job.isCancelled === \"Confirmed\"\r\n                              ? \"Job has been cancelled\"\r\n                              : rowData.status[0].title\r\n                          }\r\n                          maxLine=\"1\"\r\n                          ellipsis=\"...\"\r\n                          trimRight\r\n                          basedOn=\"letters\"\r\n                          className={\r\n                            rowData.job.isCancelled === \"Confirmed\"\r\n                              ? \"job-table-text red\"\r\n                              : \"job-table-text\"\r\n                          }\r\n                        />\r\n                        <i className=\"job-table-helper-text\">\r\n                          {moment(rowData.status[0].timestamp).format(\r\n                            \"MMM DD YYYY, HH:mm\"\r\n                          )}\r\n                        </i>\r\n                      </div>\r\n                      {rowData.job.jobTrackers.filter(o => {\r\n                        return o.index === 6;\r\n                      }).length > 0 && this.props.allowArchive ? (\r\n                        <Button\r\n                          variant=\"outlined\"\r\n                          onClick={event => {\r\n                            rowData.job.isArchived = true;\r\n                            this.props.saveJobArchive(rowData.job);\r\n                          }}\r\n                          key={rowData.tableData.id}\r\n                          className=\"table-share-button mr-5\"\r\n                        >\r\n                          <div className=\"d-flex align-items-center\">\r\n                            Archive\r\n                            <ArchiveIcon />\r\n                          </div>\r\n                        </Button>\r\n                      ) : (\r\n                        <Button\r\n                          variant=\"outlined\"\r\n                          onClick={event => {\r\n                            this.props.toggleSharingModal(true);\r\n                            this.props.jobClicked(rowData.job);\r\n                          }}\r\n                          key={rowData.tableData.id}\r\n                          className=\"table-share-button mr-5\"\r\n                        >\r\n                          <div className=\"d-flex align-items-center\">\r\n                            Share\r\n                            <ShareIcon />\r\n                          </div>\r\n                        </Button>\r\n                      )}\r\n                    </div>\r\n                  )\r\n                },\r\n                /* document* = check job file */\r\n                {\r\n                  title: \"Document\",\r\n                  field: \"document\",\r\n                  editable: \"never\",\r\n                  render: rowData => (\r\n                    <div\r\n                      className=\"d-flex align-items-center\"\r\n                      style={{ width: \"20vw\" }}\r\n                    >\r\n                      <div style={{ width: \"100%\" }}>\r\n                        <LinesEllipsis\r\n                          style={{ width: \"100%\" }}\r\n                          text={\r\n                            rowData.File.length > 0\r\n                              ? \"Uploaded\"\r\n                              : \"Not yet uploaded\"\r\n                          }\r\n                          maxLine=\"1\"\r\n                          ala\r\n                          ellipsis=\"...\"\r\n                          trimRight\r\n                          basedOn=\"letters\"\r\n                          className={\"job-table-text\"}\r\n                        />\r\n                        <i className=\"job-table-helper-text\">\r\n                          {rowData.File.length > 0\r\n                            ? moment(rowData.File[0].timeUploaded).format(\r\n                                \"MMM, DD YYYY, HH:mm\"\r\n                              )\r\n                            : \"-\"}\r\n                        </i>\r\n                      </div>\r\n                    </div>\r\n                  )\r\n                },\r\n                /* 3pl* */\r\n                {\r\n                  title: \"3PL\",\r\n                  field: \"Assignment[0].logisticsCompany._id\",\r\n                  lookup: category\r\n                }\r\n              ]}\r\n              data={this.props.data}\r\n              components={{\r\n                Container: props => <Paper {...props} elevation={0} />,\r\n                Row: props => <MTableBodyRow {...props} className=\"rows\" />\r\n              }}\r\n              options={{\r\n                sorting: true,\r\n                paging: false,\r\n                padding: \"dense\",\r\n                showTitle: false,\r\n                headerStyle: {\r\n                  fontFamily: \"Roboto\",\r\n                  fontSize: \"14px\",\r\n                  fontWeight: \"bold\",\r\n                  color: \"#707070\"\r\n                },\r\n                actionsColumnIndex: 12\r\n              }}\r\n              onRowClick={this.props.handleRowClick}\r\n              editable={{\r\n                isEditable: rowData =>\r\n                  rowData.Assignment[0].status !== \"Assigned\",\r\n                onRowUpdate: (newData, oldData) =>\r\n                  new Promise(resolve => {\r\n                    setTimeout(() => {\r\n                      {\r\n                        resolve();\r\n                        for (let i = 0; i < logisticCompany.length; i++) {\r\n                          if (\r\n                            logisticCompany[i]._id ===\r\n                            newData.Assignment[0].logisticsCompany._id\r\n                          ) {\r\n                            const jobAssignmentNew = {\r\n                              status: newData.Assignment[0].status,\r\n                              _id: newData.Assignment[0]._id,\r\n                              job: newData.Assignment[0].job,\r\n                              logisticsCompany: logisticCompany[i]\r\n                            };\r\n                            const jobAssignmentNewArray = [];\r\n                            jobAssignmentNewArray.push(jobAssignmentNew);\r\n                            axios\r\n                              .put(\"/api/job_assignments\", {\r\n                                jobAssignments: jobAssignmentNewArray\r\n                              })\r\n                              .then(res => {\r\n                                this.props.reload();\r\n                              })\r\n                              .catch(err => {\r\n                                console.log(err);\r\n                              });\r\n                          }\r\n                        }\r\n                      }\r\n                      resolve();\r\n                    }, 1000);\r\n                  })\r\n              }}\r\n            />\r\n          </div>\r\n        </React.Fragment>\r\n      );\r\n    } else {\r\n      return (\r\n        <MaterialTable\r\n          columns={[\r\n            {\r\n              title: \"Vessel Loading Time\",\r\n              field: \"job\",\r\n              render: rowData => {\r\n                switch (rowData.job.vesselLoadingLocation) {\r\n                  case \"PSA\":\r\n                    return (\r\n                      <span className=\"job-table-text\">\r\n                        {moment(rowData.job.psaBerthingDateTime).format(\r\n                          \"DD MMMM YYYY, HH:mm\"\r\n                        )}\r\n                      </span>\r\n                    );\r\n                  case \"Jurong Port\":\r\n                    return (\r\n                      <span className=\"job-table-text\">\r\n                        {moment(rowData.job.vesselLoadingDateTime).format(\r\n                          \"DD MMMM YYYY, HH:mm\"\r\n                        )}\r\n                      </span>\r\n                    );\r\n                  default:\r\n                    return (\r\n                      <span className=\"job-table-text\">\r\n                        {moment(rowData.job.vesselLoadingDateTime).format(\r\n                          \"DD MMMM YYYY, HH:mm\"\r\n                        )}\r\n                      </span>\r\n                    );\r\n                }\r\n              },\r\n              customSort: (a, b) => {\r\n                let timeA, timeB;\r\n                if (a.job.vesselLoadingLocation === \"PSA\") {\r\n                  timeA = moment(a.job.psaBerthingDateTime);\r\n                } else {\r\n                  timeA = moment(a.job.vesselLoadingDateTime);\r\n                }\r\n                if (b.job.vesselLoadingLocation === \"PSA\") {\r\n                  timeB = moment(b.job.psaBerthingDateTime);\r\n                } else {\r\n                  timeB = moment(b.job.vesselLoadingDateTime);\r\n                }\r\n                if (timeA.isBefore(timeB)) {\r\n                  return 1;\r\n                } else {\r\n                  return -1;\r\n                }\r\n              }\r\n            },\r\n            {\r\n              title: \"Job Number\",\r\n              field: \"name\",\r\n              render: rowData => (\r\n                <span className=\"job-table-text\">{rowData.name}</span>\r\n              )\r\n            },\r\n            {\r\n              title: \"Vessel Name\",\r\n              field: \"vesselName\",\r\n              render: rowData => (\r\n                <div className=\"d-flex flex-column\">\r\n                  <span className=\"job-table-text\">\r\n                    {rowData.job.vessel !== null ||\r\n                    rowData.job.vessel !== undefined\r\n                      ? rowData.job.vessel.vesselName.toUpperCase()\r\n                      : \"\"}\r\n                  </span>\r\n                  <span className=\"job-table-helper-text\">\r\n                    <i>\r\n                      {rowData.job.vessel !== null ||\r\n                      rowData.job.vessel !== undefined\r\n                        ? rowData.job.vessel.vesselIMOID\r\n                        : \"\"}\r\n                    </i>\r\n                  </span>\r\n                </div>\r\n              ),\r\n              customSort: (a, b) =>\r\n                a.job.vessel.vesselName.localeCompare(b.job.vessel.vesselName)\r\n            },\r\n            {\r\n              title: \"Status\",\r\n              field: \"status\",\r\n              disableClick: true,\r\n              sorting: false,\r\n              filtering: false,\r\n              render: rowData => (\r\n                <div\r\n                  className=\"d-flex align-items-center\"\r\n                  style={{ width: \"20vw\" }}\r\n                >\r\n                  <div style={{ width: \"100%\" }}>\r\n                    <LinesEllipsis\r\n                      style={{ width: \"100%\" }}\r\n                      text={\r\n                        rowData.job.isCancelled === \"Confirmed\"\r\n                          ? \"Job has been cancelled\"\r\n                          : rowData.status[0].title\r\n                      }\r\n                      maxLine=\"1\"\r\n                      ellipsis=\"...\"\r\n                      trimRight\r\n                      basedOn=\"letters\"\r\n                      className={\r\n                        rowData.job.isCancelled === \"Confirmed\"\r\n                          ? \"job-table-text red\"\r\n                          : \"job-table-text\"\r\n                      }\r\n                    />\r\n                    <i className=\"job-table-helper-text\">\r\n                      {moment(rowData.status[0].timestamp).format(\r\n                        \"MMM DD YYYY, HH:mm\"\r\n                      )}\r\n                    </i>\r\n                  </div>\r\n                  {rowData.job.jobTrackers.filter(o => {\r\n                    return o.index === 6;\r\n                  }).length > 0 && this.props.allowArchive ? (\r\n                    <Button\r\n                      variant=\"outlined\"\r\n                      onClick={event => {\r\n                        rowData.job.isArchived = true;\r\n                        this.props.saveJobArchive(rowData.job);\r\n                      }}\r\n                      key={rowData.tableData.id}\r\n                      className=\"table-share-button\"\r\n                    >\r\n                      <div className=\"d-flex align-items-center\">\r\n                        Archive\r\n                        <ArchiveIcon />\r\n                      </div>\r\n                    </Button>\r\n                  ) : (\r\n                    <Button\r\n                      variant=\"outlined\"\r\n                      onClick={event => {\r\n                        this.props.toggleSharingModal(true);\r\n                        this.props.jobClicked(rowData.job);\r\n                      }}\r\n                      key={rowData.tableData.id}\r\n                      className=\"table-share-button\"\r\n                    >\r\n                      <div className=\"d-flex align-items-center\">\r\n                        Share\r\n                        <ShareIcon />\r\n                      </div>\r\n                    </Button>\r\n                  )}\r\n                </div>\r\n              )\r\n            }\r\n          ]}\r\n          data={this.props.data}\r\n          components={{\r\n            Container: props => <Paper {...props} elevation={0} />,\r\n            Row: props => <MTableBodyRow {...props} className=\"rows\" />\r\n          }}\r\n          options={{\r\n            sorting: true,\r\n            paging: false,\r\n            padding: \"dense\",\r\n            showTitle: false,\r\n            headerStyle: {\r\n              fontFamily: \"Roboto\",\r\n              fontSize: \"14px\",\r\n              fontWeight: \"bold\",\r\n              color: \"#707070\"\r\n            }\r\n          }}\r\n          onRowClick={this.props.handleRowClick}\r\n        />\r\n      );\r\n    }\r\n  }\r\n}\r\n","import React from \"react\";\r\n\r\nexport default function Pagination({\r\n  postsPerPage,\r\n  totalPosts,\r\n  paginate,\r\n  currentPage\r\n}) {\r\n  const pageNumbers = [];\r\n\r\n  for (let i = 1; i <= Math.ceil(totalPosts / postsPerPage); i++) {\r\n    pageNumbers.push(i);\r\n  }\r\n\r\n  return (\r\n    <nav aria-label=\"Page navigation example\">\r\n      <ul className=\"pagination justify-content-center\">\r\n        <li className={`page-item${currentPage === 1 ? \" disabled\" : \"\"}`}>\r\n          <a\r\n            className=\"page-link\"\r\n            aria-label=\"Previous\"\r\n            onClick={() => paginate(currentPage - 1)}\r\n          >\r\n            <span aria-hidden=\"true\">&laquo;</span>\r\n          </a>\r\n        </li>\r\n        {pageNumbers.map(number => (\r\n          <li\r\n            key={number}\r\n            className={`page-item${number === currentPage ? \" active\" : \"\"}`}\r\n          >\r\n            <a onClick={() => paginate(number)} className=\"page-link\">\r\n              {number}\r\n            </a>\r\n          </li>\r\n        ))}\r\n        <li\r\n          className={`page-item${\r\n            currentPage === pageNumbers.length ? \" disabled\" : \"\"\r\n          }`}\r\n        >\r\n          <a\r\n            className=\"page-link\"\r\n            aria-label=\"Next\"\r\n            onClick={() => paginate(currentPage + 1)}\r\n          >\r\n            <span aria-hidden=\"true\">&raquo;</span>\r\n          </a>\r\n        </li>\r\n      </ul>\r\n    </nav>\r\n  );\r\n}\r\n","import \"./JobSummaryTable.css\";\r\nimport React, { Component } from \"react\";\r\nimport axios from \"axios\";\r\nimport { withRouter } from \"react-router-dom\";\r\nimport { connect } from \"react-redux\";\r\nimport { Table } from \"reactstrap\";\r\nimport MediaQuery from \"react-responsive\";\r\n\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\nimport Snackbar from \"@material-ui/core/Snackbar\";\r\n\r\nimport JobSummaryTableDisplayMobile from \"./JobSummaryTableDisplayMobile\";\r\nimport JobSummaryTableSearchBar from \"./JobSummaryTableSearchBar\";\r\nimport Slide from \"@material-ui/core/Slide\";\r\nimport JobShareModal from \"../../Job/JobDetails/JobShareModal/JobShareModal\";\r\nimport JobShareSlide from \"../../Job/JobShareSlide/JobShareSlide\";\r\nimport Pagination from \"../../common/Pagination\";\r\n// import ExcelJs from \"exceljs/dist/es5/exceljs.browser.js\";\r\nimport { saveAs } from \"file-saver\";\r\nimport * as ExcelJs from 'exceljs/dist/exceljs';\r\nimport moment from \"moment\";\r\n\r\nfunction priceRow(qty, price) {\r\n  // return qty * price;\r\n  return 0;\r\n}\r\n\r\nfunction createRow(\r\n  name,\r\n  imo,\r\n  vesselName,\r\n  status,\r\n  job,\r\n  eta,\r\n  price,\r\n  File,\r\n  Assignment\r\n) {\r\n  return {\r\n    name: name,\r\n    vesselImo: imo,\r\n    vesselName: vesselName,\r\n    status: status,\r\n    job: job,\r\n    eta: eta,\r\n    price: price,\r\n    File: File,\r\n    Assignment: Assignment\r\n  };\r\n}\r\n\r\nclass JobSummaryTable extends Component {\r\n  state = {\r\n    jobs: null,\r\n    data: [],\r\n    showSharingModal: false,\r\n    copied: false,\r\n    jobClicked: null,\r\n    archived: false,\r\n    inputSelected: false,\r\n    jobFilesArray: [],\r\n    jobAssignmentArray: [],\r\n    activeFilter: \"\",\r\n    logisticCompany: []\r\n  };\r\n\r\n  componentDidMount() {\r\n    /* get all job files */\r\n    axios\r\n      .get(\"api/job_files/all\")\r\n      .then(res => {\r\n        const contents = res.data;\r\n        this.setState({ jobFilesArray: contents });\r\n        /* get all job assignment */\r\n        axios.get(\"api/job_assignments/all\").then(res => {\r\n          const contents = res.data;\r\n          this.setState({ jobAssignmentArray: contents });\r\n          // Get all jobs\r\n          axios\r\n            .get(\r\n              `/api/jobs?user_only=${this.props.user_only}&numLimit=${\r\n                this.props.numLimit ? this.props.numLimit : false\r\n              }&archive_only=${\r\n                this.props.archive_only ? this.props.archive_only : false\r\n              }&non_archive_only=${\r\n                this.props.non_archive_only\r\n                  ? this.props.non_archive_only\r\n                  : false\r\n              }`\r\n            )\r\n            .then(res => {\r\n              const data = [];\r\n              const jobs = res.data.sort((a, b) => {\r\n                return (\r\n                  new Date(b.jobBookingDateTime.toString()) -\r\n                  new Date(a.jobBookingDateTime.toString())\r\n                );\r\n              });\r\n              this.setState({\r\n                jobs: jobs\r\n              });\r\n\r\n              /* loop job & set job to data's state */\r\n              for (let i = 0; i < jobs.length; i++) {\r\n                let job = jobs[i];\r\n                job.jobTrackers.sort((a, b) => {\r\n                  return b.index - a.index;\r\n                });\r\n                const subtotal = job.jobItems\r\n                  .reduce((a, jobItem) => {\r\n                    a.push(priceRow(jobItem.quantity, jobItem.price));\r\n                    return a;\r\n                  }, [])\r\n                  .reduce((sum, i) => sum + i, 0);\r\n                /* comparing job files */\r\n                const jobFile = [];\r\n                for (let i = 0; i < this.state.jobFilesArray.length; i++) {\r\n                  if (job._id === this.state.jobFilesArray[i].job) {\r\n                    jobFile.push(this.state.jobFilesArray[i]);\r\n                  }\r\n                }\r\n                /* comparing job assignments */\r\n                const jobAssignment = [];\r\n                for (let i = 0; i < this.state.jobAssignmentArray.length; i++) {\r\n                  if (\r\n                    job.jobId === this.state.jobAssignmentArray[i].job.jobId\r\n                  ) {\r\n                    jobAssignment.push(this.state.jobAssignmentArray[i]);\r\n                  }\r\n                }\r\n                data.push(\r\n                  createRow(\r\n                    job.jobId,\r\n                    job.vessel !== null ? job.vessel.vesselIMOID : \"\",\r\n                    job.vessel !== null ? job.vessel.vesselName : \"\",\r\n                    job.jobTrackers,\r\n                    job,\r\n                    job.vesselArrivalDateTime,\r\n                    subtotal,\r\n                    jobFile,\r\n                    jobAssignment\r\n                  )\r\n                );\r\n              }\r\n              if (this.state.activeFilter === \"pendingJob\") {\r\n                const filtered = data.filter(items => {\r\n                  return (\r\n                    items.job.isCancelled !== \"Confirmed\" &&\r\n                    items.job.jobTrackers.length === 1\r\n                  );\r\n                });\r\n                this.setState({\r\n                  data: filtered,\r\n                  activeFilter: \"pendingJob\"\r\n                });\r\n              } else if (this.state.activeFilter === \"ongoingJob\") {\r\n                const filtered = data.filter(items => {\r\n                  return (\r\n                    items.job.isCancelled !== \"Confirmed\" &&\r\n                    items.job.jobTrackers.length < 6 &&\r\n                    items.job.jobTrackers.length > 1\r\n                  );\r\n                });\r\n                this.setState({\r\n                  data: filtered\r\n                });\r\n              } else if (this.state.activeFilter === \"closedJob\") {\r\n                const filtered = data.filter(items => {\r\n                  return (\r\n                    items.job.isCancelled !== \"Confirmed\" &&\r\n                    items.job.jobTrackers.length === 6\r\n                  );\r\n                });\r\n                this.setState({\r\n                  data: filtered,\r\n                  activeFilter: \"closedJob\"\r\n                });\r\n              } else if (this.state.activeFilter === \"cancelledJob\") {\r\n                const filtered = data.filter(\r\n                  items => items.job.isCancelled === \"Confirmed\"\r\n                );\r\n                this.setState({\r\n                  data: filtered,\r\n                  activeFilter: \"cancelledJob\"\r\n                });\r\n              } else {\r\n                this.setState({\r\n                  data: data\r\n                });\r\n              }\r\n              this.setState({\r\n                dataBackup: data\r\n              });\r\n            });\r\n        });\r\n      })\r\n      .catch(err => {\r\n        console.log(err);\r\n      });\r\n    /* get logistic company */\r\n    axios.get(\"api/logistics_companies\").then(res => {\r\n      this.setState({ logisticCompany: res.data });\r\n    });\r\n  }\r\n  reload = () => {\r\n    this.componentDidMount();\r\n  };\r\n\r\n  handleRowClick = (e, rd) => {\r\n    let index = rd.tableData.id;\r\n    this.props.history.push(`/job_details?job=${this.state.jobs[index].index}`);\r\n  };\r\n\r\n  handleShareModalClose = () => {\r\n    this.setState({ showSharingModal: false, inputSelected: false });\r\n  };\r\n\r\n  handleCopy = () => {\r\n    this.setState({ copied: true });\r\n    window.setTimeout(() => {\r\n      this.setState({ copied: false });\r\n    }, 5000);\r\n  };\r\n\r\n  handleCopiedClose = () => {\r\n    this.setState({ copied: false });\r\n  };\r\n\r\n  handleArchiveClose = () => {\r\n    this.setState({ archived: false });\r\n  };\r\n\r\n  SlideTransition = props => {\r\n    return <Slide {...props} direction=\"up\" />;\r\n  };\r\n\r\n  saveJobArchive = job => {\r\n    // Save job details\r\n    axios\r\n      .put(\"/api/jobs\", {\r\n        job,\r\n        sendEmailUpdate: false\r\n      })\r\n      .then(res => {\r\n        this.props.history.push(\"/history\");\r\n      })\r\n      .catch(err => {\r\n        console.log(err);\r\n      });\r\n  };\r\n\r\n  handleSelect = e => {\r\n    this.setState({ inputSelected: true });\r\n  };\r\n\r\n  /* filter function */\r\n  /* pending job */\r\n  pendingJobFilter = () => {\r\n    if (this.state.activeFilter === \"pendingJob\") {\r\n      this.setState({\r\n        data: this.state.dataBackup,\r\n        activeFilter: \"\"\r\n      });\r\n    } else {\r\n      const filtered = this.state.dataBackup.filter(items => {\r\n        return (\r\n          items.job.isCancelled !== \"Confirmed\" &&\r\n          items.job.jobTrackers.length === 1\r\n        );\r\n      });\r\n      this.setState({\r\n        data: filtered,\r\n        activeFilter: \"pendingJob\"\r\n      });\r\n    }\r\n  };\r\n  /* ongoing job */\r\n  ongoingJobFilter = () => {\r\n    if (this.state.activeFilter === \"ongoingJob\") {\r\n      this.setState({\r\n        data: this.state.dataBackup,\r\n        activeFilter: \"\"\r\n      });\r\n    } else {\r\n      const filtered = this.state.dataBackup.filter(items => {\r\n        return (\r\n          items.job.isCancelled !== \"Confirmed\" &&\r\n          items.job.jobTrackers.length < 6 &&\r\n          items.job.jobTrackers.length > 1\r\n        );\r\n      });\r\n      this.setState({\r\n        data: filtered,\r\n        activeFilter: \"ongoingJob\"\r\n      });\r\n    }\r\n  };\r\n  /* closed job */\r\n  closedJobFilter = () => {\r\n    if (this.state.activeFilter === \"closedJob\") {\r\n      this.setState({\r\n        data: this.state.dataBackup,\r\n        activeFilter: \"\"\r\n      });\r\n    } else {\r\n      const filtered = this.state.dataBackup.filter(items => {\r\n        return (\r\n          items.job.isCancelled !== \"Confirmed\" &&\r\n          items.job.jobTrackers.length === 6\r\n        );\r\n      });\r\n      this.setState({\r\n        data: filtered,\r\n        activeFilter: \"closedJob\"\r\n      });\r\n    }\r\n  };\r\n  /* cancelled job */\r\n  cancelledJobFilter = () => {\r\n    if (this.state.activeFilter === \"cancelledJob\") {\r\n      this.setState({\r\n        data: this.state.dataBackup,\r\n        activeFilter: \"\"\r\n      });\r\n    } else {\r\n      const filtered = this.state.dataBackup.filter(\r\n        items => items.job.isCancelled === \"Confirmed\"\r\n      );\r\n      this.setState({\r\n        data: filtered,\r\n        activeFilter: \"cancelledJob\"\r\n      });\r\n    }\r\n  };\r\n\r\n  exportTable = () => {\r\n    const wb = new ExcelJs.Workbook();\r\n\r\n    const ws = wb.addWorksheet();\r\n\r\n    ws.columns = [\r\n      { header: \"Job Created\", key: \"Job Created\", width: 20 },\r\n      { header: \"Date of Delivery\", key: \"Date of Delivery\", width: 25 },\r\n      { header: \"Client\", key: \"Client\", width: 30 },\r\n      { header: \"Job Number\", key: \"Job Number\", width: 15 },\r\n      { header: \"Vessel\", key: \"Vessel\", width: 25 },\r\n      {\r\n        header: \"Vessel Loading Location\",\r\n        key: \"Vessel Loading Location\",\r\n        width: 25\r\n      },\r\n      { header: \"Delivery Items\", key: \"Delivery Items\", width: 30 },\r\n      { header: \"Offland Items\", key: \"Offland Items\", width: 30 },\r\n      { header: \"Billing\", key: \"Billing\", width: 20 },\r\n      { header: \"Status\", key: \"Status\", width: 25 },\r\n      { header: \"Document\", key: \"Document\", width: 20 },\r\n      { header: \"3PL\", key: \"3PL\", width: 20 }\r\n    ];\r\n\r\n    for (let i = 0; i < this.state.data.length * 2; i += 2) {\r\n      /* pending job */\r\n      ws.mergeCells(`A${i + 2}:A${i + 3}`);\r\n      /* Date of Delivery */\r\n      ws.mergeCells(`B${i + 2}:B${i + 3}`);\r\n      /* Client */\r\n      ws.mergeCells(`C${i + 2}:C${i + 3}`);\r\n      /* Job Number */\r\n      ws.mergeCells(`D${i + 2}:D${i + 3}`);\r\n      /* Vessel Loading Location */\r\n      ws.mergeCells(`F${i + 2}:F${i + 3}`);\r\n      /* Delivery Items */\r\n      ws.mergeCells(`G${i + 2}:G${i + 3}`);\r\n      /* Offland Items */\r\n      ws.mergeCells(`H${i + 2}:H${i + 3}`);\r\n      /* 3pl */\r\n      ws.mergeCells(`L${i + 2}:L${i + 3}`);\r\n    }\r\n\r\n    for (let i = 1; i < this.state.data.length + 1; i++) {\r\n      /* job created */\r\n      ws.getCell(`A${i * 2}`).value = moment(\r\n        this.state.data[i - 1].job.jobBookingDateTime\r\n      ).format(\"DD MMM YYYY, HH:mm\");\r\n      /* client */\r\n      ws.getCell(`C${i * 2}`).value =\r\n        this.state.data[i - 1].job.user.firstName +\r\n        \" \" +\r\n        this.state.data[i - 1].job.user.lastName +\r\n        \", \" +\r\n        this.state.data[i - 1].job.user.userCompany.name;\r\n      /* job number */\r\n      ws.getCell(`D${i * 2}`).value = this.state.data[i - 1].name;\r\n      /* Vessel || Vessel Loading Location */\r\n      if (this.state.data[i - 1].job.vessel === null) {\r\n        ws.getCell(`E${i * 2}`).value = \"\";\r\n        ws.getCell(`E${i * 2 + 1}`).value = \"\";\r\n        ws.getCell(`F${i * 2}`).value = \"\";\r\n      } else {\r\n        ws.getCell(`E${i * 2}`).value = this.state.data[\r\n          i - 1\r\n        ].job.vessel.vesselName.toUpperCase();\r\n        ws.getCell(`E${i * 2 + 1}`).value = this.state.data[\r\n          i - 1\r\n        ].job.vessel.vesselIMOID;\r\n        if (\r\n          this.state.data[i - 1].job.vesselLoadingLocationObj === undefined ||\r\n          this.state.data[i - 1].job.vesselLoadingLocationObj === null\r\n        ) {\r\n          ws.getCell(`F${i * 2}`).value = \"\";\r\n        } else {\r\n          ws.getCell(`F${i * 2}`).value = this.state.data[\r\n            i - 1\r\n          ].job.vesselLoadingLocationObj.name;\r\n        }\r\n      }\r\n      let deliverItems = \"\";\r\n      let offlandItems = \"\";\r\n      /* deliver items */\r\n      for (let x = 0; x < this.state.data[i - 1].job.jobItems.length; x++) {\r\n        deliverItems =\r\n          deliverItems +\r\n          this.state.data[i - 1].job.jobItems[x].quantity +\r\n          \" \" +\r\n          this.state.data[i - 1].job.jobItems[x].uom +\r\n          \", \";\r\n      }\r\n      /* offland items */\r\n      for (\r\n        let x = 0;\r\n        x < this.state.data[i - 1].job.jobOfflandItems.length;\r\n        x++\r\n      ) {\r\n        offlandItems =\r\n          offlandItems +\r\n          this.state.data[i - 1].job.jobOfflandItems[x].quantity +\r\n          \" \" +\r\n          this.state.data[i - 1].job.jobOfflandItems[x].uom +\r\n          \", \";\r\n      }\r\n      ws.getCell(`G${i * 2}`).value = deliverItems;\r\n      ws.getCell(`H${i * 2}`).value = offlandItems;\r\n      /* billing */\r\n      if (this.state.data[i - 1].job.paymentTrackers.length === 3) {\r\n        ws.getCell(`I${i * 2}`).value = this.state.data[\r\n          i - 1\r\n        ].job.paymentTrackers[2].label;\r\n      } else if (this.state.data[i - 1].job.paymentTrackers.length === 2) {\r\n        ws.getCell(`I${i * 2}`).value = this.state.data[\r\n          i - 1\r\n        ].job.paymentTrackers[1].label;\r\n      } else if (this.state.data[i - 1].job.paymentTrackers.length === 1) {\r\n        ws.getCell(`I${i * 2}`).value = this.state.data[\r\n          i - 1\r\n        ].job.paymentTrackers[0].label;\r\n      }\r\n      ws.getCell(`I${i * 2 + 1}`).value = \"$-\";\r\n      /* status */\r\n      if (this.state.data[i - 1].job.isCancelled === \"Confirmed\") {\r\n        ws.getCell(`J${i * 2}`).value = \"Job has been cancelled\";\r\n      } else {\r\n        ws.getCell(`J${i * 2}`).value = this.state.data[i - 1].status[0].title;\r\n      }\r\n      ws.getCell(`J${i * 2 + 1}`).value = moment(\r\n        this.state.data[i - 1].status[0].timestamp\r\n      ).format(\"MMM DD YYYY, HH:mm\");\r\n      /* document */\r\n      if (this.state.data[i - 1].File.length > 0) {\r\n        ws.getCell(`K${i * 2}`).value = \"Uploaded\";\r\n        ws.getCell(`K${i * 2 + 1}`).value = moment(\r\n          this.state.data[i - 1].File[0].timeUploaded\r\n        ).format(\"MMM, DD YYYY, HH:mm\");\r\n      } else {\r\n        ws.getCell(`K${i * 2}`).value = \"Not yet uploaded\";\r\n      }\r\n      /* 3pl */\r\n      if (this.state.data[i - 1].Assignment.length !== 0) {\r\n        if (this.state.data[i - 1].Assignment[0].status !== \"Pending\") {\r\n          if (\r\n            this.state.data[i - 1].Assignment[0].logisticsCompany !== undefined\r\n          ) {\r\n            ws.getCell(`L${i * 2}`).value = this.state.data[\r\n              i - 1\r\n            ].Assignment[0].logisticsCompany.name;\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    if (this.state.activeFilter !== \"\") {\r\n      let fileName = \"\";\r\n      fileName = `dashboard filtered by ${this.state.activeFilter}`;\r\n      wb.xlsx.writeBuffer().then(buf => {\r\n        saveAs(new Blob([buf]), `${fileName}.xlsx`);\r\n      });\r\n    } else {\r\n      wb.xlsx.writeBuffer().then(buf => {\r\n        saveAs(new Blob([buf]), \"dashboard.xlsx\");\r\n      });\r\n    }\r\n  };\r\n\r\n  render() {\r\n    switch (this.state.jobs) {\r\n      case null:\r\n        return <div></div>;\r\n      default:\r\n        switch (this.props.auth) {\r\n          case null:\r\n            return <div></div>;\r\n          default:\r\n            const { postsPerPage, currentPage, paginate } = this.props;\r\n            const indexOfLastPost = currentPage * postsPerPage;\r\n            const indexofFirstPost = indexOfLastPost - postsPerPage;\r\n            /* admin */\r\n            const vesselDeliveries = this.state.jobs\r\n              .sort((a, b) => {\r\n                return (\r\n                  new Date(b.jobBookingDateTime.toString()) -\r\n                  new Date(a.jobBookingDateTime.toString())\r\n                );\r\n              })\r\n              .map((job, index) => {\r\n                const { vessel, user, jobTrackers } = job;\r\n                const jobTracker = jobTrackers.sort((a, b) => {\r\n                  return b.index - a.index;\r\n                })[0];\r\n\r\n                let statusString = jobTracker.title;\r\n                let statusStyle = { color: \"red\" };\r\n                if (job.isCancelled === \"Confirmed\") {\r\n                  statusString = \"Job Cancelled\";\r\n                } else if (job.isCancelled === \"Pending\") {\r\n                  statusString = \"Cancel Requested\";\r\n                } else if (job.isCancelled === \"Denied\") {\r\n                  statusString = \"Cancellation Denied\";\r\n                } else {\r\n                  statusStyle = {};\r\n                }\r\n                let vesselName = \"\";\r\n                let vesselIMOID = \"\";\r\n                if (vessel === null) {\r\n                  vesselName = \"\";\r\n                  vesselIMOID = \"\";\r\n                } else {\r\n                  vesselName = vessel.vesselName;\r\n                  vesselIMOID = vessel.vesselIMOID;\r\n                }\r\n\r\n                return (\r\n                  <tr\r\n                    key={index}\r\n                    className=\"job-summary-table-row\"\r\n                    onClick={e =>\r\n                      this.props.history.push(`/job_details?job=${job.index}`)\r\n                    }\r\n                  >\r\n                    {this.props.auth.userType === \"Admin\" ? (\r\n                      <td data-title=\"Company\">{user.companyName}</td>\r\n                    ) : (\r\n                      \"\"\r\n                    )}\r\n                    <td data-title=\"Job Number\">{job.jobId}</td>\r\n                    <td data-title=\"Vessel IMO\">{vesselIMOID}</td>\r\n                    <td data-title=\"Vessel Name\">{vesselName}</td>\r\n                    <td data-title=\"Status\" style={statusStyle}>\r\n                      {statusString}\r\n                    </td>\r\n                  </tr>\r\n                );\r\n              });\r\n\r\n            return (\r\n              <div className=\"job-summary-table-padding\">\r\n                {this.props.auth.userType === \"Admin\" ? (\r\n                  <Table\r\n                    bordered\r\n                    hover\r\n                    striped\r\n                    responsive\r\n                    className=\"responsive-table\"\r\n                  >\r\n                    <thead>\r\n                      <tr>\r\n                        {this.props.auth.user.userType === \"Admin\" ? (\r\n                          <th>Company</th>\r\n                        ) : (\r\n                          \"\"\r\n                        )}\r\n                        <th>Job Number</th>\r\n                        <th>Vessel IMO</th>\r\n                        <th>Vessel Name</th>\r\n                        <th>Status</th>\r\n                      </tr>\r\n                    </thead>\r\n                    <tbody>{vesselDeliveries}</tbody>\r\n                  </Table>\r\n                ) : (\r\n                  <div>\r\n                    <MediaQuery minWidth={768}>\r\n                      {/* webview table */}\r\n                      <JobSummaryTableSearchBar\r\n                        exportTable={this.exportTable}\r\n                        reload={this.reload}\r\n                        logisticCompany={this.state.logisticCompany}\r\n                        activeFilter={this.state.activeFilter}\r\n                        pendingJobFilter={this.pendingJobFilter.bind(this)}\r\n                        ongoingJobFilter={this.ongoingJobFilter.bind(this)}\r\n                        cancelledJobFilter={this.cancelledJobFilter.bind(this)}\r\n                        closedJobFilter={this.closedJobFilter.bind(this)}\r\n                        check={postsPerPage}\r\n                        data={\r\n                          postsPerPage\r\n                            ? this.state.data.slice(\r\n                                indexofFirstPost,\r\n                                indexOfLastPost\r\n                              )\r\n                            : this.state.data\r\n                        }\r\n                        showSharingModal={this.state.showSharingModal}\r\n                        toggleSharingModal={showSharingModal => {\r\n                          this.setState({ showSharingModal });\r\n                        }}\r\n                        jobClicked={jobClicked => {\r\n                          this.setState({ jobClicked });\r\n                        }}\r\n                        handleRowClick={this.handleRowClick}\r\n                        saveJobArchive={this.saveJobArchive}\r\n                        allowArchive={this.props.allowArchive}\r\n                        button={this.props.button}\r\n                      />\r\n                      {this.state.jobClicked ? (\r\n                        <div>\r\n                          <JobShareModal\r\n                            show={this.state.showSharingModal}\r\n                            joblinkurl={`localhost:3000/job_invitations/${this.state.jobClicked.index}`}\r\n                            Close={this.handleShareModalClose}\r\n                            job={this.state.jobClicked}\r\n                            copied={this.handleCopy}\r\n                          />\r\n\r\n                          <Snackbar\r\n                            anchorOrigin={{\r\n                              horizontal: \"left\",\r\n                              vertical: \"bottom\"\r\n                            }}\r\n                            open={this.state.copied}\r\n                            message={\r\n                              <span id=\"message-id\">Link Has Been Copied</span>\r\n                            }\r\n                            action={\r\n                              <IconButton\r\n                                key=\"close\"\r\n                                color=\"inherit\"\r\n                                onClick={this.handleCopiedClose}\r\n                              >\r\n                                <CloseIcon />\r\n                              </IconButton>\r\n                            }\r\n                            TransitionComponent={this.SlideTransition}\r\n                          />\r\n                        </div>\r\n                      ) : (\r\n                        \"\"\r\n                      )}\r\n                    </MediaQuery>\r\n                    <MediaQuery maxWidth={767}>\r\n                      {/* mobileview table */}\r\n                      <JobSummaryTableDisplayMobile\r\n                        data={\r\n                          postsPerPage\r\n                            ? this.state.data.slice(\r\n                                indexofFirstPost,\r\n                                indexOfLastPost\r\n                              )\r\n                            : this.state.data\r\n                        }\r\n                        showSharingModal={this.state.showSharingModal}\r\n                        toggleSharingModal={showSharingModal => {\r\n                          this.setState({ showSharingModal });\r\n                        }}\r\n                        jobClicked={jobClicked => {\r\n                          this.setState({ jobClicked });\r\n                        }}\r\n                        handleRowClick={this.handleRowClick}\r\n                        saveJobArchive={this.saveJobArchive}\r\n                        allowArchive={this.props.allowArchive}\r\n                        button={this.props.button}\r\n                        title={this.props.title}\r\n                      />\r\n                      {this.state.jobClicked ? (\r\n                        <div>\r\n                          {\r\n                            <JobShareSlide\r\n                              open={this.state.showSharingModal}\r\n                              onClose={this.handleShareModalClose}\r\n                              joblinkurl={`localhost:3000/job_invitations/${this.state.jobClicked.index}`}\r\n                              job={this.state.jobClicked}\r\n                              inputSelected={this.state.inputSelected}\r\n                              handleSelect={this.handleSelect}\r\n                            />\r\n                          }\r\n                        </div>\r\n                      ) : (\r\n                        \"\"\r\n                      )}\r\n                    </MediaQuery>\r\n\r\n                    <Snackbar\r\n                      anchorOrigin={{\r\n                        horizontal: \"left\",\r\n                        vertical: \"bottom\"\r\n                      }}\r\n                      open={this.state.archived}\r\n                      message={\r\n                        <span id=\"message-id\">Item has been Archived</span>\r\n                      }\r\n                      action={\r\n                        <IconButton\r\n                          key=\"close\"\r\n                          color=\"inherit\"\r\n                          onClick={this.handleArchiveClose}\r\n                        >\r\n                          <CloseIcon />\r\n                        </IconButton>\r\n                      }\r\n                      TransitionComponent={this.SlideTransition}\r\n                    />\r\n                  </div>\r\n                )}\r\n                <br />\r\n                {postsPerPage ? (\r\n                  <Pagination\r\n                    postsPerPage={postsPerPage}\r\n                    totalPosts={this.state.data.length}\r\n                    paginate={paginate}\r\n                    currentPage={currentPage}\r\n                  />\r\n                ) : null}\r\n              </div>\r\n            );\r\n        }\r\n    }\r\n  }\r\n}\r\n\r\nconst mapStateToProps = ({ auth }) => {\r\n  return { auth };\r\n};\r\n\r\nexport default withRouter(connect(mapStateToProps)(JobSummaryTable));\r\n","import React from \"react\";\r\nimport { Route, Redirect } from \"react-router-dom\";\r\nimport { connect } from \"react-redux\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nconst VIP = ({ component: Component, auth, ...rest }) => (\r\n  <Route\r\n    {...rest}\r\n    render={props =>\r\n      auth.isAuthenticated === true ? (\r\n        <Component {...props} />\r\n      ) : (\r\n        <Redirect to=\"/login\" />\r\n      )\r\n    }\r\n  />\r\n);\r\n\r\nVIP.propTypes = {\r\n  auth: PropTypes.object.isRequired\r\n};\r\n\r\nconst mapStateToProps = state => ({\r\n  auth: state.auth\r\n});\r\n\r\nexport default connect(mapStateToProps)(VIP);\r\n","import React, { Component } from \"react\";\r\nimport { withRouter } from \"react-router-dom\";\r\n\r\nimport { Nav, Navbar, Image } from \"react-bootstrap\";\r\n\r\nimport \"./ExNavbar.css\";\r\nclass ExNavbar extends Component {\r\n  render() {\r\n    return (\r\n      <Navbar expand=\"lg\" className=\"nav-bar\">\r\n        <Navbar.Brand\r\n          href=\"#\"\r\n          onClick={e => {\r\n            e.preventDefault();\r\n            this.props.history.push(\"/\");\r\n          }}\r\n        >\r\n          <Image className=\"logo\" src=\"../../../images/logo.jpg\" />\r\n        </Navbar.Brand>\r\n        <Nav className=\"ml-auto\">\r\n          <Nav.Item>\r\n            <form className=\"form-inline mt-2 mt-md-0\">\r\n              <button\r\n                onClick={e => {\r\n                  e.preventDefault();\r\n                  this.props.history.push(\"/login\");\r\n                }}\r\n                className=\"btn btn-outline-success my-2 my-sm-0 font\"\r\n                type=\"button\"\r\n              >\r\n                SIGN IN\r\n              </button>\r\n            </form>\r\n          </Nav.Item>\r\n        </Nav>\r\n      </Navbar>\r\n    );\r\n  }\r\n}\r\n\r\nexport default withRouter(ExNavbar);\r\n","import React from \"react\";\r\n\r\nimport Container from \"react-bootstrap/Container\";\r\nimport Col from \"react-bootstrap/Col\";\r\nimport Row from \"react-bootstrap/Row\";\r\nimport Nav from \"react-bootstrap/Nav\";\r\n\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport {\r\n  faWhatsapp,\r\n  faFacebook,\r\n  faInstagram,\r\n  faLinkedin,\r\n  faTelegram\r\n} from \"@fortawesome/free-brands-svg-icons\";\r\n\r\nimport MediaQuery from \"react-responsive\";\r\n\r\nimport \"./Footer.css\";\r\nexport default function Footer() {\r\n  return (\r\n    <div id=\"footer-div\">\r\n      <div className=\"section-footer\">\r\n        <Container>\r\n          <Row className=\"nav-btm\">\r\n            <Col xs={6} md={{ span: 3, offset: 0 }}>\r\n              <Nav defaultActiveKey=\"#home\" className=\"flex-column\">\r\n                <Nav.Link className=\"disabled title-footer\">Company</Nav.Link>\r\n                <Nav.Link\r\n                  href=\"https://www.shipsuppliesdirect.com/\"\r\n                  target=\"_blank\"\r\n                >\r\n                  About Ship Supplies Direct\r\n                </Nav.Link>\r\n                <Nav.Link href=\"https://medium.com/@shipsuppliesdirect\">\r\n                  Blog\r\n                </Nav.Link>\r\n                <Nav.Link href=\"/\">Press</Nav.Link>\r\n              </Nav>\r\n            </Col>\r\n            {/*<Col xs={6} md={{ span: 3, offset: 0 }}>*/}\r\n            {/*    <Nav defaultActiveKey=\"#home\" className=\"flex-column\">*/}\r\n            {/*        <Nav.Link className='disabled title-footer'>SimpFleet</Nav.Link>*/}\r\n            {/*        <Nav.Link href=\"/\" target=\"_blank\">FAQ</Nav.Link>*/}\r\n            {/*        <Nav.Link href=\"/\" target=\"_blank\">Career</Nav.Link>*/}\r\n            {/*    </Nav>*/}\r\n            {/*</Col>*/}\r\n          </Row>\r\n          <Row>\r\n            <hr className=\"line-footer\" />\r\n          </Row>\r\n          <MediaQuery query=\"(min-width: 426px)\">\r\n            <Row className=\"font-large\">\r\n              <Col>\r\n                <h6 className=\"h6-footer\">2019 Ship Supplies Direct</h6>\r\n              </Col>\r\n              <Col\r\n                md={{ span: 3, offset: 0 }}\r\n                className=\"d-flex justify-content-end align-items-start\"\r\n              >\r\n                <a\r\n                  href=\"https://api.whatsapp.com/send?phone=6587480467\"\r\n                  target=\"_blank\"\r\n                  className=\"sicon\"\r\n                >\r\n                  <FontAwesomeIcon\r\n                    icon={faWhatsapp}\r\n                    color=\"white\"\r\n                    className=\"highlight\"\r\n                  />\r\n                </a>\r\n                <a\r\n                  href=\"https://www.facebook.com/SimpFleet-2427717804140333/\"\r\n                  target=\"_blank\"\r\n                  className=\"sicon\"\r\n                >\r\n                  <FontAwesomeIcon\r\n                    icon={faFacebook}\r\n                    color=\"white\"\r\n                    className=\"highlight\"\r\n                  />\r\n                </a>\r\n                <a\r\n                  href=\"https://www.instagram.com/shipsuppliesdirect/\"\r\n                  target=\"_blank\"\r\n                  className=\"sicon\"\r\n                >\r\n                  <FontAwesomeIcon\r\n                    icon={faInstagram}\r\n                    color=\"white\"\r\n                    className=\"highlight\"\r\n                  />\r\n                </a>\r\n                {/*<a href='#home' target='_blank' className='sicon'><FontAwesomeIcon icon={faWeixin} color=\"white\" className='highlight'/></a>*/}\r\n                <a\r\n                  href=\"https://www.linkedin.com/company/ship-supplies-direct/\"\r\n                  target=\"_blank\"\r\n                  className=\"sicon\"\r\n                >\r\n                  <FontAwesomeIcon\r\n                    icon={faLinkedin}\r\n                    color=\"white\"\r\n                    className=\"highlight\"\r\n                  />\r\n                </a>\r\n                <a\r\n                  href=\"https://telegram.me/ShipSuppliesDirect\"\r\n                  target=\"_blank\"\r\n                  className=\"sicon\"\r\n                >\r\n                  <FontAwesomeIcon\r\n                    icon={faTelegram}\r\n                    color=\"white\"\r\n                    className=\"highlight\"\r\n                  />\r\n                </a>\r\n              </Col>\r\n            </Row>\r\n          </MediaQuery>\r\n          <MediaQuery query=\"(max-width: 425px)\">\r\n            <Row className=\"font-large\">\r\n              <Col className=\"d-flex justify-content-center align-items-start\">\r\n                <h6 className=\"h6-footer\">2019 Ship Supplies Direct</h6>\r\n              </Col>\r\n            </Row>\r\n            <Row className=\"font-large\">\r\n              <Col className=\"d-flex justify-content-center align-items-start\">\r\n                <a\r\n                  href=\"https://api.whatsapp.com/send?phone=6587480467\"\r\n                  target=\"_blank\"\r\n                  className=\"sicon\"\r\n                >\r\n                  <FontAwesomeIcon\r\n                    icon={faWhatsapp}\r\n                    color=\"white\"\r\n                    className=\"highlight\"\r\n                  />\r\n                </a>\r\n                <a\r\n                  href=\"https://www.facebook.com/SimpFleet-2427717804140333/\"\r\n                  target=\"_blank\"\r\n                  className=\"sicon\"\r\n                >\r\n                  <FontAwesomeIcon\r\n                    icon={faFacebook}\r\n                    color=\"white\"\r\n                    className=\"highlight\"\r\n                  />\r\n                </a>\r\n                <a\r\n                  href=\"https://www.instagram.com/shipsuppliesdirect/\"\r\n                  target=\"_blank\"\r\n                  className=\"sicon\"\r\n                >\r\n                  <FontAwesomeIcon\r\n                    icon={faInstagram}\r\n                    color=\"white\"\r\n                    className=\"highlight\"\r\n                  />\r\n                </a>\r\n                {/*<a href='#home' target='_blank' className='sicon'><FontAwesomeIcon icon={faWeixin} color=\"white\" className='highlight' /></a>*/}\r\n                <a\r\n                  href=\"https://www.linkedin.com/company/ship-supplies-direct/\"\r\n                  target=\"_blank\"\r\n                  className=\"sicon\"\r\n                >\r\n                  <FontAwesomeIcon\r\n                    icon={faLinkedin}\r\n                    color=\"white\"\r\n                    className=\"highlight\"\r\n                  />\r\n                </a>\r\n                <a\r\n                  href=\"https://telegram.me/ShipSuppliesDirect\"\r\n                  target=\"_blank\"\r\n                  className=\"sicon\"\r\n                >\r\n                  <FontAwesomeIcon\r\n                    icon={faTelegram}\r\n                    color=\"white\"\r\n                    className=\"highlight\"\r\n                  />\r\n                </a>\r\n              </Col>\r\n            </Row>\r\n          </MediaQuery>\r\n        </Container>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import React, { Component } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport { connect } from \"react-redux\";\r\nimport { loginUser } from \"../../actions/authAction\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport { NavLink, Redirect } from \"react-router-dom\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport { Grid, Paper, TextField } from \"@material-ui/core\";\r\nimport FormControlLabel from \"@material-ui/core/FormControlLabel\";\r\nimport Checkbox from \"@material-ui/core/Checkbox\";\r\nimport { Container, Row, Col, Form } from \"reactstrap\";\r\nimport { createMuiTheme } from \"@material-ui/core/styles\";\r\nimport { ThemeProvider } from \"@material-ui/styles\";\r\nimport \"./Login.css\";\r\nclass Login extends Component {\r\n  constructor() {\r\n    super();\r\n    this.state = {\r\n      email: \"\",\r\n      password: \"\",\r\n      rememberMe: false,\r\n      errors: {}\r\n    };\r\n\r\n    this.onChange = this.onChange.bind(this);\r\n    this.onSubmit = this.onSubmit.bind(this);\r\n  }\r\n\r\n  componentDidMount() {\r\n    if (this.props.auth.isAuthenticated) {\r\n      this.props.history.push(\"/dashboard\");\r\n      if (\r\n        localStorage.getItem(\"checked\") &&\r\n        localStorage.getItem(\"checked\") !== \"\"\r\n      ) {\r\n        this.setState({\r\n          email: localStorage.getItem(\"email\"),\r\n          password: localStorage.getItem(\"password\"),\r\n          rememberMe: true\r\n        });\r\n      }\r\n    }\r\n  }\r\n\r\n  componentWillReceiveProps(nextProps) {\r\n    if (nextProps.auth.isAuthenticated) {\r\n      this.props.history.push(\"/dashboard\");\r\n    }\r\n\r\n    if (nextProps.errors) {\r\n      this.setState({ errors: nextProps.errors });\r\n    }\r\n  }\r\n\r\n  onSubmit(e) {\r\n    e.preventDefault();\r\n\r\n    const userData = {\r\n      email: this.state.email,\r\n      password: this.state.password\r\n    };\r\n    if (this.state.rememberMe) {\r\n      localStorage.setItem(\"checked\", \"checked\");\r\n      localStorage.setItem(\"email\", this.state.email);\r\n      localStorage.setItem(\"password\", this.state.password);\r\n    } else {\r\n      localStorage.setItem(\"checked\", \"\");\r\n    }\r\n    this.props.loginUser(userData);\r\n  }\r\n\r\n  onChange(e) {\r\n    this.setState({ [e.target.name]: e.target.value });\r\n  }\r\n  onChecked = e => {\r\n    this.setState({ rememberMe: e.target.checked });\r\n  };\r\n  renderContent = () => {\r\n    const { errors } = this.state;\r\n    switch (this.props.auth.isAuthenticated) {\r\n      case false:\r\n        return (\r\n          <Container fluid className=\"signin-background\">\r\n            <Row>\r\n              <Col xs=\"12\" md={{ size: 10, offset: 1 }}>\r\n                <Row>\r\n                  <Col md={{ size: 4, offset: 4 }}>\r\n                    <Paper className=\"signin-top\">\r\n                      <Form onSubmit={this.onSubmit}>\r\n                        <Grid container spacing={0}>\r\n                          <Grid item xs={12}>\r\n                            <h2 className=\"text-center signin-title\">Log In</h2>\r\n                          </Grid>\r\n                          <Grid item xs={12}>\r\n                            <TextField\r\n                              name=\"email\"\r\n                              type=\"email\"\r\n                              value={this.state.email}\r\n                              onChange={this.onChange}\r\n                              variant=\"outlined\"\r\n                              fullWidth\r\n                              id=\"email-login\"\r\n                              label=\"Email Address\"\r\n                              autoComplete=\"email\"\r\n                              autoFocus\r\n                            />\r\n                            <Typography\r\n                              variant=\"caption\"\r\n                              display=\"block\"\r\n                              style={{ color: \"red\" }}\r\n                            >\r\n                              {errors.email}\r\n                            </Typography>\r\n                            <TextField\r\n                              variant=\"outlined\"\r\n                              margin=\"normal\"\r\n                              name=\"password\"\r\n                              type=\"password\"\r\n                              value={this.state.password}\r\n                              onChange={this.onChange}\r\n                              fullWidth\r\n                              label=\"Password\"\r\n                              id=\"password\"\r\n                              autoComplete=\"current-password\"\r\n                              helperText=\"\"\r\n                            />\r\n                            <Typography\r\n                              variant=\"caption\"\r\n                              display=\"block\"\r\n                              style={{ color: \"red\" }}\r\n                            >\r\n                              {errors.password}\r\n                            </Typography>\r\n                          </Grid>\r\n                          <Grid item>\r\n                            <FormControlLabel\r\n                              control={\r\n                                <Checkbox\r\n                                  onChange={this.onChecked}\r\n                                  checked={this.state.rememberMe}\r\n                                  color=\"primary\"\r\n                                />\r\n                              }\r\n                              label=\"Remember me\"\r\n                            />\r\n                          </Grid>\r\n                          <Grid item xs={12}>\r\n                            <Button\r\n                              type=\"submit\"\r\n                              fullWidth\r\n                              variant=\"contained\"\r\n                              color=\"primary\"\r\n                              className=\"button-text\"\r\n                            >\r\n                              Sign In\r\n                            </Button>\r\n                          </Grid>\r\n                          <Grid item xs={12}>\r\n                            <p className=\"text-center signin-forget\">\r\n                              <NavLink to=\"/password_reset\" className=\"link\">\r\n                                Forgot Password?\r\n                              </NavLink>\r\n                            </p>\r\n                          </Grid>\r\n                        </Grid>\r\n                      </Form>\r\n                    </Paper>\r\n                  </Col>\r\n                </Row>\r\n              </Col>\r\n            </Row>\r\n          </Container>\r\n        );\r\n      case null:\r\n        return <Redirect to=\"/\" />;\r\n    }\r\n  };\r\n  render() {\r\n    const theme = createMuiTheme({\r\n      palette: {\r\n        primary: {\r\n          main: \"#49AE4B\"\r\n        }\r\n      }\r\n    });\r\n\r\n    return (\r\n      <ThemeProvider theme={theme}>\r\n        <div>{this.renderContent()}</div>\r\n      </ThemeProvider>\r\n    );\r\n  }\r\n}\r\n\r\nLogin.propTypes = {\r\n  loginUser: PropTypes.func.isRequired,\r\n  auth: PropTypes.object.isRequired,\r\n  errors: PropTypes.object.isRequired\r\n};\r\n\r\nconst mapStateToProps = state => ({\r\n  auth: state.auth,\r\n  errors: state.errors\r\n});\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  { loginUser }\r\n)(Login);\r\n","import React, { Component } from \"react\";\r\nimport { Col, Container, Row } from \"reactstrap\";\r\n\r\nimport JobSummaryTable from \"../Job/JobSummaryTable\";\r\n\r\nclass AdminDashboard extends Component {\r\n  constructor() {\r\n    super();\r\n    this.state = {\r\n      searchText: \"\",\r\n      currentPage: 1,\r\n      postPerPage: 50\r\n    };\r\n    this.paginate = this.paginate.bind(this);\r\n  }\r\n\r\n  paginate(pageNumber) {\r\n    this.setState({ currentPage: pageNumber });\r\n  }\r\n  render() {\r\n    return (\r\n      <Container fluid>\r\n        <Row>\r\n          <Col md=\"12\">\r\n            <JobSummaryTable\r\n              postsPerPage={this.state.postPerPage}\r\n              paginate={this.paginate}\r\n              currentPage={this.state.currentPage}\r\n            />\r\n          </Col>\r\n        </Row>\r\n      </Container>\r\n    );\r\n  }\r\n}\r\n\r\nexport default AdminDashboard;\r\n","import React, { Component } from \"react\";\r\nimport { Col, Container, Row } from \"reactstrap\";\r\n\r\nimport JobSummaryTable from \"../Job/JobSummaryTable\";\r\nimport SidebarMenu from \"../../SidebarMenu/SidebarMenu\";\r\nimport MediaQuery from \"react-responsive\";\r\n\r\nclass ConsumerDashboard extends Component {\r\n  render() {\r\n    return (\r\n      <Container fluid>\r\n        <MediaQuery minWidth={769}>\r\n          <Row>\r\n            <Col xs=\"2\">\r\n              <SidebarMenu />\r\n            </Col>\r\n            <Col xs=\"10\">\r\n              <Row>\r\n                <Col xs=\"12\" style={{ padding: \"0 40px\" }}>\r\n                  <h3 className=\"job-summary-header\">Dashboard</h3>\r\n                  <JobSummaryTable\r\n                    user_only={true}\r\n                    allowArchive={true}\r\n                    button={true}\r\n                    non_archive_only={true}\r\n                  />\r\n                </Col>\r\n              </Row>\r\n            </Col>\r\n          </Row>\r\n        </MediaQuery>\r\n        <MediaQuery maxWidth={768}>\r\n          <Row>\r\n            <Col xs=\"12\" style={{ padding: \"20px 10px\" }}>\r\n              {/*<h3 className='job-summary-header'>Dashboard</h3>*/}\r\n              <JobSummaryTable\r\n                user_only={true}\r\n                allowArchive={true}\r\n                button={true}\r\n                non_archive_only={true}\r\n                title=\"Dashboard\"\r\n              />\r\n            </Col>\r\n          </Row>\r\n        </MediaQuery>\r\n      </Container>\r\n    );\r\n  }\r\n}\r\nexport default ConsumerDashboard;\r\n","import React, { Component } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { Redirect } from \"react-router-dom\";\r\n\r\nimport AdminDashboard from \"./Admin/AdminDashboard\";\r\nimport ConsumerDashboard from \"./Consumer/ConsumerDashboard\";\r\n\r\nclass Dashboard extends Component {\r\n  render() {\r\n    switch (this.props.auth) {\r\n      case null:\r\n        return <div></div>;\r\n      case false:\r\n        return <Redirect to=\"/\" />;\r\n      default:\r\n        switch (this.props.auth.user.userType) {\r\n          case \"Admin\":\r\n            return <AdminDashboard />;\r\n          default:\r\n            return <ConsumerDashboard />;\r\n        }\r\n    }\r\n  }\r\n}\r\n\r\nconst mapStateToProps = ({ auth }) => {\r\n  return { auth };\r\n};\r\n\r\nexport default connect(mapStateToProps)(Dashboard);\r\n","import React, { Component } from \"react\";\r\nimport { Col, Container, Row } from \"reactstrap\";\r\n\r\nimport JobSummaryTable from \"../../Dashboard/Job/JobSummaryTable\";\r\nimport SidebarMenu from \"../../SidebarMenu/SidebarMenu\";\r\nimport MediaQuery from \"react-responsive\";\r\n\r\nclass UserHistory extends Component {\r\n  render() {\r\n    return (\r\n      <Container fluid>\r\n        <MediaQuery minWidth={769}>\r\n          <Row>\r\n            <Col xs=\"2\">\r\n              <SidebarMenu />\r\n            </Col>\r\n            <Col xs=\"10\">\r\n              <Row>\r\n                <Col xs=\"12\" style={{ padding: \"0 40px\" }}>\r\n                  <h3 className=\"job-summary-header\">History</h3>\r\n                  <JobSummaryTable\r\n                    user_only={true}\r\n                    button={false}\r\n                    archive_only={true}\r\n                    allowArchive={false}\r\n                  />\r\n                </Col>\r\n              </Row>\r\n            </Col>\r\n          </Row>\r\n        </MediaQuery>\r\n        <MediaQuery maxWidth={768}>\r\n          <Row>\r\n            <Col xs=\"12\" style={{ padding: \"20px 10px\" }}>\r\n              {/*<h3 className='job-summary-header'>History</h3>*/}\r\n              <JobSummaryTable\r\n                user_only={true}\r\n                button={false}\r\n                archive_only={true}\r\n                allowArchive={false}\r\n                title=\"History\"\r\n              />\r\n            </Col>\r\n          </Row>\r\n        </MediaQuery>\r\n      </Container>\r\n    );\r\n  }\r\n}\r\n\r\nexport default UserHistory;\r\n","import React, { Component } from \"react\";\r\nimport { Col, Container, Row } from \"reactstrap\";\r\n\r\nimport JobSummaryTable from \"../../Dashboard/Job/JobSummaryTable\";\r\n\r\nclass AdminHistory extends Component {\r\n  render() {\r\n    return (\r\n      <Container fluid style={{ marginTop: \"-50px\" }}>\r\n        <br />\r\n        <h1 className=\"text-center\">History</h1>\r\n        <Row>\r\n          <Col xs=\"12\" md={{ size: 10, offset: 1 }}>\r\n            <JobSummaryTable user_only={false} />\r\n          </Col>\r\n        </Row>\r\n      </Container>\r\n    );\r\n  }\r\n}\r\nexport default AdminHistory;\r\n","import React, { Component } from \"react\";\r\nimport { Redirect } from \"react-router-dom\";\r\nimport { connect } from \"react-redux\";\r\n\r\nimport UserHistory from \"./User/UserHistory\";\r\nimport AdminHistory from \"./Admin/AdminHistory\";\r\n\r\nclass History extends Component {\r\n  render() {\r\n    switch (this.props.auth) {\r\n      case null:\r\n        return <div></div>;\r\n      case false:\r\n        return <Redirect to=\"/\" />;\r\n      default:\r\n        switch (this.props.auth.user.userType) {\r\n          case \"Admin\":\r\n            return <AdminHistory />;\r\n          default:\r\n            return <UserHistory />;\r\n        }\r\n    }\r\n  }\r\n}\r\n\r\nconst mapStateToProps = ({ auth }) => {\r\n  return { auth };\r\n};\r\nexport default connect(mapStateToProps)(History);\r\n","import React, { Component } from \"react\";\r\nimport { Input, Table, Button, Container, Row, Col } from \"reactstrap\";\r\nimport axios from \"axios\";\r\n\r\nclass JobAssignment extends Component {\r\n  state = {\r\n    jobAssignments: null,\r\n    logisticsCompanies: null\r\n  };\r\n\r\n  componentDidMount() {\r\n    axios\r\n      .get(\"/api/job_assignments\")\r\n      .then(res => {\r\n        this.setState({\r\n          jobAssignments: res.data.reverse()\r\n        });\r\n      })\r\n      .catch(err => {\r\n        console.log(err);\r\n      });\r\n\r\n    axios\r\n      .get(\"/api/logistics_companies\")\r\n      .then(res => {\r\n        this.setState({\r\n          logisticsCompanies: res.data\r\n        });\r\n      })\r\n      .catch(err => {\r\n        console.log(err);\r\n      });\r\n  }\r\n\r\n  saveJobAssignments = () => {\r\n    console.log(this.state.jobAssignments);\r\n    axios\r\n      .put(\"/api/job_assignments\", {\r\n        jobAssignments: this.state.jobAssignments\r\n      })\r\n      .then(res => {\r\n        window.location.reload();\r\n      })\r\n      .catch(err => {\r\n        console.log(err);\r\n      });\r\n  };\r\n\r\n  renderLogisticsCompanies = jobAssignment => {\r\n    const defaultValue = \"Please Select\";\r\n    return (\r\n      <Input\r\n        type=\"select\"\r\n        value={\r\n          jobAssignment.logisticsCompany !== undefined\r\n            ? jobAssignment.logisticsCompany.name\r\n            : defaultValue\r\n        }\r\n        onChange={e => {\r\n          const jobAssignments = this.state.jobAssignments;\r\n          for (let i = 0; i < jobAssignments.length; i++) {\r\n            const jobAssignmentObj = jobAssignments[i];\r\n            if (jobAssignmentObj._id === jobAssignment._id) {\r\n              const logisticsCompanies = this.state.logisticsCompanies;\r\n              for (let j = 0; j < logisticsCompanies.length; j++) {\r\n                const logisticsCompanyObj = logisticsCompanies[j];\r\n                if (logisticsCompanyObj.name === e.target.value) {\r\n                  jobAssignmentObj.logisticsCompany = logisticsCompanyObj;\r\n                  break;\r\n                }\r\n              }\r\n              break;\r\n            }\r\n          }\r\n          this.setState({ jobAssignments });\r\n        }}\r\n      >\r\n        <option>{defaultValue}</option>\r\n        {this.state.logisticsCompanies.map((logisticsCompany, index) => {\r\n          return <option key={index}>{logisticsCompany.name}</option>;\r\n        })}\r\n      </Input>\r\n    );\r\n  };\r\n\r\n  render() {\r\n    switch (this.state.jobAssignments) {\r\n      case null:\r\n        return <div></div>;\r\n      default:\r\n        switch (this.state.logisticsCompanies) {\r\n          case null:\r\n            return <div></div>;\r\n          default:\r\n            const jobAssignments = this.state.jobAssignments.map(\r\n              (jobAssignment, index) => {\r\n                const { job } = jobAssignment;\r\n                const { user, vessel } = job;\r\n                const { userCompany } = user;\r\n                return (\r\n                  <tr key={index}>\r\n                    <td>{index + 1}</td>\r\n                    <td>{job.index}</td>\r\n                    <td>{userCompany.name}</td>\r\n                    <td>{job.jobId}</td>\r\n                    <td>{vessel !== null ? vessel.vesselName : \"\"}</td>\r\n                    <td>{this.renderLogisticsCompanies(jobAssignment)}</td>\r\n                  </tr>\r\n                );\r\n              }\r\n            );\r\n\r\n            return (\r\n              <Container fluid>\r\n                <br />\r\n                <Row>\r\n                  <Col xs=\"12\" className=\"text-center\">\r\n                    <Button\r\n                      type=\"button\"\r\n                      onClick={e => this.saveJobAssignments()}\r\n                    >\r\n                      Save Changes\r\n                    </Button>\r\n                  </Col>\r\n                </Row>\r\n                <br />\r\n\r\n                <Table striped hover bordered responsive>\r\n                  <tr>\r\n                    <th>No.</th>\r\n                    <th>Job ID</th>\r\n                    <th>Company</th>\r\n                    <th>Job Number</th>\r\n                    <th>Vessel</th>\r\n                    <th>Assignment</th>\r\n                  </tr>\r\n                  {jobAssignments}\r\n                </Table>\r\n              </Container>\r\n            );\r\n        }\r\n    }\r\n  }\r\n}\r\n\r\nexport default JobAssignment;\r\n","import \"./SideMenuSlider.css\";\r\nimport React, { Component } from \"react\";\r\n\r\nimport CreateJobModal from \"../Job/CreateJobModal\";\r\nimport Divider from \"@material-ui/core/Divider\";\r\nimport Grid from \"@material-ui/core/Grid\";\r\nimport Fab from \"@material-ui/core/Fab\";\r\nimport { push as Menu } from \"react-burger-menu\";\r\nimport { NavLink, withRouter } from \"react-router-dom\";\r\nimport MediaQuery from \"react-responsive\";\r\nimport { connect } from \"react-redux\";\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport AddIcon from \"@material-ui/icons/Add\";\r\n\r\nclass SideMenuSlider extends Component {\r\n  state = {\r\n    showHistory: false,\r\n    showModal: false\r\n  };\r\n\r\n  handleOpenModal = () => {\r\n    this.setState({ showModal: true });\r\n  };\r\n\r\n  handleCloseModal = () => {\r\n    this.setState({ showModal: false });\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <MediaQuery maxWidth={768}>\r\n        <Menu\r\n          pageWrapId={\"page-wrap\"}\r\n          outerContainerId={\"outer-container\"}\r\n          customBurgerIcon={false}\r\n          isOpen={this.props.open}\r\n          onStateChange={state => this.props.handleMenuStateChange(state)}\r\n          customCrossIcon={false}\r\n          className=\"menu-width\"\r\n        >\r\n          <Grid container spacing={3}>\r\n            <Grid item xs={12} className=\"d-flex align-items-center\">\r\n              <IconButton\r\n                className=\"closeButtonMenu ml-auto\"\r\n                onClick={this.props.handleCloseMenu}\r\n              >\r\n                <CloseIcon className=\"closeIconMenu\" />\r\n              </IconButton>\r\n            </Grid>\r\n            <Grid item xs={12} className=\"d-flex justify-content-center\">\r\n              <Fab\r\n                variant=\"extended\"\r\n                size=\"large\"\r\n                className=\"side-bar-create-job-button\"\r\n                onClick={this.handleOpenModal}\r\n              >\r\n                <AddIcon style={{ marginRight: \"5px\" }} fontSize=\"small\" />\r\n                Create job\r\n              </Fab>\r\n            </Grid>\r\n            <Grid item xs={12}>\r\n              <NavLink\r\n                to=\"/\"\r\n                className=\"sidebar-link\"\r\n                onClick={this.props.handleCloseMenu}\r\n              >\r\n                Home\r\n              </NavLink>\r\n            </Grid>\r\n            <Grid item xs={12}>\r\n              <NavLink\r\n                to=\"/dashboard\"\r\n                className=\"sidebar-link\"\r\n                onClick={this.props.handleCloseMenu}\r\n              >\r\n                Dashboard\r\n              </NavLink>\r\n            </Grid>\r\n            <Grid item xs={12}>\r\n              {/* {this.state.showHistory ? ( */}\r\n              <NavLink\r\n                to=\"/history\"\r\n                className=\"sidebar-link\"\r\n                onClick={this.props.handleCloseMenu}\r\n              >\r\n                History\r\n              </NavLink>\r\n              {/* ) : (\r\n                \"\"\r\n              )} */}\r\n            </Grid>\r\n            <Grid\r\n              item\r\n              xs={12}\r\n              className=\"d-flex align-items-center justify-content-center\"\r\n            >\r\n              <Divider style={{ width: \"85%\" }} />\r\n            </Grid>\r\n            <Grid item xs={12}>\r\n              <NavLink\r\n                to=\"/\"\r\n                className=\"sidebar-secondary-link\"\r\n                onClick={this.props.handleCloseMenu}\r\n              >\r\n                FAQ\r\n              </NavLink>\r\n            </Grid>\r\n            <Grid item xs={12}>\r\n              <NavLink\r\n                to=\"/\"\r\n                className=\"sidebar-secondary-link\"\r\n                onClick={this.props.handleCloseMenu}\r\n              >\r\n                Setting\r\n              </NavLink>\r\n            </Grid>\r\n            <Grid item xs={12}>\r\n              <NavLink\r\n                to=\"/\"\r\n                className=\"sidebar-secondary-link\"\r\n                onClick={this.onLogoutClick}\r\n              >\r\n                Logout\r\n              </NavLink>\r\n            </Grid>\r\n          </Grid>\r\n        </Menu>\r\n        <CreateJobModal\r\n          isOpen={this.state.showModal}\r\n          fullScreen={true}\r\n          handleCloseModal={this.handleCloseModal}\r\n          handlePopoverOpen={this.props.handlePopoverOpen}\r\n          handleCloseMenu={this.props.handleCloseMenu}\r\n        />\r\n      </MediaQuery>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = ({ auth }) => {\r\n  return { auth };\r\n};\r\n\r\nexport default withRouter(connect(mapStateToProps)(SideMenuSlider));\r\n","import React, {Component} from 'react';\r\nimport MenuItem from \"@material-ui/core/MenuItem\";\r\n\r\nimport './JobItemInput.css'\r\nimport InputGroup from \"react-bootstrap/InputGroup\";\r\nimport FormControl from \"react-bootstrap/FormControl\";\r\nimport Button from \"react-bootstrap/Button\";\r\nimport Container from 'react-bootstrap/Container';\r\nimport Row from 'react-bootstrap/Row';\r\nimport Col from 'react-bootstrap/Col';\r\nimport axios from \"axios\";\r\n\r\nfunction createUOMList(uom, quantity){\r\n    return {uom, quantity}\r\n}\r\n\r\nclass JobItemInput extends Component {\r\n    state = {\r\n        priceList: [],\r\n        UOMList:[],\r\n    };\r\n\r\n    componentDidMount() {\r\n        if(this.props.type === \"delivery\") {\r\n            axios.get(`/api/job_item_pricing`).then(res => {\r\n                const priceList = res.data;\r\n                const UOM = priceList.map(o => createUOMList(o.uom,0));\r\n                this.setState({priceList: priceList, UOMList:UOM});\r\n            }).catch(err => {\r\n                console.log(err);\r\n            });\r\n        } else {\r\n            axios.get(`/api/job_offland_item_pricing`).then(res => {\r\n                const priceList = res.data;\r\n                const UOM = priceList.map(o => createUOMList(o.uom,0));\r\n                this.setState({priceList: priceList, UOMList:UOM});\r\n            }).catch(err => {\r\n                console.log(err);\r\n            });\r\n        }\r\n    }\r\n\r\n    onQuantityUpdate = (value, newProduct) => {\r\n        value = Number(value);\r\n        if (value > 0) {\r\n            const products = this.props.jobItems;\r\n            const newProducts = [];\r\n            for (let i = 0; i < products.length; i++) {\r\n                let product = products[i];\r\n                if (product.id === newProduct.id) {\r\n                    newProducts.push({\r\n                        ...product,\r\n                        quantity: value\r\n                    });\r\n                } else {\r\n                    newProducts.push(product);\r\n                }\r\n            }\r\n            this.props.setItems(newProducts);\r\n        } else {\r\n            const index = this.props.jobItems.indexOf(newProduct);\r\n            this.props.jobItems.splice(index, 1);\r\n            this.props.setItems(this.props.jobItems);\r\n        }\r\n    };\r\n\r\n    handleAddEvent = (value, uom) => {\r\n        let itemPrice = this.state.priceList.filter(o => {\r\n            return o.uom === uom;\r\n        })[0];\r\n        const item = {\r\n            quantity: Number(value),\r\n            uom: uom,\r\n            id: (+new Date() + Math.floor(Math.random() * 999999)).toString(36),\r\n            job: null,\r\n            price: itemPrice.price,\r\n        };\r\n        const items = this.props.jobItems;\r\n        items.push(item);\r\n        this.props.setItems(this.props.jobItems);\r\n    };\r\n\r\n    render() {\r\n\r\n        let jobItems = this.props.jobItems;\r\n\r\n        const renderMenu = this.state.UOMList.map((item, index) => {\r\n            const jobItemsUOM = jobItems.reduce((a, jobItem) => {\r\n                a.push(jobItem.uom);\r\n                return a;\r\n            }, []);\r\n            if (!jobItemsUOM.includes(item.uom)) {\r\n                return (\r\n                    <MenuItem button={false} key={index}>\r\n                        <Row className='d-flex align-items-center'>\r\n                            <Col xs={2}>\r\n                                <h3 className='uom-label'>{item.uom}</h3>\r\n                            </Col>\r\n                            <Col xs={{span: 8, offset: 2}}>\r\n                                <InputGroup className=\"ml-auto\">\r\n                                    <InputGroup.Prepend>\r\n                                        <Button variant=\"outline-secondary\" className='uom-minus-btn'><img\r\n                                            src='/images/minus.png' alt='minus'/></Button>\r\n                                    </InputGroup.Prepend>\r\n                                    <FormControl\r\n                                        className='uom-input text-center'\r\n                                        min=\"0\" type='number' value={item.quantity}\r\n                                        onChange={()=>{}}\r\n                                        onKeyPress={e => {\r\n                                            if (e.key === 'Backspace' && item.quantity === 0) {\r\n                                                e.preventDefault();\r\n                                                e.stopPropagation();\r\n                                            } else if (/\\d/.test(e.key)) {\r\n                                                e.preventDefault();\r\n                                                e.stopPropagation();\r\n                                                this.handleAddEvent(parseInt(e.key), item.uom);\r\n                                            }\r\n                                        }}\r\n                                    />\r\n                                    <InputGroup.Append>\r\n                                        <Button variant=\"outline-secondary\" className='uom-plus-btn'\r\n                                                onClick={e => {\r\n                                                    this.handleAddEvent(item.quantity, item.uom);\r\n                                                    const jobItemSelected = jobItems.filter(o => {\r\n                                                        return o.uom === item.uom;\r\n                                                    })[0];\r\n                                                    this.onQuantityUpdate(1, jobItemSelected)\r\n                                                }}>\r\n                                            <img src='/images/plus.png' alt='plus'/>\r\n                                        </Button>\r\n                                    </InputGroup.Append>\r\n                                </InputGroup>\r\n                            </Col>\r\n                        </Row>\r\n                    </MenuItem>\r\n                );\r\n            } else {\r\n                const jobItemSelected = jobItems.filter(o => {\r\n                    return o.uom === item.uom;\r\n                })[0];\r\n                return (\r\n\r\n                    <MenuItem button={false} key={index}>\r\n                        <Row className='d-flex align-items-center'>\r\n                            <Col xs={2}>\r\n                                <h3 className='uom-label'>{item.uom}</h3>\r\n                            </Col>\r\n                            <Col xs={{span: 8, offset: 2}}>\r\n                                <InputGroup className=\"ml-auto\">\r\n                                    <InputGroup.Prepend>\r\n                                        <Button variant=\"outline-secondary\" className='uom-minus-btn'\r\n                                                onClick={e => {\r\n                                                    this.onQuantityUpdate(parseInt(document.getElementById(`value${index}`).value) - 1, jobItemSelected)\r\n                                                }}><img src='/images/minus.png' alt='minus'/></Button>\r\n                                    </InputGroup.Prepend>\r\n                                    <FormControl\r\n                                        id={`value${index}`}\r\n                                        className='uom-input text-center'\r\n                                        min=\"0\" type='number' value={parseInt(jobItemSelected.quantity)}\r\n                                        onChange={(e) => {\r\n                                            this.onQuantityUpdate(parseInt(e.target.value), jobItemSelected);\r\n                                        }}\r\n                                        onKeyDown={e => {\r\n                                            if (e.keyCode === 8) {\r\n                                                if (jobItemSelected.quantity === 0) {\r\n                                                    e.preventDefault();\r\n                                                    e.stopPropagation();\r\n                                                } else if (jobItemSelected.quantity.toString().length === 1) {\r\n                                                    this.onQuantityUpdate(0, jobItemSelected)\r\n                                                }\r\n                                            }\r\n                                        }}\r\n                                    />\r\n                                    <InputGroup.Append>\r\n                                        <Button variant=\"outline-secondary\" className='uom-plus-btn'\r\n                                                onClick={e => {\r\n                                                    this.onQuantityUpdate(parseInt(document.getElementById(`value${index}`).value) + 1, jobItemSelected)\r\n                                                }}><img src='/images/plus.png' alt='plus'/></Button>\r\n                                    </InputGroup.Append>\r\n                                </InputGroup>\r\n                            </Col>\r\n                        </Row>\r\n                    </MenuItem>\r\n                )\r\n            }\r\n\r\n        });\r\n\r\n        return (\r\n            <Container className='popover-conatiner'>\r\n                {renderMenu}\r\n            </Container>\r\n        );\r\n    }\r\n}\r\n\r\nexport default JobItemInput;","import React, { Component } from \"react\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\nimport DialogContent from \"@material-ui/core/DialogContent\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\nimport DoneIcon from \"@material-ui/icons/Done\";\r\n\r\nimport Button from \"react-bootstrap/Button\";\r\nimport \"./AffirmationModal.css\";\r\n\r\nclass AffirmationModal extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      isMobile: false\r\n    };\r\n\r\n    this.updatePredicate = this.updatePredicate.bind(this);\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.updatePredicate();\r\n    window.addEventListener(\"resize\", this.updatePredicate);\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    window.removeEventListener(\"resize\", this.updatePredicate);\r\n  }\r\n\r\n  updatePredicate() {\r\n    this.setState({ isMobile: window.innerWidth < 426 });\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <Dialog\r\n        open={this.props.modal}\r\n        onClose={this.props.toggle}\r\n        maxWidth=\"xs\"\r\n        fullWidth={false}\r\n        // fullScreen={this.state.isMobile}\r\n      >\r\n        <DialogTitle className=\"dialog-top\">\r\n          <div className=\"d-flex align-items-center\">\r\n            <p className=\"info-modal-title\">{this.props.title}</p>\r\n            <IconButton\r\n              className=\"closeButton ml-auto\"\r\n              onClick={this.props.toggle}\r\n            >\r\n              <CloseIcon className=\"closeButton\" />\r\n            </IconButton>\r\n          </div>\r\n        </DialogTitle>\r\n        <DialogContent className=\"info-modal-content\">\r\n          <div className=\"info-modal-message text-center\">\r\n            {this.props.children}\r\n          </div>\r\n        </DialogContent>\r\n        <DialogActions className=\"info-modal-bottom\">\r\n          <div className=\"d-flex align-items-center justify-content-center w-100\">\r\n            <Button\r\n              variant=\"success\"\r\n              className=\"info-button\"\r\n              onClick={this.props.affirmativeAction}\r\n            >\r\n              <span>{this.props.affirmativeText}</span>\r\n            </Button>\r\n            <Button\r\n              variant=\"outline-success\"\r\n              className=\"info-button info-button-cancel\"\r\n              onClick={this.props.toggle}\r\n              style={{ marginLeft: \"15px\" }}\r\n            >\r\n              <span>{this.props.cancelText}</span>\r\n            </Button>\r\n          </div>\r\n        </DialogActions>\r\n      </Dialog>\r\n    );\r\n  }\r\n}\r\n\r\nexport default AffirmationModal;\r\n","import React, { Component } from \"react\";\r\nimport { Button, Modal, ModalBody, ModalFooter, ModalHeader } from \"reactstrap\";\r\n\r\nclass InformationModal extends Component {\r\n  render() {\r\n    return (\r\n      <Modal\r\n        isOpen={this.props.modal}\r\n        toggle={this.props.toggle}\r\n        onClosed={this.props.onClosed}\r\n      >\r\n        <ModalHeader toggle={this.props.toggle}>{this.props.title}</ModalHeader>\r\n        <ModalBody>{this.props.children}</ModalBody>\r\n        <ModalFooter>\r\n          <Button color=\"primary\" onClick={this.props.onClosed}>\r\n            Ok\r\n          </Button>\r\n        </ModalFooter>\r\n      </Modal>\r\n    );\r\n  }\r\n}\r\n\r\nexport default InformationModal;\r\n","import React, { Component } from \"react\";\r\nimport \"react-dates/initialize\";\r\nimport InputGroup from \"react-bootstrap/InputGroup\";\r\nimport FormControl from \"react-bootstrap/FormControl\";\r\nimport moment from \"moment\";\r\nimport { Button } from \"react-bootstrap\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport { faCalendarAlt } from \"@fortawesome/free-solid-svg-icons\";\r\nimport { DayPickerSingleDateController } from \"react-dates\";\r\nimport \"react-dates/lib/css/_datepicker.css\";\r\nimport isInclusivelyAfterDay from \"react-dates/src/utils/isInclusivelyAfterDay\";\r\n\r\nimport \"./DateInputComponent.css\";\r\n\r\nclass DateInputComponent extends Component {\r\n  state = {\r\n    focused: false\r\n  };\r\n\r\n  onClickOutside = () => {\r\n    // Force the focused states to always be truthy so that date is always selectable\r\n    window.setTimeout(() => {\r\n      this.setState({ focused: false });\r\n    }, 100);\r\n  };\r\n\r\n  toggleController = () => {\r\n    this.setState({ focused: !this.state.focused });\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <div>\r\n        <div style={{ marginBottom: 16 }}>\r\n          <InputGroup>\r\n            <FormControl\r\n              type=\"text\"\r\n              value={moment(this.props.DateTime).format(\"DD MMMM YYYY\")}\r\n              className=\"job-detail-section--date-input\"\r\n              disabled={this.props.disabled}\r\n              onChange={() => {}}\r\n            />\r\n            <InputGroup.Append>\r\n              <Button\r\n                variant=\"outline-success\"\r\n                onClick={this.toggleController}\r\n                className=\"calendar-button\"\r\n                disabled={this.props.disabled}\r\n              >\r\n                <FontAwesomeIcon icon={faCalendarAlt} color=\"white\" />\r\n              </Button>\r\n            </InputGroup.Append>\r\n          </InputGroup>\r\n        </div>\r\n        {this.state.focused ? (\r\n          <div style={{ zIndex: \"100\", position: \"absolute\" }}>\r\n            <DayPickerSingleDateController\r\n              date={moment(this.props.DateTime)}\r\n              onDateChange={this.props.handleDateChange}\r\n              onOutsideClick={this.onClickOutside}\r\n              numberOfMonths={1}\r\n              isOutsideRange={day => !isInclusivelyAfterDay(day, moment())}\r\n            />\r\n          </div>\r\n        ) : (\r\n          \"\"\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default DateInputComponent;\r\n","import React, {Component} from 'react';\r\nimport {FormGroup, Form, Input, Label} from \"reactstrap\";\r\nimport axios from 'axios';\r\nimport {withRouter} from \"react-router-dom\";\r\nimport moment from 'moment';\r\nimport {connect} from \"react-redux\";\r\n\r\nimport {Paper, Divider, Popover} from '@material-ui/core';\r\nimport {Container, Row, Col, Button} from 'react-bootstrap';\r\nimport FormControlLabel from \"@material-ui/core/FormControlLabel\";\r\nimport Checkbox from \"@material-ui/core/Checkbox\";\r\nimport FormRB from 'react-bootstrap/Form';\r\n\r\nimport 'react-dates/initialize';\r\nimport TimePicker from 'rc-time-picker';\r\nimport 'rc-time-picker/assets/index.css';\r\n\r\nimport \"react-datepicker/dist/react-datepicker.css\";\r\nimport JobItemInput from \"./Form/JobItemInput\";\r\nimport AffirmationModal from \"../../ui/Modal/AffirmationModal\";\r\nimport InformationModal from \"../../ui/Modal/InformationModal\";\r\nimport DateInputComponent from \"./Form/DateInputComponent\";\r\n\r\nclass JobDetailsCard extends Component {\r\n    state = {\r\n        job: this.props.job,\r\n        jobEdit: false,\r\n        showJobUpdateModal: false,\r\n        jobUpdatedModal: false,\r\n        currentCareOffParty: null,\r\n        jobPrevState: null,\r\n        showItemsDeliverList: false,\r\n        focusedVesselArriveDate: false,\r\n        ItemsDeliverAnchorEl: null,\r\n        ItemsOfflandAnchorEl: null,\r\n    };\r\n\r\n    componentDidMount() {\r\n        let currentCareOffParty = null;\r\n        const {careOffParties} = this.props.job;\r\n        for (let i = 0; i < careOffParties.length; i++) {\r\n            const careOffParty = careOffParties[i];\r\n            if (careOffParty.user === this.props.auth._id) {\r\n                currentCareOffParty = careOffParty;\r\n                this.setState({currentCareOffParty});\r\n                break;\r\n            }\r\n        }\r\n    }\r\n\r\n    handleVesselLoadingLocationChange = (e) => {\r\n        const job = this.state.job;\r\n        job.vesselLoadingLocation = e.target.value;\r\n        this.setState({job});\r\n    };\r\n\r\n    handleVesselArrivalDateChange = (vesselLoadingDateTime) => {\r\n        const job = this.state.job;\r\n        job.vesselArrivalDateTime = vesselLoadingDateTime.toISOString();\r\n        this.setState({job});\r\n    };\r\n\r\n    handleVesselArrivalTimeChange = (value) => {\r\n        const job = this.state.job;\r\n        job.vesselArrivalDateTime = value.toDate().toISOString();\r\n        this.setState({job});\r\n    };\r\n\r\n    handleVesselLighterLocationChange = (e) => {\r\n        const job = this.state.job;\r\n        job.vesselLighterLocation = e.target.value;\r\n        this.setState({job});\r\n    };\r\n\r\n    // handleVesselLighterTimeChange = (value) => {\r\n    //     const job = this.state.job;\r\n    //     job.vesselLighterDateTime = value.toDate().toISOString();\r\n    //     this.setState({job});\r\n    // };\r\n    //\r\n    // handleVesselLighterDateChange = (vesselLighterDateTime) => {\r\n    //     const job = this.state.job;\r\n    //     job.vesselLighterDateTime = vesselLighterDateTime.toISOString();\r\n    //     this.setState({job});\r\n    // };\r\n\r\n    handleVesselLighterNameChange = (e) => {\r\n        const job = this.state.job;\r\n        job.vesselLighterName = e.target.value;\r\n        this.setState({job});\r\n    };\r\n\r\n    handleVesselBerthingDateTimeChange = (psaBerthingDateTime) => {\r\n        const job = this.state.job;\r\n        job.psaBerthingDateTime = psaBerthingDateTime;\r\n        this.setState({job});\r\n    };\r\n\r\n    handleVesselUnberthingDateTimeChange = (psaUnberthingDateTime) => {\r\n        const job = this.state.job;\r\n        job.psaUnberthingDateTime = psaUnberthingDateTime;\r\n        this.setState({job});\r\n    };\r\n\r\n    handleVesselLoadingDateChange = (vesselLoadingDateTime) => {\r\n        const job = this.state.job;\r\n        job.vesselLoadingDateTime = vesselLoadingDateTime.toISOString();\r\n        this.setState({job});\r\n    };\r\n\r\n    handleVesselLoadingTimeChange = (value) => {\r\n        const job = this.state.job;\r\n        job.vesselLoadingDateTime = value.toDate().toISOString();\r\n        this.setState({job});\r\n    };\r\n\r\n    handleRemarksChange = (e) => {\r\n        const job = this.state.job;\r\n        job.remarks = e.target.value;\r\n        this.setState({job});\r\n    };\r\n\r\n    handleVesselLighterRemarksChange = (e) => {\r\n        const job = this.state.job;\r\n        job.vesselLighterRemarks = e.target.value;\r\n        this.setState({job});\r\n    };\r\n\r\n    onSubmit = (e) => {\r\n        e.preventDefault();\r\n        this.setState({showJobUpdateModal: true});\r\n    };\r\n\r\n    validateItems = (items) => {\r\n        // Check for empty item entries\r\n        const filteredItems = [];\r\n        for (let i = 0; i < items.length; i++) {\r\n            const item = items[i];\r\n            if (item.quantity !== '' && item.uom !== '') {\r\n                delete item['id'];\r\n                filteredItems.push(item);\r\n            }\r\n        }\r\n        return filteredItems;\r\n    };\r\n\r\n    saveJobDetails = (e) => {\r\n        // Check for empty item entries\r\n        const filteredItems = this.validateItems(this.state.job.jobItems);\r\n        const filteredOfflandingItems = this.validateItems(this.state.job.jobOfflandItems);\r\n\r\n\r\n        const now = new Date();\r\n\r\n        // Save to job\r\n        const job = this.state.job;\r\n        job.jobItems = filteredItems;\r\n        job.jobOfflandItems = filteredOfflandingItems;\r\n        job.careOffParties = this.state.job.careOffParties;\r\n\r\n        if (this.state.job.vesselLoadingLocation !== 'PSA' && (new Date(this.state.job.vesselLoadingDateTime) - now.setHours(now.getHours() + 2)) < 0) {\r\n            this.setState({\r\n                jobEdit: false,\r\n                job: this.state.jobPrevState\r\n            });\r\n            window.alert('Vessel Loading Time cannot be before now')\r\n        } else if (this.state.job.vesselLoadingDateTime === '') {\r\n            this.setState({\r\n                jobEdit: false,\r\n                job: this.state.jobPrevState\r\n            });\r\n            window.alert('Vessel Loading Date and Time must be filled');\r\n\r\n        } else if (this.state.currentCareOffParty !== null && this.validateItems(this.state.currentCareOffParty.jobItems).length < 1) {\r\n            this.setState({\r\n                jobEdit: false,\r\n                job: this.state.jobPrevState\r\n            })\r\n            window.alert('At least one item must be submitted for delivery!');\r\n        } else if (this.state.job.vesselArrivalDateTime === '') {\r\n            this.setState({\r\n                jobEdit: false,\r\n                job: this.state.jobPrevState\r\n            })\r\n            window.alert('Vessel ETA must be filled');\r\n        } else {\r\n            // Save job details\r\n            axios.put('/api/jobs', {\r\n                job,\r\n                sendEmailUpdate: true\r\n            }).then(res => {\r\n                if (this.state.currentCareOffParty !== null) {\r\n                    axios.put('/api/care_off', {\r\n                        careOffParty: this.state.currentCareOffParty\r\n                    }).then(res => {\r\n                        this.setState({jobUpdatedModal: true});\r\n                    }).catch(err => {\r\n                        console.log(err);\r\n                    });\r\n                } else {\r\n                    this.setState({jobUpdatedModal: true});\r\n                }\r\n            }).catch(err => {\r\n                console.log(err);\r\n            });\r\n        }\r\n    };\r\n\r\n    checkValidDate = (d) => {\r\n        const date = new Date(d);\r\n        return date.toString() !== \"Invalid Date\";\r\n    };\r\n\r\n    handleDeliverClose = () => {\r\n        this.setState({ItemsDeliverAnchorEl: null})\r\n    };\r\n\r\n    handleOfflandClose = () => {\r\n        this.setState({ItemsOfflandAnchorEl: null})\r\n    };\r\n\r\n    handleCreateDSAChange = (e) => {\r\n        const job = this.state.job;\r\n        job.createDSA = e.target.checked;\r\n        this.setState({job});\r\n    };\r\n\r\n    handleOtherVesselLocationChange = (e) => {\r\n        const job = this.state.job;\r\n        job.vesselLoadingLocation = e.target.value;\r\n        this.setState({job});\r\n    };\r\n\r\n    renderJobTimeDetails = () => {\r\n        let {\r\n            vesselLoadingLocation, vesselArrivalDateTime, vesselLoadingDateTime,\r\n            psaBerthingDateTime, psaUnberthingDateTime,\r\n        } = this.state.job;\r\n        const vesselLoadingTime = moment(vesselLoadingDateTime);\r\n        const vesselArrivalTime = moment(vesselArrivalDateTime);\r\n        const psaBerthingTime = moment(psaBerthingDateTime);\r\n        const psaUnberthingTime = moment(psaUnberthingDateTime);\r\n        switch (vesselLoadingLocation) {\r\n            case 'PSA':\r\n                return <div>\r\n                    <Row>\r\n                        <Col xs={12} sm={6}>\r\n                            <div className='d-flex align-items-center job-detail-section-heading'>\r\n                                <div className='job-detail-green-circle'><strong>2</strong></div>\r\n                                <h1 className='job-detail-section-header'>Time</h1>\r\n                            </div>\r\n                            <FormGroup>\r\n                                <Label className='job-detail-section-label'>Vessel Estimated Berthing Time\r\n                                </Label>\r\n                                <Container fluid style={{paddingRight: \"0px\", paddingLeft: '0px'}}>\r\n                                    <Row>\r\n                                        <Col xs={7}>\r\n                                            <DateInputComponent DateTime={psaBerthingDateTime}\r\n                                                                handleDateChange={() => {\r\n                                                                }}\r\n                                                                disabled={true}/>\r\n                                        </Col>\r\n                                        <Col xs={5}>\r\n                                            <TimePicker\r\n                                                showSecond={false}\r\n                                                defaultValue={psaBerthingTime}\r\n                                                value={psaBerthingTime}\r\n                                                onChange={() => {\r\n                                                }}\r\n                                                allowEmpty={false}\r\n                                                disabled={true}\r\n                                                className='job-detail-section-input'\r\n                                            />\r\n                                        </Col></Row></Container>\r\n                            </FormGroup>\r\n\r\n                            <FormGroup>\r\n                                <Label className='job-detail-section-label'>Vessel Estimated Unberthing Time</Label>\r\n                                <Container fluid style={{paddingRight: \"0px\", paddingLeft: '0px'}}>\r\n                                    <Row>\r\n                                        <Col xs={7}>\r\n                                            <DateInputComponent DateTime={psaUnberthingDateTime}\r\n                                                                handleDateChange={() => {\r\n                                                                }}\r\n                                                                disabled={true}/>\r\n                                        </Col>\r\n                                        <Col xs={5}>\r\n                                            <TimePicker\r\n                                                showSecond={false}\r\n                                                defaultValue={psaUnberthingTime}\r\n                                                value={psaUnberthingTime}\r\n                                                onChange={() => {\r\n                                                }}\r\n                                                allowEmpty={false}\r\n                                                disabled={true}\r\n                                                className='job-detail-section-input'\r\n                                            />\r\n                                        </Col></Row></Container>\r\n                            </FormGroup>\r\n                        </Col>\r\n                    </Row>\r\n                    <Divider className='job-detail-section-divider'/>\r\n                </div>;\r\n            default:\r\n                return (\r\n                    <div>\r\n                        <Row>\r\n                            <Col xs={12} sm={6}>\r\n                                <div className='d-flex align-items-center job-detail-section-heading'>\r\n                                    <div className='job-detail-green-circle'><strong>2</strong></div>\r\n                                    <h1 className='job-detail-section-header'>Time</h1>\r\n                                </div>\r\n                                {/*<FormGroup>*/}\r\n                                {/*    <Label className='job-detail-section-label'>Vessel Estimated Time Arrival*/}\r\n                                {/*        (ETA)</Label>*/}\r\n                                {/*    <Container fluid style={{paddingRight: \"0px\", paddingLeft: '0px'}}>*/}\r\n                                {/*        <Row>*/}\r\n                                {/*            <Col xs={7}>*/}\r\n                                {/*                <DateInputComponent DateTime={vesselArrivalDateTime}*/}\r\n                                {/*                                    handleDateChange={this.handleVesselArrivalDateChange}*/}\r\n                                {/*                                    disabled={!this.state.jobEdit}/>*/}\r\n                                {/*            </Col>*/}\r\n                                {/*            <Col xs={5}>*/}\r\n                                {/*                <TimePicker*/}\r\n                                {/*                    showSecond={false}*/}\r\n                                {/*                    defaultValue={vesselArrivalTime}*/}\r\n                                {/*                    value={vesselArrivalTime}*/}\r\n                                {/*                    onChange={this.handleVesselArrivalTimeChange}*/}\r\n                                {/*                    allowEmpty={false}*/}\r\n                                {/*                    disabled={!this.state.jobEdit}*/}\r\n                                {/*                    className='job-detail-section-input'*/}\r\n                                {/*                />*/}\r\n                                {/*            </Col></Row></Container>*/}\r\n                                {/*</FormGroup>*/}\r\n\r\n                                <FormGroup>\r\n                                    <Label className='job-detail-section-label'>{\r\n                                        this.state.vesselLoadingLocation === 'Jurong Port'\r\n                                            ? 'Lighter Loading Date & Time'\r\n                                            : 'Vessel Loading Date & Time'\r\n                                    }</Label>\r\n                                    <Container fluid style={{paddingRight: \"0px\", paddingLeft: '0px'}}>\r\n                                        <Row>\r\n                                            <Col xs={7}>\r\n                                                <DateInputComponent DateTime={vesselLoadingDateTime}\r\n                                                                    handleDateChange={this.handleVesselLoadingDateChange}\r\n                                                                    disabled={!this.state.jobEdit}/>\r\n                                            </Col>\r\n                                            <Col xs={5}>\r\n                                                <TimePicker\r\n                                                    showSecond={false}\r\n                                                    defaultValue={vesselLoadingTime}\r\n                                                    value={vesselLoadingTime}\r\n                                                    onChange={this.handleVesselLoadingTimeChange}\r\n                                                    allowEmpty={false}\r\n                                                    disabled={!this.state.jobEdit}\r\n                                                    className='job-detail-section-input'\r\n                                                />\r\n                                            </Col></Row></Container>\r\n                                </FormGroup>\r\n                            </Col>\r\n                        </Row>\r\n                        <Divider className='job-detail-section-divider'/>\r\n                    </div>);\r\n        }\r\n    };\r\n\r\n\r\n    render() {\r\n        let {\r\n            jobId, vessel, vesselLoadingLocation, vesselArrivalDateTime, vesselLoadingDateTime, remarks,\r\n            jobItems, jobOfflandItems, psaBerthingDateTime, psaUnberthingDateTime, createDSA,\r\n            vesselLighterName, vesselLighterDateTime, vesselLighterLocation, vesselLighterRemarks\r\n        } = this.state.job;\r\n        const otherVesselLocation = vesselLoadingLocation === 'PSA' || vesselLoadingLocation === 'Jurong Port' ? '' : vesselLoadingLocation;\r\n        vesselLoadingLocation = vesselLoadingLocation === 'PSA' || vesselLoadingLocation === 'Jurong Port' ? vesselLoadingLocation : 'Others';\r\n\r\n        const currentCareOffParty = this.state.currentCareOffParty;\r\n        if (currentCareOffParty !== null) {\r\n            jobItems = currentCareOffParty.jobItems;\r\n            jobOfflandItems = currentCareOffParty.jobOfflandItems;\r\n        }\r\n\r\n        for (let i = 0; i < jobItems.length; i++) {\r\n            const jobItem = jobItems[i];\r\n            jobItem.id = (+new Date() + Math.floor(Math.random() * 999999)).toString(36);\r\n        }\r\n\r\n        for (let i = 0; i < jobOfflandItems.length; i++) {\r\n            const jobOfflandItem = jobOfflandItems[i];\r\n            jobOfflandItem.id = (+new Date() + Math.floor(Math.random() * 999999)).toString(36);\r\n        }\r\n\r\n        const openDeliver = Boolean(this.state.ItemsDeliverAnchorEl);\r\n        let jobItemText = jobItems.reduce((a, item) => {\r\n            a.push(item.quantity.toString().concat(' '.concat(item.uom)));\r\n            return a;\r\n        }, []);\r\n\r\n        const openOffland = Boolean(this.state.ItemsOfflandAnchorEl);\r\n        let jobOfflandItemsText = jobOfflandItems.reduce((a, item) => {\r\n            a.push(item.quantity.toString().concat(' '.concat(item.uom)));\r\n            return a;\r\n        }, []);\r\n\r\n        const renderText = () => {\r\n            return (\r\n                <div className='d-flex flex-column'>\r\n                    <span className='job-detail-section-input-label' style={{marginBottom: '0px'}}><strong>I would like SimpFleet to produce DSA(JP LTs) or Entry/Export Permit(PSA) for me</strong></span>\r\n                    <span className='job-detail-section-label-helper-text'><i>It would cost extra fees if Simpfleet produces the DSA(JP LTs) or Entry/Export Permit(PSA)</i></span>\r\n                </div>);\r\n        };\r\n\r\n        return (\r\n            <div>\r\n                <Paper square={true} className='job-detail-paper' elevation={0}>\r\n                    <Form onSubmit={this.onSubmit}>\r\n                        <Container>\r\n                            <Row>\r\n                                <Col xs={12} sm={6}>\r\n                                    <div className='d-flex align-items-center job-detail-section-heading'>\r\n                                        <div className='job-detail-green-circle'><strong>1</strong></div>\r\n                                        <h1 className='job-detail-section-header'>Vessel Information</h1>\r\n                                    </div>\r\n\r\n                                    <FormGroup>\r\n                                        <Label className='job-detail-section-label'>Job Number</Label>\r\n                                        <Input type=\"text\" value={jobId} className='job-detail-section-input' disabled/>\r\n                                    </FormGroup>\r\n\r\n                                    <FormGroup>\r\n                                        <Label className='job-detail-section-label'>Vessel Loading Location</Label>\r\n                                        <Input type=\"select\" value={vesselLoadingLocation}\r\n                                               disabled\r\n                                               onChange={this.handleVesselLoadingLocationChange}\r\n                                               className='job-detail-section-input job-input-margin-btm '>\r\n                                            <option>PSA</option>\r\n                                            <option>Jurong Port</option>\r\n                                            <option>Others</option>\r\n                                        </Input>\r\n                                    </FormGroup>\r\n\r\n                                    {\r\n                                        vesselLoadingLocation === 'Others'\r\n                                            ? <FormGroup>\r\n                                                <Label className='job-create-section-label'>Address of Vessel Loading\r\n                                                    Location</Label>\r\n                                                <Input type=\"text\" value={otherVesselLocation}\r\n                                                       disabled={!this.state.jobEdit}\r\n                                                       onChange={this.handleOtherVesselLocationChange}\r\n                                                       className='job-create-section-input'\r\n                                                >\r\n                                                </Input>\r\n                                            </FormGroup>\r\n                                            : ''\r\n                                    }\r\n\r\n                                    {/*Lighter Implementation (Need Add Lighter Name and and Time and Location Model)*/}\r\n                                    {vesselLoadingLocation === 'Jurong Port'\r\n                                        ? <div>\r\n                                            <FormGroup style={{marginBottom: '0px'}}>\r\n                                                <Label className='job-detail-section-label'>Lighter Name\r\n                                                    (Optional)</Label>\r\n                                                <Input type=\"text\"\r\n                                                       onChange={this.handleVesselLighterNameChange}\r\n                                                       value={vesselLighterName}\r\n                                                       disabled={!this.state.jobEdit}\r\n                                                       className='job-detail-section-input'/>\r\n                                            </FormGroup>\r\n                                            {/*<FormGroup style={{marginBottom: '0px'}}>*/}\r\n                                            {/*    <Label className='job-detail-section-label'>Lighter ETA</Label>*/}\r\n                                            {/*    <Container fluid style={{paddingRight: \"0px\", paddingLeft: '0px'}}>*/}\r\n                                            {/*        <Row>*/}\r\n                                            {/*            <Col xs={7}>*/}\r\n                                            {/*                <DateInputComponent DateTime={vesselLighterDateTime}*/}\r\n                                            {/*                                    handleDateChange={this.handleVesselLighterDateChange}*/}\r\n                                            {/*                                    disabled={!this.state.jobEdit}/>*/}\r\n                                            {/*            </Col>*/}\r\n                                            {/*            <Col xs={5}>*/}\r\n                                            {/*                <TimePicker*/}\r\n                                            {/*                    showSecond={false}*/}\r\n                                            {/*                    value={vesselLighterTime}*/}\r\n                                            {/*                    onChange={this.handleVesselLighterTimeChange}*/}\r\n                                            {/*                    allowEmpty={false}*/}\r\n                                            {/*                    disabled={!this.state.jobEdit}*/}\r\n                                            {/*                    className='job-detail-section-input'*/}\r\n                                            {/*                />*/}\r\n                                            {/*            </Col></Row></Container>*/}\r\n                                            {/*</FormGroup>*/}\r\n                                            <FormGroup>\r\n                                                <Label className='job-detail-section-label'>Lighter Location</Label>\r\n                                                <Input type=\"select\" value={vesselLighterLocation}\r\n                                                       disabled={!this.state.jobEdit}\r\n                                                       onChange={this.handleVesselLighterLocationChange}\r\n                                                       className='job-detail-section-input job-input-margin-btm '>\r\n                                                    <option>Marina South Wharves</option>\r\n                                                    <option>Penjuru Terminal</option>\r\n                                                </Input>\r\n                                            </FormGroup>\r\n                                            <FormGroup>\r\n                                                <Label className='job-detail-section-label'>Lighter Contact Remarks\r\n                                                    (Optional)</Label>\r\n                                                <Input type=\"textarea\" value={vesselLighterRemarks} rows=\"3\"\r\n                                                       className='job-detail-section-input' style={{marginBottom: 0}}\r\n                                                       onChange={this.handleVesselLighterRemarksChange}\r\n                                                       disabled={!this.state.jobEdit}/>\r\n                                                <span className='job-detail-section-label-helper-text'><i>Please enter contact details for lighter here</i></span>\r\n                                            </FormGroup>\r\n                                        </div>\r\n                                        : ''\r\n                                    }\r\n\r\n\r\n                                    <FormGroup>\r\n                                        <Label className='job-detail-section-label'>Vessel IMO</Label>\r\n                                        <Input type=\"text\" className='job-detail-section-input'\r\n                                               value={vessel.vesselIMOID} disabled/>\r\n                                    </FormGroup>\r\n\r\n                                    <FormGroup>\r\n                                        <Label className='job-detail-section-label'>Vessel Callsign</Label>\r\n                                        <Input type=\"text\" className='job-detail-section-input'\r\n                                               value={vessel.vesselCallsign} disabled/>\r\n                                    </FormGroup>\r\n\r\n                                    <FormGroup>\r\n                                        <Label className='job-detail-section-label'>Vessel Name</Label>\r\n                                        <Input type=\"text\" className='job-detail-section-input'\r\n                                               value={vessel.vesselName} disabled/>\r\n                                    </FormGroup>\r\n                                </Col>\r\n                            </Row>\r\n                            <Divider className='job-detail-section-divider'/>\r\n                            {this.renderJobTimeDetails()}\r\n                            <Row>\r\n                                <Col xs={12} sm={6}>\r\n                                    <div className='d-flex align-items-center job-detail-section-heading'>\r\n                                        <div className='job-detail-green-circle'><strong>3</strong></div>\r\n                                        <h1 className='job-detail-section-header'>Delivery Details</h1>\r\n                                    </div>\r\n                                    <FormRB.Group>\r\n                                        <FormRB.Label className='job-detail-section-label'>Items to\r\n                                            Deliver</FormRB.Label>\r\n                                        <FormRB.Control as=\"input\"\r\n                                                        value={jobItemText.join(', ')}\r\n                                                        onClick={(e) => {\r\n                                                            this.setState({ItemsDeliverAnchorEl: e.currentTarget})\r\n                                                        }}\r\n                                                        disabled={!this.state.jobEdit}\r\n                                                        className='job-detail-section-input margin-bottom-zero'>\r\n                                        </FormRB.Control>\r\n                                        <span className='job-detail-section-label-helper-text'><i>Do let us know if you have refrigeration,fragile,etc items in the remarks</i></span>\r\n                                        <Popover\r\n                                            open={openDeliver}\r\n                                            anchorEl={this.state.ItemsDeliverAnchorEl}\r\n                                            onClose={this.handleDeliverClose}\r\n                                            anchorOrigin={{\r\n                                                vertical: 'bottom',\r\n                                                horizontal: 'left',\r\n                                            }}\r\n                                            transformOrigin={{\r\n                                                vertical: 'top',\r\n                                                horizontal: 'left',\r\n                                            }}\r\n                                        >\r\n                                            <JobItemInput jobItems={jobItems} setItems={(jobItems) => {\r\n                                                const job = this.state.job;\r\n                                                if (currentCareOffParty !== null) {\r\n                                                    currentCareOffParty.jobItems = jobItems;\r\n                                                } else {\r\n                                                    job.jobItems = jobItems;\r\n                                                }\r\n                                                this.setState({job});\r\n                                            }} disabled={!this.state.jobEdit}\r\n                                                          type={'delivery'}/>\r\n\r\n                                        </Popover>\r\n                                    </FormRB.Group>\r\n\r\n                                    <FormRB.Group>\r\n                                        <FormRB.Label className='job-detail-section-label'>Items to\r\n                                            Offland</FormRB.Label>\r\n                                        <FormRB.Control as=\"input\"\r\n                                                        value={jobOfflandItemsText.join(', ')}\r\n                                                        onClick={(e) => {\r\n                                                            this.setState({ItemsOfflandAnchorEl: e.currentTarget})\r\n                                                        }}\r\n                                                        disabled={!this.state.jobEdit}\r\n                                                        className='job-detail-section-input'>\r\n                                        </FormRB.Control>\r\n                                        <Popover\r\n                                            open={openOffland}\r\n                                            anchorEl={this.state.ItemsOfflandAnchorEl}\r\n                                            onClose={this.handleOfflandClose}\r\n                                            anchorOrigin={{\r\n                                                vertical: 'bottom',\r\n                                                horizontal: 'left',\r\n                                            }}\r\n                                            transformOrigin={{\r\n                                                vertical: 'top',\r\n                                                horizontal: 'left',\r\n                                            }}\r\n                                        >\r\n                                            <JobItemInput jobItems={jobOfflandItems}\r\n                                                          setItems={(jobOfflandItems) => {\r\n                                                              const job = this.state.job;\r\n                                                              if (currentCareOffParty !== null) {\r\n                                                                  currentCareOffParty.jobOfflandItems = jobOfflandItems;\r\n                                                              } else {\r\n                                                                  job.jobOfflandItems = jobOfflandItems;\r\n                                                              }\r\n                                                              this.setState({job});\r\n                                                          }} disabled={!this.state.jobEdit}/>\r\n\r\n                                        </Popover>\r\n                                    </FormRB.Group>\r\n\r\n                                    {/*<FormGroup>*/}\r\n                                    {/*    <Label><strong>Care-off Parties (If any)</strong></Label>*/}\r\n                                    {/*    <CareOffTableInput items={careOffParties} setItems={(careOffParties) => {*/}\r\n                                    {/*        const job = this.state.job;*/}\r\n                                    {/*        job.careOffParties = careOffParties;*/}\r\n                                    {/*        this.setState({job});*/}\r\n                                    {/*    }} disabled={!this.state.jobEdit} />*/}\r\n                                    {/*</FormGroup>*/}\r\n\r\n                                    <FormGroup>\r\n                                        <Label className='job-detail-section-label'>Remarks</Label>\r\n                                        <Input type=\"textarea\" value={remarks} rows=\"7\"\r\n                                               className='job-detail-section-input margin-bottom-zero'\r\n                                               onChange={this.handleRemarksChange} disabled={!this.state.jobEdit}/>\r\n                                        <span className='job-create-section-label-helper-text'><i>* Please let us know if you require any pick up and pick up location.</i></span>\r\n                                    </FormGroup>\r\n                                    {/*Implement help apply for DSA*/}\r\n                                    <FormControlLabel\r\n                                        value=\"dsa\"\r\n                                        control={<Checkbox color=\"default\" checked={createDSA}\r\n                                                           className='create-dsa-checkbox'/>}\r\n                                        label={renderText()}\r\n                                        onChange={this.handleCreateDSAChange}\r\n                                        disabled={!this.state.jobEdit}\r\n                                    />\r\n\r\n                                    {\r\n                                        this.state.jobEdit\r\n                                            ? <FormGroup className=\"text-center\">\r\n                                                <Button onClick={this.onSubmit}\r\n                                                        variant='success' className='job-details-save-button'>Save\r\n                                                    Changes</Button>\r\n                                                <Button onClick={(e) => this.setState({\r\n                                                    jobEdit: false,\r\n                                                    job: this.state.jobPrevState\r\n                                                })}\r\n                                                        variant='outline-success'\r\n                                                        className='job-details-cancel-button'>Cancel</Button>\r\n                                            </FormGroup>\r\n                                            : (this.state.job.jobTrackers.length > 1 && this.state.job.isCancelled !== \"Confirmed\") || this.props.auth.userType === \"Admin\"\r\n                                            ? <FormGroup className=\"text-center\">\r\n                                                <Button onClick={(e) =>\r\n                                                    this.setState({\r\n                                                        jobEdit: true,\r\n                                                        jobPrevState: JSON.parse(JSON.stringify(this.props.job))\r\n                                                    })}\r\n                                                        variant='success'\r\n                                                        className='job-details-update-button'>Edit</Button>\r\n                                            </FormGroup>\r\n                                            : \"\"\r\n                                    }\r\n                                </Col>\r\n                            </Row>\r\n                        </Container>\r\n                    </Form>\r\n                </Paper>\r\n\r\n                <InformationModal\r\n                    modal={this.state.jobUpdatedModal}\r\n                    toggle={(e) => this.setState({jobUpdatedModal: !this.state.jobUpdatedModal})}\r\n                    title=\"Job Changes saved.\"\r\n                    onClosed={(e) => this.setState({jobUpdatedModal: false})}\r\n                >\r\n                    <p>Your changes to the job details has been successfully saved.</p>\r\n                </InformationModal>\r\n\r\n                <AffirmationModal\r\n                    modal={this.state.showJobUpdateModal}\r\n                    toggle={(e) => this.setState({showJobUpdateModal: !this.state.showJobUpdateModal})}\r\n                    title=\"Save Changes?\"\r\n                    affirmativeAction={(e) => {\r\n                        this.setState({\r\n                            showJobUpdateModal: !this.state.showJobUpdateModal,\r\n                            jobEdit: !this.state.jobEdit\r\n                        });\r\n                        this.saveJobDetails();\r\n                    }}\r\n                    affirmativeText={'Yes'}\r\n                    cancelText={'No'}\r\n                >\r\n                    <p>Do you want to save changes? A notification will be sent to all parties involved.</p>\r\n                </AffirmationModal>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nconst mapStateToProps = ({auth}) => {\r\n    return {auth};\r\n};\r\n\r\nexport default withRouter(connect(mapStateToProps)(JobDetailsCard));","import React, { Component } from \"react\";\r\n\r\nclass FileDropzone extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.fileInputRef = React.createRef();\r\n  }\r\n\r\n  state = {\r\n    highlight: false\r\n  };\r\n\r\n  openFileDialog = () => {\r\n    if (this.props.disabled) return;\r\n    this.fileInputRef.current.click();\r\n  };\r\n\r\n  fileListToArray = list => {\r\n    const array = [];\r\n    for (let i = 0; i < list.length; i++) {\r\n      array.push(list.item(i));\r\n    }\r\n    return array;\r\n  };\r\n\r\n  onFilesAdded = evt => {\r\n    if (this.props.disabled) return;\r\n    const files = evt.target.files;\r\n    if (this.props.onFilesAdded) {\r\n      const array = this.fileListToArray(files);\r\n      this.props.onFilesAdded(array);\r\n    }\r\n  };\r\n\r\n  onDragOver = evt => {\r\n    evt.preventDefault();\r\n\r\n    if (this.props.disabled) return;\r\n    this.setState({ highlight: true });\r\n  };\r\n\r\n  onDragLeave = () => {\r\n    this.setState({ highlight: false });\r\n  };\r\n\r\n  onDrop = e => {\r\n    e.preventDefault();\r\n\r\n    if (this.props.disabled) return;\r\n\r\n    const files = e.dataTransfer.files;\r\n    if (this.props.onFilesAdded) {\r\n      const array = this.fileListToArray(files);\r\n      this.props.onFilesAdded(array);\r\n    }\r\n    this.setState({ highlight: false });\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <div\r\n        className={`job-file-upload-dropzone ${\r\n          this.state.highlight ? \"job-file-upload-highlight\" : \"\"\r\n        }`}\r\n        onDragOver={this.onDragOver}\r\n        onDragLeave={this.onDragLeave}\r\n        onDrop={this.onDrop}\r\n        onClick={this.openFileDialog}\r\n        style={{ cursor: this.props.disabled ? \"default\" : \"pointer\" }}\r\n      >\r\n        <img\r\n          alt=\"upload\"\r\n          className=\"job-file-upload-icon\"\r\n          src=\"./images/assets/job/baseline-cloud_upload-24px.svg\"\r\n        />\r\n        <input\r\n          ref={this.fileInputRef}\r\n          className=\"job-file-upload-fileInput\"\r\n          type=\"file\"\r\n          multiple\r\n          onChange={this.onFilesAdded}\r\n        />\r\n        <span style={{ color: \"#686868\" }}>\r\n          <strong>\r\n            Drop file here to attach or{\" \"}\r\n            <span style={{ textDecoration: \"underline\" }}>browse</span>\r\n          </strong>\r\n        </span>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default FileDropzone;\r\n","import React, { Component } from \"react\";\r\n\r\nimport FileDropzone from \"./FileDropzone\";\r\nimport { FaFileDownload } from \"react-icons/fa\";\r\nimport ButtonGroup from \"@material-ui/core/ButtonGroup\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport EditIcon from \"@material-ui/core/SvgIcon/SvgIcon\";\r\n\r\nclass FileUpload extends Component {\r\n  state = {\r\n    uploading: false,\r\n    hover: false\r\n  };\r\n\r\n  handleOnMouseEnter = () => {\r\n    this.setState({ hover: true });\r\n  };\r\n\r\n  handleOnMouseOut = () => {\r\n    this.setState({ hover: false });\r\n  };\r\n\r\n  renderUploadDisplay = () => {\r\n    return (\r\n      <div\r\n        className=\"job-file-upload-files-upload-section\"\r\n        style={{ marginBottom: 10 }}\r\n      >\r\n        <div className=\"job-file-upload-files-content\">\r\n          {this.props.file === null ? (\r\n            <FileDropzone\r\n              onFilesAdded={this.props.onFilesAdded}\r\n              disabled={false}\r\n            />\r\n          ) : (\r\n            <div\r\n              onMouseEnter={this.handleOnMouseEnter}\r\n              onMouseLeave={this.handleOnMouseOut}\r\n              style={{ width: \"20%\" }}\r\n            >\r\n              <div\r\n                className=\"d-flex flex-column align-items-center file-icon-background justify-content-center\"\r\n                style={{ height: \"140px\", padding: 8 }}\r\n              >\r\n                <FaFileDownload className=\"job-details-file-icon\" />\r\n                <p className=\"text-center\">{this.props.file.name}</p>\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  render() {\r\n    return <div>{this.renderUploadDisplay()}</div>;\r\n  }\r\n}\r\n\r\nexport default FileUpload;\r\n","import React, { Component } from \"react\";\r\nimport { FaFileDownload } from \"react-icons/fa\";\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\nimport EditIcon from \"@material-ui/icons/Edit\";\r\nimport ButtonGroup from \"@material-ui/core/ButtonGroup\";\r\nimport Button from \"@material-ui/core/Button\";\r\n\r\nclass FileDisplay extends Component {\r\n  state = {\r\n    hover: false,\r\n    edit: false\r\n  };\r\n\r\n  handleOnMouseEnter = () => {\r\n    this.setState({ hover: true });\r\n  };\r\n\r\n  handleOnMouseOut = () => {\r\n    this.setState({ hover: false });\r\n  };\r\n\r\n  handleEdit = () => {\r\n    this.setState({ edit: true });\r\n  };\r\n\r\n  onKeyDown = e => {\r\n    if (e.keyCode === 13) {\r\n      this.setState({ edit: false });\r\n    }\r\n  };\r\n\r\n  render() {\r\n    const { jobFile } = this.props;\r\n\r\n    return (\r\n      <div\r\n        onMouseEnter={this.handleOnMouseEnter}\r\n        onMouseLeave={this.handleOnMouseOut}\r\n        style={{ width: \"20%\" }}\r\n      >\r\n        {!this.state.hover ? (\r\n          <div className=\"d-flex flex-column align-items-center file-icon-background justify-content-center\">\r\n            <a href={jobFile.fileURL}>\r\n              <FaFileDownload className=\"job-details-file-icon\" />\r\n            </a>\r\n            {this.state.edit ? (\r\n              <input\r\n                onChange={e => this.props.handleDocumentTitleChange(e, jobFile)}\r\n                onKeyDown={this.onKeyDown}\r\n              />\r\n            ) : (\r\n              <p>{jobFile.filename}</p>\r\n            )}\r\n          </div>\r\n        ) : (\r\n          <div className=\"d-flex flex-column align-items-center file-icon-background\">\r\n            <a href={jobFile.fileURL}>\r\n              <FaFileDownload className=\"job-details-file-icon\" />\r\n            </a>\r\n            {this.state.edit ? (\r\n              <input\r\n                onChange={e => this.props.handleDocumentTitleChange(e, jobFile)}\r\n                onKeyDown={this.onKeyDown}\r\n              />\r\n            ) : (\r\n              <p>{jobFile.filename}</p>\r\n            )}\r\n            <ButtonGroup>\r\n              <Button onClick={this.handleEdit} style={{ border: \"none\" }}>\r\n                <EditIcon />\r\n              </Button>\r\n              <Button\r\n                onClick={() => this.props.handleSingleDelete(jobFile)}\r\n                style={{ border: \"none\" }}\r\n              >\r\n                <CloseIcon />\r\n              </Button>\r\n            </ButtonGroup>\r\n          </div>\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default FileDisplay;\r\n","import React, {Component} from 'react';\r\nimport axios from 'axios';\r\n\r\nimport Radio from '@material-ui/core/Radio';\r\nimport RadioButtonUncheckedIcon from '@material-ui/icons/RadioButtonUnchecked';\r\nimport RadioButtonCheckedIcon from '@material-ui/icons/RadioButtonChecked';\r\nimport RadioGroup from '@material-ui/core/RadioGroup';\r\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport FormLabel from '@material-ui/core/FormLabel';\r\n\r\nimport Form from 'react-bootstrap/Form';\r\nimport Button from 'react-bootstrap/Button'\r\nimport FileUpload from \"./FileUpload\";\r\nimport FileDisplay from \"./FileDisplay\";\r\n\r\nimport './FileUploadSection.css';\r\nimport Col from \"react-bootstrap/Col\";\r\nimport {withRouter} from \"react-router-dom\";\r\nimport {connect} from \"react-redux\";\r\nimport {FormText} from \"reactstrap\";\r\n\r\nclass FileUploadSection extends Component {\r\n\r\n    state = {\r\n        requirements: {needPrintCopy: 'yes', signAndReturn: 'yes'},\r\n        remarks: '',\r\n        filename: '',\r\n        numCopies: 1,\r\n        documentType: 'Choose from Computer',\r\n        file: null,\r\n    };\r\n\r\n    componentDidMount() {\r\n        const jobFile = this.props.jobFile;\r\n        const req = this.state.requirements;\r\n        if (this.retrieveRequirement(this.props.jobFile, 'needPrintCopy').check) {\r\n            req.needPrintCopy = \"yes\";\r\n        } else {\r\n            req.needPrintCopy = \"no\";\r\n        }\r\n        if (this.retrieveRequirement(this.props.jobFile, 'signAndReturn').check) {\r\n            req.signAndReturn = \"yes\";\r\n        } else {\r\n            req.signAndReturn = \"no\";\r\n        }\r\n        this.setState({\r\n            remarks: jobFile.remarks,\r\n            filename: jobFile.filename,\r\n            numCopies: jobFile.numCopies,\r\n            requirements: req,\r\n        });\r\n\r\n    }\r\n\r\n    retrieveRequirement = (jobFile, key) => {\r\n        const {requirements} = jobFile;\r\n        for (let i = 0; i < requirements.length; i++) {\r\n            const requirement = requirements[i];\r\n            if (requirement.key === key) {\r\n                return requirement;\r\n            }\r\n        }\r\n\r\n        const fullRequirements = this.loadRequirements();\r\n        for (let i = 0; i < fullRequirements.length; i++) {\r\n            const requirement = fullRequirements[i];\r\n            if (requirement.key === key) {\r\n                const jobFileRequirements = jobFile.requirements;\r\n                jobFileRequirements.push(requirement);\r\n                jobFile.requirements = jobFileRequirements;\r\n                return requirement;\r\n            }\r\n        }\r\n    };\r\n\r\n    updateRequirement = (jobFile, key, boolean) => {\r\n        const newRequirements = [];\r\n        for (let i = 0; i < jobFile.requirements.length; i++) {\r\n            const requirement = jobFile.requirements[i];\r\n            if (requirement.key === key) {\r\n                requirement.check = boolean;\r\n            }\r\n            newRequirements.push(requirement);\r\n        }\r\n        jobFile.requirements = newRequirements;\r\n    };\r\n\r\n    handlePrintCopyChange = (e) => {\r\n        this.setState({\r\n            requirements: {\r\n                needPrintCopy: e.target.value,\r\n                signAndReturn: this.state.requirements.signAndReturn\r\n            }\r\n        });\r\n    };\r\n\r\n    handleSignAndReturnChange = (e) => {\r\n        this.setState({\r\n            requirements: {\r\n                needPrintCopy: this.state.requirements.needPrintCopy,\r\n                signAndReturn: e.target.value\r\n            }\r\n        });\r\n    };\r\n\r\n    handleDocumentTitleChange = (e, jobFile) => {\r\n        jobFile.filename = e.target.value;\r\n        this.setState({filename: e.target.value});\r\n    };\r\n\r\n    handleUploadType = (e) => {\r\n        this.setState({documentType: e.target.value});\r\n    };\r\n\r\n    handleNumberOfCopiesChange = (e) => {\r\n        this.setState({numCopies: e.target.value});\r\n    };\r\n\r\n    handleRemarksChange = (e) => {\r\n        this.setState({remarks: e.target.value});\r\n    };\r\n\r\n    handleAddDocument = () => {\r\n        if(this.state.requirements.needPrintCopy === 'yes'){\r\n            const jobFile = this.props.jobFile;\r\n            jobFile.filename = this.state.filename;\r\n\r\n            if (this.state.requirements.needPrintCopy === 'yes') {\r\n                this.updateRequirement(jobFile, \"needPrintCopy\", true);\r\n            } else {\r\n                this.updateRequirement(jobFile, \"needPrintCopy\", false);\r\n            }\r\n\r\n            if (this.state.requirements.signAndReturn === 'yes') {\r\n                this.updateRequirement(jobFile, \"signAndReturn\", true);\r\n            } else {\r\n                this.updateRequirement(jobFile, \"signAndReturn\", false);\r\n            }\r\n\r\n            if (this.state.remarks === '') {\r\n                jobFile.remarks = 'NIL'\r\n            } else {\r\n                jobFile.remarks = this.state.remarks\r\n            }\r\n\r\n            jobFile.numCopies = this.state.numCopies;\r\n\r\n            const formData = new FormData();\r\n            formData.append(\"file\", this.state.file);\r\n            formData.append(\"jobFile\", JSON.stringify(jobFile));\r\n            formData.append(\"jobID\", this.props.job._id);\r\n            axios.post('/api/job_files/upload_document', formData, {\r\n                headers: {\r\n                    'Content-Type': 'multipart/form-data'\r\n                }\r\n            }).catch((err) => {\r\n                console.log(err);\r\n            }).finally(() => {\r\n                window.location.reload();\r\n            });\r\n        } else{\r\n\r\n            if (this.state.filename === '') {\r\n                alert(\"Document name cannot be empty\");\r\n                return;\r\n            }\r\n\r\n            const jobFile = this.props.jobFile;\r\n            jobFile.filename = this.state.filename;\r\n\r\n            if (this.state.requirements.needPrintCopy === 'yes') {\r\n                this.updateRequirement(jobFile, \"needPrintCopy\", true);\r\n            } else {\r\n                this.updateRequirement(jobFile, \"needPrintCopy\", false);\r\n            }\r\n\r\n            if (this.state.requirements.signAndReturn === 'yes') {\r\n                this.updateRequirement(jobFile, \"signAndReturn\", true);\r\n            } else {\r\n                this.updateRequirement(jobFile, \"signAndReturn\", false);\r\n            }\r\n\r\n            if (this.state.remarks === '') {\r\n                jobFile.remarks = 'NIL'\r\n            } else {\r\n                jobFile.remarks = this.state.remarks\r\n            }\r\n\r\n            jobFile.numCopies = this.state.numCopies;\r\n\r\n            axios.post('/api/job_files/',{\r\n                ...jobFile,\r\n                jobID:this.props.job._id,\r\n            }).catch((err) => {\r\n                console.log(err);\r\n            }).finally(() => {\r\n                window.location.reload();\r\n            });\r\n\r\n        }\r\n    };\r\n\r\n    handleEditDocument = () => {\r\n        if (this.state.filename === '') {\r\n            alert(\"File name cannot be empty\");\r\n            return;\r\n        }\r\n\r\n        const jobFile = this.props.jobFile;\r\n        jobFile.filename = this.state.filename;\r\n\r\n        if (this.state.requirements.needPrintCopy === 'yes') {\r\n            this.updateRequirement(jobFile, \"needPrintCopy\", true);\r\n        } else {\r\n            this.updateRequirement(jobFile, \"needPrintCopy\", false);\r\n        }\r\n\r\n        if (this.state.requirements.signAndReturn === 'yes') {\r\n            this.updateRequirement(jobFile, \"signAndReturn\", true);\r\n        } else {\r\n            this.updateRequirement(jobFile, \"signAndReturn\", false);\r\n        }\r\n\r\n        if (this.state.remarks === '') {\r\n            jobFile.remarks = 'NIL'\r\n        } else {\r\n            jobFile.remarks = this.state.remarks\r\n        }\r\n\r\n        jobFile.numCopies = this.state.numCopies;\r\n\r\n        this.props.successClose();\r\n    };\r\n\r\n    renderUpload() {\r\n        if (this.props.jobFile.fileURL !== \"\") {\r\n            return (\r\n                <FileDisplay jobFile={this.props.jobFile} handleSingleDelete={this.props.handleSingleDelete}\r\n                             handleDocumentTitleChange={this.handleDocumentTitleChange}/>\r\n            );\r\n        } else {\r\n            switch (this.state.documentType) {\r\n                case \"Choose from Computer\":\r\n                    return (<FileUpload\r\n                        job={this.props.job}\r\n                        onFilesAdded={(files) => {\r\n                            this.setState({file: files[0]});\r\n                        }}\r\n                        file={this.state.file}\r\n                    />);\r\n                default:\r\n                    return '';\r\n            }\r\n        }\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <Form>\r\n                <FormControl>\r\n                    <FormLabel className='job-file-upload-label'>Do you want us to print copy/copies and bring it to the\r\n                        vessel?</FormLabel>\r\n                    <RadioGroup\r\n                        value={this.state.requirements.needPrintCopy}\r\n                        onChange={this.handlePrintCopyChange}\r\n                        row\r\n                    >\r\n                        <FormControlLabel value=\"yes\" control={<Radio color=\"default\" icon={<RadioButtonUncheckedIcon\r\n                            fontSize=\"small\"/>} checkedIcon={<RadioButtonCheckedIcon fontSize=\"small\"\r\n                                                                                     className='green-radio'/>}/>}\r\n                                          label=\"Yes\"/>\r\n                        <FormControlLabel value=\"no\" control={<Radio color=\"default\"\r\n                                                                     icon={<RadioButtonUncheckedIcon fontSize=\"small\"/>}\r\n                                                                     checkedIcon={<RadioButtonCheckedIcon\r\n                                                                         fontSize=\"small\" className='green-radio'/>}/>}\r\n                                          label=\"No\"/>\r\n                    </RadioGroup>\r\n                </FormControl>\r\n                <br/>\r\n                <FormControl>\r\n                    <FormLabel className='job-file-upload-label'>Do you need the document to be signed and\r\n                        return?</FormLabel>\r\n                    <RadioGroup\r\n                        value={this.state.requirements.signAndReturn}\r\n                        onChange={this.handleSignAndReturnChange}\r\n                        row\r\n                    >\r\n                        <FormControlLabel value=\"yes\" control={<Radio color=\"default\" icon={<RadioButtonUncheckedIcon\r\n                            fontSize=\"small\"/>} checkedIcon={<RadioButtonCheckedIcon fontSize=\"small\"\r\n                                                                                     className='green-radio'/>}/>}\r\n                                          label=\"Yes\"/>\r\n                        <FormControlLabel value=\"no\" control={<Radio color=\"default\"\r\n                                                                     icon={<RadioButtonUncheckedIcon fontSize=\"small\"/>}\r\n                                                                     checkedIcon={<RadioButtonCheckedIcon\r\n                                                                         fontSize=\"small\" className='green-radio'/>}/>}\r\n                                          label=\"No\"/>\r\n                    </RadioGroup>\r\n                </FormControl>\r\n\r\n                {this.state.requirements.needPrintCopy === 'yes' ?\r\n                    <div>\r\n\r\n                        <Form.Group className='d-flex flex-column'>\r\n                            <div className='d-flex align-items-center'>\r\n                            <Form.Label className='job-file-upload-label'>Attachment</Form.Label>\r\n                            <Form.Control as=\"select\" onChange={this.handleUploadType}\r\n                                          className='job-file-upload-attach-input'>\r\n                                <option>Choose from Computer</option>\r\n                                {/*<option>Google Drive</option>*/}\r\n                                {/*<option>DropBox</option>*/}\r\n                            </Form.Control>\r\n                            </div>\r\n                            <Form.Label className='job-detail-section-label-helper-text' style={{marginTop: 5}}>*Please ensure the documents uploaded are clear</Form.Label>\r\n                        </Form.Group>\r\n\r\n                        {this.renderUpload()}\r\n\r\n                    </div> :\r\n                    <Col xs={12} sm={6} className='col-no-padding'>\r\n                        <Form.Group className='d-flex flex-column'>\r\n                            <Form.Label className='job-file-upload-label' style={{marginBottom:0}}>Document Name</Form.Label>\r\n                            <Form.Label className='job-detail-section-label-helper-text' style={{marginTop: 5}}>*Please ensure the documents printed are clear</Form.Label>\r\n                            <Form.Control as=\"input\" placeholder='Enter Document Name'\r\n                                          type='text'\r\n                                          onChange={(e)=>this.handleDocumentTitleChange(e, this.props.jobFile)} value={this.state.filename}\r\n                                          className='job-file-upload-remarks-input'>\r\n                            </Form.Control>\r\n                        </Form.Group>\r\n                    </Col>\r\n                }\r\n\r\n                <Form.Group>\r\n                    <Form.Label className='job-file-upload-label'>Number of Copies</Form.Label>\r\n                    <Col xs={4} sm={2} className='col-no-padding'>\r\n                        <Form.Control as=\"input\" type='number' min=\"0\" onChange={this.handleNumberOfCopiesChange}\r\n                                      value={this.state.numCopies}\r\n                                      className='job-file-upload-numcopies-input'>\r\n                        </Form.Control>\r\n                    </Col>\r\n                </Form.Group>\r\n\r\n                <Col xs={12} sm={6} className='col-no-padding'>\r\n                    <Form.Group>\r\n                        <Form.Label className='job-file-upload-label'>Remarks (Optional)</Form.Label>\r\n                        <Form.Control as=\"textarea\" rows=\"4\" placeholder='Write any additional instructions '\r\n                                      type='text'\r\n                                      onChange={this.handleRemarksChange} value={this.state.remarks}\r\n                                      className='job-file-upload-remarks-input'>\r\n                        </Form.Control>\r\n                    </Form.Group>\r\n                </Col>\r\n                <div className='d-flex align-items-center justify-content-center' style={{marginTop: '20px'}}>\r\n                    <Button variant='outline-success' className='job-file-upload-cancel-btn'\r\n                            onClick={(e) => this.props.handleCancel(this.props.type)}>Cancel</Button>\r\n                    {this.props.type === 'upload' ?\r\n                        <Button variant='success' className='job-file-upload-submit-btn'\r\n                                onClick={this.handleAddDocument}>Submit</Button>\r\n                        : <Button variant='success' className='job-file-upload-submit-btn'\r\n                                  onClick={this.handleEditDocument}>Update</Button>}\r\n                </div>\r\n            </Form>\r\n        );\r\n    }\r\n\r\n}\r\n\r\nconst mapStateToProps = ({auth}) => {\r\n    return {auth};\r\n};\r\n\r\nexport default withRouter(connect(mapStateToProps)(FileUploadSection));\r\n","import React, { Fragment } from \"react\";\r\nimport { faDownload } from \"@fortawesome/free-solid-svg-icons\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport axios from \"axios\";\r\n\r\nconst FileDownloader = ({ files, children }) => {\r\n  const downloadSelectedFiles = e => {\r\n    e.stopPropagation();\r\n    if (files.length > 0) {\r\n      axios\r\n        .post(\r\n          `/api/job_files/files/download`,\r\n          {\r\n            jobFileUrls: files\r\n          },\r\n          { responseType: \"arraybuffer\" }\r\n        )\r\n        .then(res => {\r\n          let blob = new Blob([res.data], {\r\n            type: \"application/zip\"\r\n          });\r\n\r\n          const downloadUrl = URL.createObjectURL(blob);\r\n          let a = document.createElement(\"a\");\r\n          a.href = downloadUrl;\r\n          a.download = \"document.zip\";\r\n          document.body.appendChild(a);\r\n          a.click();\r\n          a.remove();\r\n        })\r\n        .catch(err => {\r\n          console.log(err.error);\r\n        });\r\n    } else if (Object.keys(files).length > 0) {\r\n      window.open(files.fileURL, \"_blank\");\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Fragment>\r\n      {(files.length > 0 || Object.keys(files).length > 0) && (\r\n        <span\r\n          className=\"file-downloader-container\"\r\n          onClick={e => downloadSelectedFiles(e)}\r\n        >\r\n          <FontAwesomeIcon icon={faDownload} /> {children}\r\n        </span>\r\n      )}\r\n    </Fragment>\r\n  );\r\n};\r\n\r\nexport default FileDownloader;\r\n","import React, { Fragment, useState } from \"react\";\r\nimport Modal from \"react-bootstrap/Modal\";\r\nimport ModalBody from \"react-bootstrap/ModalBody\";\r\nimport FileDownloader from \"./FileDownloader\";\r\n\r\n// import { Document, Page } from \"react-pdf\";\r\nimport \"./JobFileModal.css\";\r\n\r\n// import { pdfjs } from \"react-pdf\";\r\n// pdfjs.GlobalWorkerOptions.workerSrc = `//cdnjs.cloudflare.com/ajax/libs/pdf.js/${pdfjs.version}/pdf.worker.js`;\r\n\r\nconst JobFileModal = ({ file, showPreviewModal, setModalFlag }) => {\r\n  const fileUrlArray = file.fileURL.split(\".\");\r\n  const imageFileTypes = [\"jpeg.\", \"jpg\", \"png\", \"svg\", \"gif\"];\r\n  const docFileTypes = [\"docx\", \"doc\", \"xlsx\", \"pdf\"];\r\n  let fileType = \"\";\r\n  // if (fileUrlArray[fileUrlArray.length - 1] === \"pdf\") {\r\n  //     fileType = fileUrlArray[fileUrlArray.length - 1];\r\n  // }\r\n\r\n  if (\r\n    imageFileTypes.includes(fileUrlArray[fileUrlArray.length - 1].toLowerCase())\r\n  ) {\r\n    fileType = \"image\";\r\n  }\r\n\r\n  if (\r\n    docFileTypes.includes(fileUrlArray[fileUrlArray.length - 1].toLowerCase())\r\n  ) {\r\n    fileType = \"doc\";\r\n  }\r\n\r\n  let [pageTotal, setPageTotal] = useState(0);\r\n  const onDocumentLoadSuccess = ({ numPages }) => {\r\n    setPageTotal(numPages);\r\n  };\r\n\r\n  let [activePage, setActivePage] = useState(1);\r\n\r\n  const goToNextPage = e => {\r\n    if (activePage < pageTotal) setActivePage(++activePage);\r\n  };\r\n\r\n  const goToPreviousPage = e => {\r\n    if (activePage > 0) setActivePage(--activePage);\r\n  };\r\n\r\n  return (\r\n    <Fragment>\r\n      <Modal\r\n        show={showPreviewModal}\r\n        onHide={() => setModalFlag(false)}\r\n        dialogClassName=\"modal-90w file-preview-modal\"\r\n      >\r\n        <ModalBody>\r\n          <div>\r\n            <div\r\n              className=\"back-icon-container d-flex align-items-center\"\r\n              onClick={() => setModalFlag(false)}\r\n            >\r\n              <i className=\"material-icons\">arrow_back</i> {file.filename}\r\n            </div>\r\n            <div className=\"download-icon-container\">\r\n              <FileDownloader files={file}>Download</FileDownloader>\r\n            </div>\r\n            <div className=\"clearfix\" />\r\n          </div>\r\n          <div className=\"preview-container\">\r\n            {/* {fileType === \"pdf\" && (\r\n                            <Fragment>\r\n                                <Document\r\n                                    file={file.fileURL}\r\n                                    noData={<h4>Preview not Available</h4>}\r\n                                    onLoadSuccess={onDocumentLoadSuccess}\r\n                                >\r\n                                    {pageTotal && (\r\n                                        <Page pageNumber={activePage} />\r\n                                    )}\r\n                                </Document>\r\n                                <div className=\"preview-pagination-container\">\r\n                                    {activePage > 1 && (\r\n                                        <i\r\n                                            className=\"material-icons\"\r\n                                            onClick={() => goToPreviousPage()}\r\n                                        >\r\n                                            arrow_back_ios\r\n                                        </i>\r\n                                    )}\r\n                                    {`${activePage} of ${pageTotal}`}\r\n                                    {activePage < pageTotal && (\r\n                                        <i\r\n                                            className=\"material-icons\"\r\n                                            onClick={() => goToNextPage()}\r\n                                        >\r\n                                            arrow_forward_ios\r\n                                        </i>\r\n                                    )}\r\n                                </div>\r\n                            </Fragment>\r\n                        )} */}\r\n\r\n            {fileType === \"image\" && (\r\n              <img src={file.fileURL} alt={file.filename} />\r\n            )}\r\n\r\n            {fileType === \"doc\" && (\r\n              <iframe\r\n                title=\"document preview\"\r\n                className=\"document-container\"\r\n                src={`https://docs.google.com/viewer?url=${file.fileURL}&embedded=true`}\r\n              ></iframe>\r\n            )}\r\n\r\n            {fileType === \"\" && <h5>Preview not available</h5>}\r\n          </div>\r\n        </ModalBody>\r\n      </Modal>\r\n    </Fragment>\r\n  );\r\n};\r\n\r\nexport default JobFileModal;\r\n","import React from 'react';\r\nimport MaterialTable, {MTableBodyRow, MTableHeader} from \"material-table\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport CreateIcon from '@material-ui/icons/Create';\r\nimport MoreIcon from '@material-ui/icons/MoreVert'\r\nimport ClearIcon from '@material-ui/icons/Clear';\r\nimport Dropdown from \"react-bootstrap/Dropdown\";\r\nimport LinesEllipsis from 'react-lines-ellipsis';\r\nimport SaveIcon from '@material-ui/icons/SaveAlt';\r\nimport PrintIcon from '@material-ui/icons/Print';\r\n\r\n\r\nimport './JobFileSummaryTable.css'\r\nimport JobFileModal from \"./FilePreview/JobFileModal\";\r\n\r\nfunction createData(job, name, copies, requirement, remarks) {\r\n    return {job, name, copies, requirement, remarks};\r\n}\r\n\r\nfunction retrieveRequirement(jobFile, key) {\r\n    const {requirements} = jobFile;\r\n    for (let i = 0; i < requirements.length; i++) {\r\n        const requirement = requirements[i];\r\n        if (requirement.key === key) {\r\n            return requirement;\r\n        }\r\n    }\r\n\r\n    const fullRequirements = this.loadRequirements();\r\n    for (let i = 0; i < fullRequirements.length; i++) {\r\n        const requirement = fullRequirements[i];\r\n        if (requirement.key === key) {\r\n            const jobFileRequirements = jobFile.requirements;\r\n            jobFileRequirements.push(requirement);\r\n            jobFile.requirements = jobFileRequirements;\r\n            this.jobFileChange(jobFile);\r\n            return requirement;\r\n        }\r\n    }\r\n};\r\n\r\n\r\nclass JobFileSummaryTable extends React.Component {\r\n\r\n    state = {\r\n        data: [],\r\n        hover: false,\r\n        hoverKey: '',\r\n        showDropdown: false,\r\n        file:null,\r\n        showModal:false,\r\n    };\r\n\r\n    componentWillReceiveProps(nextProps, nextContext) {\r\n        if (nextProps.refresh === true) {\r\n            this.setState({data: [],});\r\n            const rows = this.props.jobFiles.reduce((a, jobFile) => {\r\n                let needPrintCopy = retrieveRequirement(jobFile, 'needPrintCopy').check;\r\n                let signAndReturn = retrieveRequirement(jobFile, 'signAndReturn').check;\r\n                let req = 'No Requirement';\r\n                if (needPrintCopy && !signAndReturn) {\r\n                    req = 'Need Printed Copy'\r\n                }\r\n                if (signAndReturn && !needPrintCopy) {\r\n                    req = 'Sign and Return'\r\n                }\r\n                if (signAndReturn && needPrintCopy) {\r\n                    req = \"Need Printed Copy & Sign and Return\"\r\n                }\r\n                a.push(createData(jobFile, jobFile.filename, jobFile.numCopies, req, jobFile.remarks));\r\n                return a\r\n            }, []);\r\n            this.setState({data: rows})\r\n        }\r\n    }\r\n\r\n    componentDidMount() {\r\n        const rows = this.props.jobFiles.reduce((a, jobFile) => {\r\n            let needPrintCopy = retrieveRequirement(jobFile, 'needPrintCopy').check;\r\n            let signAndReturn = retrieveRequirement(jobFile, 'signAndReturn').check;\r\n            let req = 'No Requirement';\r\n            if (needPrintCopy && !signAndReturn) {\r\n                req = 'Need Printed Copy'\r\n            }\r\n            if (signAndReturn && !needPrintCopy) {\r\n                req = 'Sign and Return'\r\n            }\r\n            if (signAndReturn && needPrintCopy) {\r\n                req = \"Need Printed Copy & Sign and Return\"\r\n            }\r\n            a.push(createData(jobFile, jobFile.filename, jobFile.numCopies, req, jobFile.remarks));\r\n            return a\r\n        }, []);\r\n        this.setState({data: rows})\r\n    }\r\n\r\n    handleRowClick = (e, rd) => {\r\n        if (rd.job.fileURL && rd.job.fileURL !== '') {\r\n            this.setState({showModal:true,file:rd.job})\r\n        }\r\n    };\r\n\r\n    toggleModal = (value) =>{\r\n        this.setState({showModal:value})\r\n    };\r\n\r\n    handleDropdown = () => {\r\n        this.setState({showDropdown: !this.state.showDropdown})\r\n    };\r\n\r\n    handleDownload = (job) => {\r\n        if (job.fileURL !== '') {\r\n            window.open(job.fileURL);\r\n        }\r\n    };\r\n\r\n    render() {\r\n\r\n        return (\r\n            <div>\r\n                <MaterialTable\r\n                    columns={[\r\n                        {\r\n                            title: \"Name\", field: \"name\",\r\n                            render: rowData => (\r\n                                <LinesEllipsis\r\n                                    text={rowData.name}\r\n                                    maxLine='2'\r\n                                    ellipsis='...'\r\n                                    trimRight\r\n                                    basedOn='letters'\r\n                                />\r\n                            ),\r\n                        },\r\n                        {\r\n                            title: \"Copies\", field: \"copies\",\r\n                            cellStyle: {width:\"50px\"}\r\n                        },\r\n                        {\r\n                            title: \"Requirements\", field: \"requirement\",\r\n                            disableClick: true,\r\n                            render: rowData => (\r\n                                <div className='d-flex align-items-center remarks-container'>\r\n                                    <LinesEllipsis\r\n                                        text={rowData.requirement}\r\n                                        maxLine='2'\r\n                                        ellipsis='...'\r\n                                        trimRight\r\n                                        basedOn='letters'\r\n                                    />\r\n                                    <div className='hover-buttons'>\r\n                                        <IconButton onClick={() => {\r\n                                            this.props.editFile(rowData.job);\r\n                                        }}>\r\n                                            <CreateIcon fontSize=\"small\"/>\r\n                                        </IconButton>\r\n                                        <IconButton onClick={() => {\r\n                                            this.props.deleteFile(rowData.job);\r\n                                        }}>\r\n                                            <ClearIcon fontSize=\"small\"/>\r\n                                        </IconButton>\r\n                                        {/*<IconButton onClick={this.handleDropdown}>*/}\r\n                                        {/*    <MoreIcon fontSize=\"small\"/>*/}\r\n                                        {/*</IconButton>*/}\r\n                                        {/*<Dropdown show={this.state.showDropdown} alignRight drop='down'>*/}\r\n                                        {/*    <Dropdown.Menu>*/}\r\n                                        {/*        <Dropdown.Item onClick={() => {*/}\r\n                                        {/*            this.handleDownload(rowData.job)*/}\r\n                                        {/*        }}>Download</Dropdown.Item>*/}\r\n                                        {/*        /!*<Dropdown.Item>Rename</Dropdown.Item>*!/*/}\r\n                                        {/*    </Dropdown.Menu>*/}\r\n                                        {/*</Dropdown>*/}\r\n                                    </div>\r\n                                </div>\r\n                            )\r\n                        },\r\n                    ]}\r\n                    data={this.state.data}\r\n                    components={{\r\n                        Container: props => (\r\n                            <Paper {...props} elevation={0} style={{marginTop: '20px', minHeight: '60vh'}}/>\r\n                        ),\r\n                        Row: props => (\r\n                            <MTableBodyRow {...props}\r\n                                           // onMouseEnter={() => {\r\n                                           //\r\n                                           //     this.setState({hover: true, hoverKey: props.data.tableData.id})\r\n                                           // }}\r\n                                           // onMouseLeave={() => {\r\n                                           //     this.setState({hover: false, hoverKey: '', showDropdown: false})\r\n                                           // }}\r\n                                           className='row-hover'\r\n                            />\r\n                        ),\r\n\r\n                    }}\r\n                    options={{\r\n                        sorting: true,\r\n                        selection: true,\r\n                        headerStyle: {fontFamily: 'Roboto', fontSize: '16px', fontWeight: 'bold', color: '#707070'},\r\n                        rowStyle: {fontFamily: 'Roboto', fontSize: '14px', color: '#707070', height: '69px',},\r\n                        toolbarButtonAlignment: 'left',\r\n                        showTextRowsSelected: false,\r\n\r\n                    }}\r\n                    onRowClick={this.handleRowClick}\r\n                    title=''\r\n                    actions={[\r\n                        // {\r\n                        //     tooltip: 'Download Selected Items',\r\n                        //     icon: SaveIcon,\r\n                        //     onClick: (evt, data) => alert('You want to download ' + data.length + ' rows'),\r\n                        // },\r\n                        {\r\n                            tooltip: 'Delete Selected Items',\r\n                            icon: ClearIcon,\r\n                            onClick: (evt, data) => this.props.deleteMultipleFiles(data),\r\n                        },\r\n                        // {\r\n                        //     tooltip: 'Print Selected Items',\r\n                        //     icon: PrintIcon,\r\n                        //     onClick: (evt, data) => alert('You want to Print ' + data.length + ' rows'),\r\n                        // }\r\n                    ]}\r\n                />\r\n                {this.state.data.length>0 && this.state.file !== null && (\r\n                    <JobFileModal\r\n                        file={this.state.file}\r\n                        setModalFlag={value =>\r\n                            this.toggleModal(value)\r\n                        }\r\n                        showPreviewModal={this.state.showModal}\r\n                    />\r\n                )}\r\n            </div>\r\n\r\n\r\n        );\r\n    }\r\n}\r\n\r\nexport default JobFileSummaryTable;","import React, { Component } from \"react\";\r\nimport { Drawer } from \"@material-ui/core\";\r\nimport List from \"@material-ui/core/List\";\r\nimport ListItem from \"@material-ui/core/ListItem\";\r\nimport ListItemText from \"@material-ui/core/ListItemText\";\r\nimport Divider from \"@material-ui/core/Divider\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\n\r\nclass JobFileSummaryTableMobileSlider extends Component {\r\n  handleDownload = job => {\r\n    if (job.fileURL !== \"\") {\r\n      window.open(job.fileURL);\r\n    }\r\n  };\r\n  render() {\r\n    return (\r\n      <Drawer\r\n        anchor=\"bottom\"\r\n        open={this.props.open}\r\n        onClose={this.props.onClose}\r\n        PaperProps={{\r\n          className:\r\n            \"MuiPaper-root MuiPaper-elevation16 MuiDrawer-paper MuiDrawer-paperAnchorBottom drawer-job-file-mobile\"\r\n        }}\r\n      >\r\n        <h3 onClick={this.props.onClose} className=\"job-slide-cancel\">\r\n          Cancel\r\n        </h3>\r\n        <Divider className=\"job-file-slider-drawer-divider\" />\r\n        <Paper elevation={0} className=\"job-file-slider-drawer-paper\">\r\n          <List>\r\n            <ListItem\r\n              button\r\n              onClick={() => {\r\n                this.props.onClose();\r\n                this.props.editFile(this.props.jobFile);\r\n              }}\r\n            >\r\n              <ListItemText>Edit</ListItemText>\r\n            </ListItem>\r\n          </List>\r\n          <List>\r\n            <ListItem button>\r\n              <ListItemText>Rename</ListItemText>\r\n            </ListItem>\r\n          </List>\r\n          <List>\r\n            <ListItem button onClick={this.handleDownload}>\r\n              <ListItemText>Download</ListItemText>\r\n            </ListItem>\r\n          </List>\r\n          <List>\r\n            <ListItem\r\n              button\r\n              onClick={() => {\r\n                this.props.onClose();\r\n                this.props.deleteFile(this.props.jobFile);\r\n              }}\r\n            >\r\n              <ListItemText style={{ color: \"red\" }}>Delete</ListItemText>\r\n            </ListItem>\r\n          </List>\r\n        </Paper>\r\n      </Drawer>\r\n    );\r\n  }\r\n}\r\n\r\nexport default JobFileSummaryTableMobileSlider;\r\n","import React from \"react\";\r\nimport MaterialTable from \"material-table\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport MoreIcon from \"@material-ui/icons/MoreHoriz\";\r\nimport DeleteIcon from \"@material-ui/icons/Delete\";\r\n\r\nimport \"./JobFileSummaryTableMobile.css\";\r\nimport JobFileSummaryTableMobileSlider from \"./JobFileSummaryTableMobileSlider\";\r\n\r\nfunction createData(job, name, copies, requirement, remarks) {\r\n  return { job, name, copies, requirement, remarks };\r\n}\r\n\r\nfunction retrieveRequirement(jobFile, key) {\r\n  const { requirements } = jobFile;\r\n  for (let i = 0; i < requirements.length; i++) {\r\n    const requirement = requirements[i];\r\n    if (requirement.key === key) {\r\n      return requirement;\r\n    }\r\n  }\r\n\r\n  const fullRequirements = this.loadRequirements();\r\n  for (let i = 0; i < fullRequirements.length; i++) {\r\n    const requirement = fullRequirements[i];\r\n    if (requirement.key === key) {\r\n      const jobFileRequirements = jobFile.requirements;\r\n      jobFileRequirements.push(requirement);\r\n      jobFile.requirements = jobFileRequirements;\r\n      this.jobFileChange(jobFile);\r\n      return requirement;\r\n    }\r\n  }\r\n}\r\n\r\nclass JobFileSummaryTableMobile extends React.Component {\r\n  state = {\r\n    data: [],\r\n    showSlider: false,\r\n    jobFileSelected: null\r\n  };\r\n\r\n  componentWillReceiveProps(nextProps, nextContext) {\r\n    if (nextProps.refresh === true) {\r\n      this.setState({ data: [] });\r\n      const rows = this.props.jobFiles.reduce((a, jobFile) => {\r\n        let needPrintCopy = retrieveRequirement(jobFile, \"needPrintCopy\").check;\r\n        let signAndReturn = retrieveRequirement(jobFile, \"signAndReturn\").check;\r\n        let req = \"No Requirement\";\r\n        if (needPrintCopy && !signAndReturn) {\r\n          req = \"Need Print Copy\";\r\n        }\r\n        if (signAndReturn && !needPrintCopy) {\r\n          req = \"Sign and Return\";\r\n        }\r\n        if (signAndReturn && needPrintCopy) {\r\n          req = \"Need Print Copy & Sign and Return\";\r\n        }\r\n        a.push(\r\n          createData(\r\n            jobFile,\r\n            jobFile.filename,\r\n            jobFile.numCopies,\r\n            req,\r\n            jobFile.remarks\r\n          )\r\n        );\r\n        return a;\r\n      }, []);\r\n      this.setState({ data: rows });\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    const rows = this.props.jobFiles.reduce((a, jobFile) => {\r\n      let needPrintCopy = retrieveRequirement(jobFile, \"needPrintCopy\").check;\r\n      let signAndReturn = retrieveRequirement(jobFile, \"signAndReturn\").check;\r\n      let req = \"No Requirement\";\r\n      if (needPrintCopy && !signAndReturn) {\r\n        req = \"Need Print Copy\";\r\n      }\r\n      if (signAndReturn && !needPrintCopy) {\r\n        req = \"Sign and Return\";\r\n      }\r\n      if (signAndReturn && needPrintCopy) {\r\n        req = \"Need Print Copy & Sign and Return\";\r\n      }\r\n      a.push(\r\n        createData(\r\n          jobFile,\r\n          jobFile.filename,\r\n          jobFile.numCopies,\r\n          req,\r\n          jobFile.remarks\r\n        )\r\n      );\r\n      return a;\r\n    }, []);\r\n    this.setState({ data: rows });\r\n  }\r\n\r\n  handleRowClick = (e, rd) => {\r\n    if (rd.jobFile.fileURL && rd.jobFile.fileURL !== \"\") {\r\n      window.open(rd.job.fileURL);\r\n    }\r\n  };\r\n\r\n  handleSlider = jobFile => {\r\n    this.setState({ showSlider: true, jobFileSelected: jobFile });\r\n  };\r\n\r\n  handleSliderClose = () => {\r\n    this.setState({ showSlider: false });\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <div>\r\n        <MaterialTable\r\n          columns={[\r\n            {\r\n              title: \"Name\",\r\n              field: \"name\",\r\n              render: rowData => (\r\n                <span className=\"job-table-text\">{rowData.name}</span>\r\n              ),\r\n              cellStyle: {\r\n                paddingRight: \"16px\"\r\n              }\r\n            },\r\n            {\r\n              title: \"\",\r\n              field: \"name\",\r\n              disableClick: true,\r\n              sorting: false,\r\n              render: rowData => (\r\n                <IconButton\r\n                  onClick={e => {\r\n                    this.handleSlider(rowData.job);\r\n                  }}\r\n                >\r\n                  <MoreIcon />\r\n                </IconButton>\r\n              ),\r\n              cellStyle: {\r\n                paddingRight: \"16px\"\r\n              }\r\n            }\r\n          ]}\r\n          data={this.state.data}\r\n          components={{\r\n            Container: props => (\r\n              <Paper\r\n                {...props}\r\n                elevation={0}\r\n                style={{ marginTop: \"20px\", minHeight: \"60vh\" }}\r\n              />\r\n            )\r\n          }}\r\n          options={{\r\n            sorting: true,\r\n            selection: true,\r\n            headerStyle: {\r\n              fontFamily: \"Roboto\",\r\n              fontSize: \"16px\",\r\n              fontWeight: \"bold\",\r\n              color: \"#707070\"\r\n            },\r\n            rowStyle: {\r\n              fontFamily: \"Roboto\",\r\n              fontSize: \"14px\",\r\n              color: \"#707070\",\r\n              height: \"69px\"\r\n            },\r\n            toolbarButtonAlignment: \"left\",\r\n            showTextRowsSelected: false,\r\n            showTitle: false,\r\n            paging: false\r\n          }}\r\n          onRowClick={this.handleRowClick}\r\n          actions={[\r\n            {\r\n              tooltip: \"Delete Selected Items\",\r\n              icon: DeleteIcon,\r\n              onClick: (evt, data) => this.props.deleteMultipleFiles(data)\r\n            }\r\n          ]}\r\n        />\r\n        <JobFileSummaryTableMobileSlider\r\n          jobFile={this.state.jobFileSelected}\r\n          open={this.state.showSlider}\r\n          onClose={this.handleSliderClose}\r\n          editFile={this.props.editFile}\r\n          deleteFile={this.props.deleteFile}\r\n        />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default JobFileSummaryTableMobile;\r\n","import React, {Component} from 'react';\r\nimport axios from 'axios';\r\nimport {withRouter} from \"react-router-dom\";\r\nimport {connect} from \"react-redux\";\r\n\r\nimport '../JobDetails.css';\r\n\r\nimport FileUploadSection from \"./FileUploadSection\"\r\nimport AffirmationModal from \"../../../ui/Modal/AffirmationModal\";\r\n\r\nimport {Paper} from '@material-ui/core';\r\n\r\nimport JobFileSummaryTable from \"./JobFileSummaryTable\";\r\nimport {FontAwesomeIcon} from \"@fortawesome/react-fontawesome\";\r\nimport {faPlusSquare} from \"@fortawesome/free-regular-svg-icons\";\r\nimport MediaQuery from \"react-responsive\";\r\nimport JobFileSummaryTableMobile from \"./JobFileSummaryTableMobile\";\r\n\r\n\r\nclass JobFilesDisplay extends Component {\r\n    state = {\r\n        jobFiles: null,\r\n        editJobFile: null,\r\n        showJobFileDeleteModal: false,\r\n        jobFileToDelete: [],\r\n        activeScreen: 'showFiles',\r\n        selectOption: true,\r\n        refresh: false,\r\n        numPages: null,\r\n        pageNumber: 1,\r\n    };\r\n\r\n    componentDidMount() {\r\n        this.getJobFiles();\r\n    }\r\n\r\n    getJobFiles = () => {\r\n        axios.get(`/api/job_files?jobID=${this.props.job._id}`).then(res => {\r\n            const jobFiles = res.data;\r\n            const userJobFiles = jobFiles.filter(o=> o.user === this.props.auth.user.id);\r\n            this.setState({jobFiles: userJobFiles});\r\n        }).catch(err => {\r\n            console.log(err);\r\n        });\r\n    };\r\n\r\n    jobFileChange = (jobFile) => {\r\n        const {jobFiles} = this.state;\r\n        const newJobFiles = [];\r\n        for (let i = 0; i < jobFiles.length; i++) {\r\n            if (jobFiles[i]._id === jobFile._id) {\r\n                newJobFiles.push(jobFile);\r\n            } else {\r\n                newJobFiles.push(jobFiles[i]);\r\n            }\r\n        }\r\n        this.setState({jobFiles: newJobFiles});\r\n    };\r\n\r\n    loadRequirements = () => {\r\n        return [\r\n            {\r\n                id: (+new Date() + Math.floor(Math.random() * 999999)).toString(36),\r\n                key: \"signAndReturn\",\r\n                name: \"Sign and Return\",\r\n                check: false\r\n            },\r\n            {\r\n                id: (+new Date() + Math.floor(Math.random() * 999999)).toString(36),\r\n                key: \"needPrintCopy\",\r\n                name: \"Need Printed Copy\",\r\n                check: false\r\n            }\r\n        ];\r\n    };\r\n\r\n    updateJobFiles = () => {\r\n        axios.put(`/api/job_files`, {\r\n            jobFiles: this.state.jobFiles\r\n        }).then(res => {\r\n            this.setState({jobFiles: res.data});\r\n        }).catch(err => {\r\n            console.log(err);\r\n        });\r\n    };\r\n\r\n    handleDeleteJobFiles = () => {\r\n        this.setState({refresh: true});\r\n        const jobFileToDelete = this.state.jobFileToDelete;\r\n        for (let i = 0; i < jobFileToDelete.length; i++) {\r\n            let jobFile = jobFileToDelete[i];\r\n            const index = this.state.jobFiles.indexOf(jobFile);\r\n            this.state.jobFiles.splice(index, 1);\r\n            this.deleteJobFiles(jobFile);\r\n        }\r\n        this.setState(this.state.jobFiles);\r\n        this.setState({jobFileToDelete: []});\r\n        window.setTimeout(() => {\r\n            this.setState({refresh: false});\r\n        }, 1000)\r\n\r\n    };\r\n\r\n    deleteJobFiles = (jobFileToDelete) => {\r\n        axios.delete(`/api/job_files`, {\r\n            data: {\r\n                jobFile: jobFileToDelete\r\n            }\r\n        }).catch(err => {\r\n            console.log(err);\r\n        });\r\n    };\r\n\r\n    handleSingleDelete = (jobFile) => {\r\n        this.state.jobFileToDelete.push(jobFile);\r\n        this.setState({showJobFileDeleteModal: true}\r\n        )\r\n    };\r\n\r\n    handleMultipleDelete = (data) => {\r\n        const delArray = data.reduce((a, jobFile) => {\r\n            a.push(jobFile.job);\r\n            return a\r\n        }, []);\r\n        this.setState({showJobFileDeleteModal: true, jobFileToDelete: delArray})\r\n    };\r\n\r\n    handleAddEvent = () => {\r\n        const jobFile = {\r\n            id: (+new Date() + Math.floor(Math.random() * 999999)).toString(36),\r\n            fileURL: \"\",\r\n            filename:'',\r\n            numCopies: 1,\r\n            requirements: this.loadRequirements(),\r\n            remarks: \"\",\r\n        };\r\n\r\n        const jobFiles = this.state.jobFiles;\r\n        jobFiles.push(jobFile);\r\n        this.setState({jobFiles: this.state.jobFiles, activeScreen: 'uploadFile'});\r\n    };\r\n\r\n    handleCancel = (type) => {\r\n        if (type === 'upload') {\r\n            this.state.jobFiles.splice(-1, 1);\r\n            this.setState({activeScreen: 'showFiles'});\r\n        } else {\r\n            this.setState({activeScreen: 'showFiles'});\r\n        }\r\n    };\r\n\r\n    handleUploadSuccess = () => {\r\n        this.updateJobFiles();\r\n        this.setState({activeScreen: 'showFiles'});\r\n    };\r\n\r\n    handleEditFile = (jobFile) => {\r\n        this.setState({activeScreen: 'editFile', editJobFile: jobFile});\r\n    };\r\n\r\n    handleEditCancel = () => {\r\n        this.setState({activeScreen: 'showFile', editJobFile: null});\r\n    };\r\n\r\n    render() {\r\n        switch (this.state.jobFiles) {\r\n            case null:\r\n                return <div></div>;\r\n            default:\r\n                switch (this.state.activeScreen) {\r\n                    case 'uploadFile':\r\n                        return (\r\n                            <div>\r\n                                <Paper square={true} className='job-detail-paper' elevation={0}>\r\n                                    {\r\n                                        this.state.jobFiles.length > 0 ?\r\n                                            <div>\r\n                                                <FileUploadSection\r\n                                                    handleCancel={this.handleCancel}\r\n                                                    successClose={this.handleUploadSuccess}\r\n                                                    jobFile={this.state.jobFiles[this.state.jobFiles.length - 1]}\r\n                                                    job={this.props.job}\r\n                                                    type='upload'\r\n                                                    handleSingleDelete={this.handleSingleDelete}\r\n                                                />\r\n                                            </div> : ''\r\n                                    }\r\n                                </Paper>\r\n                            </div>\r\n                        );\r\n                    case 'editFile':\r\n                        return (\r\n                            <div>\r\n                                <Paper square={true} className='job-detail-paper' elevation={0}>\r\n                                    {\r\n                                        this.state.editJobFile !== null ?\r\n                                            <div>\r\n                                                <FileUploadSection\r\n                                                    handleCancel={this.handleEditCancel}\r\n                                                    successClose={this.handleUploadSuccess}\r\n                                                    jobFile={this.state.editJobFile}\r\n                                                    job={this.props.job}\r\n                                                    type='edit'\r\n                                                    handleSingleDelete={this.handleSingleDelete}\r\n                                                />\r\n                                            </div> : ''\r\n                                    }\r\n                                </Paper>\r\n                            </div>\r\n                        );\r\n                    default:\r\n                        return (<div>\r\n                            <Paper square={true} className='job-detail-paper' elevation={0}>\r\n                                <div>\r\n                                    <div>\r\n                                        <div className='d-flex flex-row align-items-center'>\r\n                                            <FontAwesomeIcon icon={faPlusSquare} color=\"green\" size=\"3x\"\r\n                                                             className='job-files-add-file'\r\n                                                             onClick={this.handleAddEvent}\r\n                                            />\r\n                                            <h3 className='job-detail-section-header'>Upload your documents</h3>\r\n                                        </div>\r\n                                    </div>\r\n                                    {this.state.jobFiles.length > 0 ?\r\n                                        <div>\r\n                                            <MediaQuery minWidth={768}>\r\n                                                <JobFileSummaryTable\r\n                                                    jobFiles={this.state.jobFiles}\r\n                                                    deleteFile={this.handleSingleDelete}\r\n                                                    editFile={this.handleEditFile}\r\n                                                    deleteMultipleFiles={this.handleMultipleDelete}\r\n                                                    selectOption={this.state.selectOption}\r\n                                                    refresh={this.state.refresh}\r\n\r\n                                                />\r\n                                            </MediaQuery>\r\n                                            <MediaQuery maxWidth={767}>\r\n                                                <JobFileSummaryTableMobile\r\n                                                    jobFiles={this.state.jobFiles}\r\n                                                    deleteFile={this.handleSingleDelete}\r\n                                                    editFile={this.handleEditFile}\r\n                                                    deleteMultipleFiles={this.handleMultipleDelete}\r\n                                                    selectOption={this.state.selectOption}\r\n                                                    refresh={this.state.refresh}\r\n                                                />\r\n                                            </MediaQuery>\r\n                                        </div>\r\n                                        : <p>You have not uploaded any documents yet</p>}\r\n                                </div>\r\n\r\n                                <AffirmationModal\r\n                                    modal={this.state.showJobFileDeleteModal}\r\n                                    toggle={(e) => this.setState({showJobFileDeleteModal: !this.state.showJobFileDeleteModal})}\r\n                                    title=\"Delete Document?\"\r\n                                    affirmativeAction={(e) => {\r\n                                        this.setState({showJobFileDeleteModal: !this.state.showJobFileDeleteModal});\r\n                                        this.handleDeleteJobFiles();\r\n                                    }}\r\n                                    affirmativeText='Yes'\r\n                                    cancelText='No'\r\n                                >\r\n                                    <p>Are you sure you want to delete the document?</p>\r\n                                </AffirmationModal>\r\n                            </Paper>\r\n                        </div>);\r\n                }\r\n        }\r\n    }\r\n}\r\n\r\nconst mapStateToProps = ({auth}) => {\r\n    return {auth};\r\n};\r\n\r\nexport default withRouter(connect(mapStateToProps)(JobFilesDisplay));\r\n","import React, { Component } from \"react\";\r\nimport {\r\n  Button,\r\n  Col,\r\n  Container,\r\n  Form,\r\n  FormGroup,\r\n  Input,\r\n  Label,\r\n  Row\r\n} from \"reactstrap\";\r\nimport axios from \"axios\";\r\n\r\nimport AffirmationModal from \"../../ui/Modal/AffirmationModal\";\r\n\r\nclass JobDetailsEdit extends Component {\r\n  state = {\r\n    jobStatuses: [\r\n      {\r\n        index: 1,\r\n        title: \"Job booking pending confirmation\",\r\n        description:\r\n          \"We have received your job booking and are currently checking the details. We will send you a confirmation email once everything is verified.\",\r\n        trackingType: \"Electronic\"\r\n      },\r\n      {\r\n        index: 2,\r\n        title: \"Job booking confirmed\",\r\n        description:\r\n          \"We have confirmed your job booking. Please deliver the items to 'No. 6 Tuas Ave 6, Singapore 639311' at least 24 hours before the vessel arrives.\",\r\n        trackingType: \"Electronic\"\r\n      },\r\n      {\r\n        index: 3,\r\n        title: \"Pending items arrival at warehouse\",\r\n        description:\r\n          \"We have confirmed your job booking. Your job details have been passed to our operations side for processing.\",\r\n        trackingType: \"Storage\"\r\n      },\r\n      {\r\n        index: 4,\r\n        title: \"All items have arrived at warehouse\",\r\n        description:\r\n          \"We have received all of your indicated items at our warehouse. We will proceed to check that everything is in order.\",\r\n        trackingType: \"Storage\"\r\n      },\r\n      {\r\n        index: 5,\r\n        title: \"Items are on delivery\",\r\n        description:\r\n          \"Your items have been checked and loaded onto our trucks. It is currently on the way to the delivery destination.\",\r\n        trackingType: \"Truck\"\r\n      },\r\n      {\r\n        index: 6,\r\n        title: \"Items have been received by customer\",\r\n        description:\r\n          \"Your items have been successfully received by the customer.\",\r\n        trackingType: \"Truck\"\r\n      }\r\n    ],\r\n    jobStatus: null,\r\n    showCheckJobStatusModal: false,\r\n    cancellationConfirmationModal: false\r\n  };\r\n\r\n  updateJobStatus = () => {\r\n    axios\r\n      .post(\"/api/job_trackers\", {\r\n        ...this.state.jobStatus,\r\n        jobId: this.props.job._id\r\n      })\r\n      .then(res => {\r\n        window.location.reload();\r\n      })\r\n      .catch(err => {\r\n        console.log(err);\r\n      });\r\n  };\r\n\r\n  checkJobTracker = jobStatus => {\r\n    this.setState({\r\n      jobStatus,\r\n      showCheckJobStatusModal: true\r\n    });\r\n  };\r\n\r\n  cancelJob = () => {\r\n    const job = this.props.job;\r\n    job.isCancelled = \"Confirmed\";\r\n\r\n    axios\r\n      .put(\"/api/jobs\", {\r\n        job,\r\n        sendEmailUpdate: false\r\n      })\r\n      .then(res => {\r\n        window.location.reload();\r\n      })\r\n      .catch(err => {\r\n        console.log(err);\r\n      });\r\n  };\r\n\r\n  render() {\r\n    const job = this.props.job;\r\n    const jobTrackers = job.jobTrackers.sort((a, b) => {\r\n      return a.index - b.index;\r\n    });\r\n\r\n    return (\r\n      <Container fluid>\r\n        <Row>\r\n          <Col xs=\"12\" md={{ size: 4, offset: 4 }}>\r\n            <Button\r\n              type=\"button\"\r\n              color=\"danger\"\r\n              onClick={e =>\r\n                this.setState({ cancellationConfirmationModal: true })\r\n              }\r\n            >\r\n              Cancel Job\r\n            </Button>\r\n            <br />\r\n            <br />\r\n            <Form>\r\n              {this.state.jobStatuses.map((jobStatus, index) => {\r\n                return (\r\n                  <FormGroup check key={index}>\r\n                    <Label check>\r\n                      <Input\r\n                        type=\"checkbox\"\r\n                        disabled={!(jobStatus.index === jobTrackers.length + 1)}\r\n                        checked={jobStatus.index <= jobTrackers.length}\r\n                        onChange={e => this.checkJobTracker(jobStatus)}\r\n                      />{\" \"}\r\n                      {jobStatus.title}\r\n                    </Label>\r\n                  </FormGroup>\r\n                );\r\n              })}\r\n              <br />\r\n              <FormGroup>\r\n                <Button\r\n                  className=\"global-primary-button\"\r\n                  onClick={this.props.cancel}\r\n                >\r\n                  Back\r\n                </Button>\r\n              </FormGroup>\r\n            </Form>\r\n          </Col>\r\n        </Row>\r\n\r\n        <AffirmationModal\r\n          modal={this.state.showCheckJobStatusModal}\r\n          toggle={e =>\r\n            this.setState({\r\n              showCheckJobStatusModal: !this.state.showCheckJobStatusModal\r\n            })\r\n          }\r\n          title=\"Job Status Update\"\r\n          affirmativeAction={this.updateJobStatus}\r\n          affirmativeText=\"Yes\"\r\n          cancelText=\"No\"\r\n        >\r\n          Are you sure you want to update this job status?\r\n        </AffirmationModal>\r\n\r\n        <AffirmationModal\r\n          modal={this.state.cancellationConfirmationModal}\r\n          toggle={e =>\r\n            this.setState({\r\n              cancellationConfirmationModal: !this.state\r\n                .cancellationConfirmationModal\r\n            })\r\n          }\r\n          title=\"Job Cancellation\"\r\n          affirmativeAction={this.cancelJob}\r\n          affirmativeText=\"Confirm\"\r\n        >\r\n          Are you sure you want to cancel this job?\r\n        </AffirmationModal>\r\n      </Container>\r\n    );\r\n  }\r\n}\r\n\r\nexport default JobDetailsEdit;\r\n","import React, { Component } from \"react\";\r\nimport { withRouter } from \"react-router-dom\";\r\nimport { connect } from \"react-redux\";\r\n\r\nimport { Paper, Button } from \"@material-ui/core\";\r\n\r\nimport { Timeline, TimelineEvent } from \"react-event-timeline\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport { faTruck } from \"@fortawesome/free-solid-svg-icons\";\r\n\r\nimport JobDetailsEdit from \"../JobDetailsEdit\";\r\n\r\nimport \"rc-steps/assets/index.css\";\r\nimport \"rc-steps/assets/iconfont.css\";\r\nimport Steps, { Step } from \"rc-steps\";\r\n\r\nimport moment from \"moment\";\r\n\r\nimport \"./JobStatusDisplay.css\";\r\n\r\nclass JobStatusDisplay extends Component {\r\n  state = {\r\n    jobStatuses: [\r\n      {\r\n        index: 1,\r\n        title: \"Job booking pending confirmation\",\r\n        description:\r\n          \"We have received your job booking and are currently checking the details. We will send you a confirmation email once everything is verified.\",\r\n        trackingType: \"Electronic\"\r\n      },\r\n      {\r\n        index: 2,\r\n        title: \"Job booking confirmed\",\r\n        description:\r\n          \"We have confirmed your job booking. Please deliver the items to 'No. 6 Tuas Ave 6, Singapore 639311' at least 24 hours before the vessel arrives.\",\r\n        trackingType: \"Electronic\"\r\n      },\r\n      {\r\n        index: 3,\r\n        title: \"Pending items arrival at warehouse\",\r\n        description:\r\n          \"We have confirmed your job booking. Your job details have been passed to our operations side for processing.\",\r\n        trackingType: \"Storage\"\r\n      },\r\n      {\r\n        index: 4,\r\n        title: \"All items have arrived at warehouse\",\r\n        description:\r\n          \"We have received all of your indicated items at our warehouse. We will proceed to check that everything is in order.\",\r\n        trackingType: \"Storage\"\r\n      },\r\n      {\r\n        index: 5,\r\n        title: \"Items are on delivery\",\r\n        description:\r\n          \"Your items have been checked and loaded onto our trucks. It is currently on the way to the delivery destination.\",\r\n        trackingType: \"Truck\"\r\n      },\r\n      {\r\n        index: 6,\r\n        title: \"Items have been received by customer\",\r\n        description:\r\n          \"Your items have been successfully received by the customer.\",\r\n        trackingType: \"Truck\"\r\n      }\r\n    ],\r\n    showJobDetailsEdit: false\r\n  };\r\n\r\n  render() {\r\n    const steps = this.state.jobStatuses;\r\n    const job = this.props.job;\r\n    const jobTrackers = job.jobTrackers.sort((a, b) => {\r\n      return a.index - b.index;\r\n    });\r\n    const activeStep = jobTrackers.length;\r\n\r\n    const renderSteps = steps.map((step, i) => {\r\n      const jobStatus = jobTrackers.reduce((a, status) => {\r\n        a.push(status.index);\r\n        return a;\r\n      }, []);\r\n      if (!jobStatus.includes(step.index)) {\r\n        return (\r\n          <Step title={step.title} key={i} description={step.description} />\r\n        );\r\n      } else {\r\n        const statusSelected = jobTrackers.filter(o => {\r\n          return o.index === step.index;\r\n        })[0];\r\n        return (\r\n          <Step\r\n            title={statusSelected.title}\r\n            key={i}\r\n            description={\r\n              <div className=\"d-flex flex-column\">\r\n                <span>\r\n                  <i>\r\n                    {moment(statusSelected.timestamp).format(\r\n                      \"Do MMMM YYYY, h:mm:ss a\"\r\n                    )}\r\n                  </i>\r\n                </span>\r\n                <span>{statusSelected.description}</span>\r\n                {statusSelected.remarks !== \"\" ? (\r\n                  <span>Remarks: {statusSelected.remarks}</span>\r\n                ) : (\r\n                  \"\"\r\n                )}\r\n              </div>\r\n            }\r\n          />\r\n        );\r\n      }\r\n    });\r\n\r\n    //Overall Stepper View\r\n    switch (this.state.showJobDetailsEdit) {\r\n      case false:\r\n        return (\r\n          <div>\r\n            <Paper square={true} elevation={0} className=\"job-detail-paper\">\r\n              <div\r\n                className=\"d-flex align-items-center justify-content-center\"\r\n                style={{ margin: 10 }}\r\n              >\r\n                {this.props.auth.userType === \"Admin\" ? (\r\n                  <Button\r\n                    variant=\"contained\"\r\n                    onClick={e => this.setState({ showJobDetailsEdit: true })}\r\n                  >\r\n                    Edit Status\r\n                  </Button>\r\n                ) : (\r\n                  \"\"\r\n                )}\r\n              </div>\r\n              <Steps\r\n                direction=\"vertical\"\r\n                current={activeStep}\r\n                icons={{\r\n                  finish: <span className=\"status-finish\">&#10003;</span>\r\n                }}\r\n              >\r\n                {renderSteps}\r\n              </Steps>\r\n            </Paper>\r\n            {/*<Paper square={true} elevation={0}>*/}\r\n            {/*    <Timeline>*/}\r\n            {/*        {*/}\r\n            {/*            this.props.job.jobTrackers.sort((a, b) => {*/}\r\n            {/*                return b.index - a.index;*/}\r\n            {/*            }).map((jobTracker, index) => {*/}\r\n            {/*                return (*/}\r\n            {/*                    <TimelineEvent*/}\r\n            {/*                        key={index}*/}\r\n            {/*                        title={jobTracker.title}*/}\r\n            {/*                        createdAt={new Date(jobTracker.timestamp).toString()}*/}\r\n            {/*                        icon={<FontAwesomeIcon icon={faTruck}/>}*/}\r\n            {/*                        titleStyle={{fontWeight: \"400\"}}*/}\r\n            {/*                    >*/}\r\n            {/*                        {jobTracker.description}*/}\r\n            {/*                    </TimelineEvent>*/}\r\n            {/*                );*/}\r\n            {/*            })*/}\r\n            {/*        }*/}\r\n            {/*    </Timeline>*/}\r\n            {/*</Paper>*/}\r\n          </div>\r\n        );\r\n      default:\r\n        return (\r\n          <div>\r\n            {this.props.auth.userType === \"Admin\" ? (\r\n              <JobDetailsEdit\r\n                job={this.props.job}\r\n                cancel={e => this.setState({ showJobDetailsEdit: false })}\r\n              />\r\n            ) : (\r\n              \"\"\r\n            )}\r\n          </div>\r\n        );\r\n    }\r\n  }\r\n}\r\n\r\nconst mapStateToProps = ({ auth }) => {\r\n  return { auth };\r\n};\r\n\r\nexport default withRouter(connect(mapStateToProps)(JobStatusDisplay));\r\n","import React, { Component } from \"react\";\r\nimport { withRouter } from \"react-router-dom\";\r\nimport { connect } from \"react-redux\";\r\n\r\nimport { Paper } from \"@material-ui/core\";\r\nimport { Container, Row, Col, Button } from \"react-bootstrap\";\r\nimport FormControl from \"react-bootstrap/FormControl\";\r\n\r\nimport {\r\n  withScriptjs,\r\n  withGoogleMap,\r\n  GoogleMap,\r\n  Marker\r\n} from \"react-google-maps\";\r\n\r\nvar deliveryInAdvance = 6;\r\n\r\nclass JobDropoffDetail extends Component {\r\n  state = {\r\n    LogisticsCompanies: [\r\n      {\r\n        index: \"wsl\",\r\n        companyName: \"Allied Containers, Winspec Logistics Services Pte Ltd\",\r\n        address: \"No. 6 Tuas Ave 6, Singapore 639311\",\r\n        contactNumber: \"6558 6257\",\r\n        website: \"winspecgroup.com\",\r\n        openingHours:\r\n          \"Monday to Friday, from 8:30am to 5:30pm & Saturday, from 8:30am to 12:30pm, excluding PH\",\r\n        addLL: { lat: 1.3262, lng: 103.649817 }\r\n      }\r\n    ],\r\n    remarks: \"\",\r\n    currentCompany: \"\"\r\n  };\r\n\r\n  componentDidMount() {\r\n    //var company =  this.props.job.logisticsCompany;\r\n    var company = \"wsl\";\r\n    for (var i = 0; i < this.state.LogisticsCompanies.length; i++) {\r\n      if (this.state.LogisticsCompanies[i].index === company) {\r\n        this.setState({ currentCompany: this.state.LogisticsCompanies[i] });\r\n        break;\r\n      }\r\n    }\r\n  }\r\n\r\n  handleRemarks = e => {\r\n    this.setState({ remarks: e.target.value });\r\n  };\r\n\r\n  handleSaveRemarks = () => {\r\n    //Insert Backend Here\r\n    console.log(\"Saved Remarks for Logistics Company\");\r\n  };\r\n\r\n  getDropoffTime() {\r\n    var deliveryDate = new Date(this.props.job.vesselArrivalDateTime);\r\n    deliveryDate.setDate(deliveryDate.getHours() - deliveryInAdvance);\r\n    return (\r\n      \"\" +\r\n      deliveryDate.getDate() +\r\n      \"/\" +\r\n      deliveryDate.getMonth() +\r\n      \"/\" +\r\n      deliveryDate.getFullYear()\r\n    );\r\n  }\r\n\r\n  render() {\r\n    var deliveryDate = this.getDropoffTime();\r\n    var LCOpeningHours = this.state.currentCompany.openingHours;\r\n\r\n    const Map = withScriptjs(\r\n      withGoogleMap(props => (\r\n        <GoogleMap\r\n          defaultZoom={14}\r\n          defaultCenter={this.state.currentCompany.addLL}\r\n        >\r\n          <Marker position={this.state.currentCompany.addLL} />\r\n        </GoogleMap>\r\n      ))\r\n    );\r\n\r\n    return (\r\n      <div>\r\n        <Paper square={true} className=\"job-detail-paper\" elevation={0}>\r\n          <Container>\r\n            <Row style={{ marginBottom: 40 }}>\r\n              <Col>\r\n                <h3 className=\"job-detail-section-header\">Drop off Location</h3>\r\n                <p>\r\n                  {this.state.currentCompany.companyName},{\" \"}\r\n                  {this.state.currentCompany.address}\r\n                </p>\r\n              </Col>\r\n            </Row>\r\n            <Row style={{ marginBottom: 40 }}>\r\n              <Col>\r\n                <h3 className=\"job-detail-section-header\">Drop off Time</h3>\r\n                <p>\r\n                  Please Drop-off during office hours from {LCOpeningHours}.\r\n                </p>\r\n              </Col>\r\n            </Row>\r\n            {/*<Row>*/}\r\n            {/*    <Col>*/}\r\n            {/*        <h3 className='job-detail-section-header'>Remarks</h3>*/}\r\n            {/*        <FormControl as=\"textarea\" rows=\"4\" value={this.state.remarks} placeholder='Insert Remarks Here' onChange={this.handleRemarks} className='job-dropoff-remarks-text'/>*/}\r\n            {/*        /!*<Button onClick={this.handleSaveRemarks}>Save Changes</Button>*!/*/}\r\n            {/*    </Col>*/}\r\n            {/*</Row>*/}\r\n            <Row>\r\n              <Col>\r\n                <h3 className=\"job-detail-section-header\">Map</h3>\r\n                <Map\r\n                  googleMapURL=\"https://maps.googleapis.com/maps/api/js?key=AIzaSyCFL111s8lalFUoU08_GwV4O12asuIgo_w&v=3.exp&libraries=geometry,drawing,places\"\r\n                  loadingElement={<div style={{ height: `100%` }} />}\r\n                  containerElement={<div style={{ height: `400px` }} />}\r\n                  mapElement={<div style={{ height: `100%` }} />}\r\n                />\r\n              </Col>\r\n            </Row>\r\n          </Container>\r\n        </Paper>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = ({ auth }) => {\r\n  return { auth };\r\n};\r\n\r\nexport default withRouter(connect(mapStateToProps)(JobDropoffDetail));\r\n","import React, {Component} from 'react';\r\nimport {withRouter} from \"react-router-dom\";\r\nimport {connect} from \"react-redux\";\r\nimport {Paper} from \"@material-ui/core\";\r\nimport {Col, Container, Row, Button} from \"react-bootstrap\";/* \r\nimport JobCreatePriceTable from \"../../JobBilling/JobCreatePriceTable\"; */\r\n\r\nimport './JobBillingDetail.css';\r\nimport AffirmationModal from \"../../../ui/Modal/AffirmationModal\";\r\nimport axios from \"axios\";\r\n\r\nclass JobBillingDetail extends Component {\r\n    state = {\r\n        status: null,\r\n        showJobCancelModal: false,\r\n        paymentTrackers: [],\r\n        paymentTrackerList: [\r\n            {\r\n                index: 1,\r\n                label: 'Not Yet Invoiced',\r\n            },\r\n            {\r\n                index: 2,\r\n                label: 'Invoiced, Not Paid',\r\n            },\r\n            {\r\n                index: 3,\r\n                label: 'Paid',\r\n            },\r\n        ],\r\n    };\r\n\r\n    componentDidMount() {\r\n        const job = this.props.job;\r\n        const paymentTrackers = job.paymentTrackers;\r\n        if (this.props.auth.userType === \"Admin\") {\r\n            this.setState({status: job.isCancelled, paymentTrackers: paymentTrackers});\r\n        } else {\r\n            const userPaymentTrackers = paymentTrackers.filter(o => o.user === this.props.auth._id).sort((a, b) => {\r\n                return b.index - a.index;\r\n            });\r\n            this.setState({status: job.isCancelled, paymentTrackers: userPaymentTrackers});\r\n        }\r\n    };\r\n\r\n    updatePaymentTracker = (paymentTacker, user) => {\r\n        axios.post('/api/payment_trackers', {\r\n            index: paymentTacker.index,\r\n            label: paymentTacker.label,\r\n            jobId: this.props.job._id,\r\n            userId: user,\r\n        }).then(res => {\r\n            window.location.reload();\r\n        }).catch(err => {\r\n            console.log(err);\r\n        });\r\n    };\r\n\r\n    renderCancelProcedure = () => {\r\n        switch (this.state.status) {\r\n            case 'Pending':\r\n                return (\r\n                    <div className='job-billing-request-section'>\r\n                        <h3 className='job-billing-request-requested'>Cancellation Requested</h3>\r\n                        <span>We will do our best in cancelling this job for you.</span>\r\n                        <ul>\r\n                            <li>\r\n                                <span className='font-weight-bold'>If this item is canceled:</span>\r\n                                <br/>\r\n                                You will receive a confirmation email.\r\n                            </li>\r\n                            <li>\r\n                                <span className='font-weight-bold'>If this item is not canceled:</span>\r\n                                <br/>\r\n                                You will receive an email informing you<br/>that\r\n                                your request for cancellation is unsuccessful.\r\n                            </li>\r\n                        </ul>\r\n                    </div>\r\n                );\r\n            case 'Confirmed':\r\n                return (\r\n                    <div className='job-billing-request-section'>\r\n                        <h3 className='job-billing-request-success'>Cancellation Successful</h3>\r\n                        <p>Your request for cancellation has been approved.<br/>\r\n                            Your job has been successfully canceled.</p>\r\n                    </div>\r\n                );\r\n            case 'Denied':\r\n                return (\r\n                    <div className='job-billing-request-section'>\r\n                        <h3 className='job-billing-request-failure'>Cancellation Unsuccessful</h3>\r\n                        <span>Your request for cancellation was unsuccessful.<br/>\r\n                          We are not able to cancel your job.<br/>\r\n                          Contact us at service@simpfleet.com for any queries.</span>\r\n                    </div>\r\n                );\r\n            default:\r\n                return (\r\n                    <div className='job-billing-request-section'>\r\n                        <h6 className='job-billing-request-cancel-text' onClick={() => {\r\n                            this.setState({showJobCancelModal: true});\r\n                        }}>Request Cancellation</h6>\r\n                        <p>Please take note that if your cancellation is within 2 hours of the given loading time\r\n                            or vessel berthing time, we will charge the Full Rate Of The Delivery.</p>\r\n                    </div>\r\n                );\r\n        }\r\n    };\r\n\r\n    render() {\r\n\r\n        let renderAdminPaymentPanel;\r\n        if (this.props.auth.user.userType === \"Admin\") {\r\n            const partyList = this.state.paymentTrackers.reduce((a, tracker) => {\r\n                a.push(tracker.user);\r\n                return a;\r\n            }, []).filter((v, i, a) => a.indexOf(v) === i);\r\n            renderAdminPaymentPanel = partyList.map((id, index) => {\r\n                let userPaymentTracker = this.state.paymentTrackers.filter(o => o.user === id).sort((a, b) => {\r\n                    return b.index - a.index;\r\n                });\r\n                return (\r\n                    <div key={index} className='d-flex align-items-center'>\r\n                        <p>Payment Status: {userPaymentTracker[0].label}</p>\r\n                        {userPaymentTracker.length === 3 ? '' :\r\n                            <Button onClick={(e) => {\r\n                                const paymentIndex = userPaymentTracker.length;\r\n                                this.updatePaymentTracker(this.state.paymentTrackerList[paymentIndex], id)\r\n                            }}>Advance Payment</Button>}\r\n                    </div>\r\n                )\r\n            })\r\n        }\r\n\r\n        return (\r\n            <div>\r\n                <Paper square={true} className='job-detail-paper' elevation={0}>\r\n                    <Container>\r\n                        <Row>\r\n                            <Col xs={12} md={8}>\r\n                                {/*<h3 className='job-detail-section-header-price'>Price</h3>*/}\r\n                                {/*<JobCreatePriceTable jobItems={this.props.job.jobItems}/>*/}\r\n                                {this.state.paymentTrackers[0] ?\r\n                                    <div>\r\n                                        {this.props.auth.user.userType === \"Admin\" ?\r\n                                            <div>\r\n                                                {renderAdminPaymentPanel}\r\n                                            </div> :\r\n                                            <p>Payment Status: {this.state.paymentTrackers[0].label}</p>\r\n                                        }\r\n                                    </div> : ''}\r\n                                {this.renderCancelProcedure()}\r\n                                {\r\n                                    this.props.auth.userType === \"Admin\" &&\r\n                                    this.state.status === 'Pending'\r\n                                        ? <div>\r\n                                            <Button variant='danger' onClick={() => {\r\n                                                const job = this.props.job;\r\n                                                job.isCancelled = 'Denied';\r\n                                                this.props.saveJobCancellation(job);\r\n                                                this.setState({status: job.isCancelled});\r\n                                            }}>Decline</Button>\r\n                                            <Button variant='success' onClick={() => {\r\n                                                const job = this.props.job;\r\n                                                job.isCancelled = 'Confirmed';\r\n                                                this.props.saveJobCancellation(job);\r\n                                                this.setState({status: job.isCancelled});\r\n                                            }} style={{marginLeft: '15px'}}>Approve</Button>\r\n                                        </div>\r\n                                        : ''\r\n                                }\r\n                            </Col>\r\n                        </Row>\r\n                        <AffirmationModal\r\n                            modal={this.state.showJobCancelModal}\r\n                            toggle={(e) => this.setState({showJobCancelModal: !this.state.showJobCancelModal})}\r\n                            title=\"Cancellation\"\r\n                            affirmativeAction={() => {\r\n                                const job = this.props.job;\r\n                                job.isCancelled = 'Confirmed';\r\n                                this.props.saveJobCancellation(job);\r\n                                this.setState({status: job.isCancelled, showJobCancelModal: false});\r\n                            }}\r\n                            affirmativeText='Yes'\r\n                            cancelText=\"No\"\r\n                        >\r\n                            <p><strong>Are you sure you want to cancel job?</strong></p>\r\n                            <p>Please take note that if your cancellation is within 2 hours of the given loading time or vessel berthing time, we will charge the full rate of the delivery.</p>\r\n                        </AffirmationModal>\r\n                    </Container>\r\n                </Paper>\r\n            </div>\r\n\r\n        );\r\n    }\r\n};\r\n\r\nconst mapStateToProps = ({auth}) => {\r\n    return {auth};\r\n};\r\n\r\nexport default withRouter(connect(mapStateToProps)(JobBillingDetail));","import React, {Component} from 'react';\r\nimport axios from 'axios';\r\nimport queryString from 'query-string';\r\nimport {withRouter, Redirect} from \"react-router-dom\";\r\nimport {connect} from \"react-redux\";\r\n\r\nimport {\r\n    Paper,\r\n    Breadcrumbs,\r\n    Link,\r\n    Typography,\r\n    List,\r\n    ListItem,\r\n    ListItemText,\r\n    Snackbar,\r\n    IconButton,\r\n    Slide\r\n} from '@material-ui/core';\r\nimport NavigateNextIcon from '@material-ui/icons/NavigateNext';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport ShareIcon from '@material-ui/icons/Share';\r\n\r\nimport {Col, Container, Row, Button} from 'react-bootstrap'\r\n\r\nimport JobDetailCard from \"./JobDetailCard\";\r\nimport JobFilesDisplay from \"./Files/JobFilesDisplay\";\r\nimport JobShareModal from \"./JobShareModal/JobShareModal\";\r\nimport JobStatusDisplay from \"./JobStatusDisplay/JobStatusDisplay\";\r\nimport JobDropoffDetail from \"./JobDropoffDetail\";\r\nimport JobBillingDetail from \"./JobBillingDetail/JobBillingDetail\";\r\nimport './JobDetails.css';\r\nimport MediaQuery from \"react-responsive\";\r\nimport Tabs from \"@material-ui/core/Tabs\";\r\nimport Tab from \"@material-ui/core/Tab\";\r\nimport {withStyles} from '@material-ui/core/styles';\r\nimport JobShareSlide from \"../JobShareSlide/JobShareSlide\";\r\n\r\nimport Popover, {ArrowContainer} from \"react-tiny-popover\";\r\nimport {FocusOn} from \"react-focus-on\";\r\n\r\nconst AntTabs = withStyles({\r\n    root: {\r\n        borderBottom: '1px solid #e8e8e8',\r\n    },\r\n    indicator: {\r\n        backgroundColor: '#49AE86',\r\n    },\r\n})(Tabs);\r\n\r\nconst AntTab = withStyles(theme => ({\r\n    root: {\r\n        textTransform: 'none',\r\n        minWidth: 72,\r\n        fontWeight: theme.typography.fontWeightRegular,\r\n        marginRight: theme.spacing(0),\r\n        padding: 6,\r\n        fontFamily: 'Roboto',\r\n        '&:hover': {\r\n            color: '#707070',\r\n            opacity: 1,\r\n        },\r\n        '&$selected': {\r\n            color: '#707070',\r\n            fontWeight: theme.typography.fontWeightMedium,\r\n        },\r\n        '&:focus': {\r\n            color: '#707070',\r\n            outline: \"none\",\r\n        },\r\n    },\r\n    selected: {},\r\n}))(props => <Tab disableRipple {...props} />);\r\n\r\nclass JobDetails extends Component {\r\n    state = {\r\n        job: null,\r\n        jobLink: '',\r\n        activeScreen: 'jobDetails',\r\n        showSharingModal: false,\r\n        copied: false,\r\n        inputSelected: false,\r\n    };\r\n\r\n    componentDidMount() {\r\n        // Get job\r\n        axios.get(`/api/jobs/index?index=${queryString.parse(this.props.location.search).job}`).then(res => {\r\n            const job = res.data;\r\n            this.setState({job});\r\n\r\n            // Get job link\r\n            axios.get(`/api/job_links?jobIndex=${job.index}`).then(res => {\r\n                this.setState({jobLink: res.data});\r\n            }).catch(err => {\r\n                console.log(err);\r\n            });\r\n\r\n            const url = new URL(window.location.href);\r\n            const tab = url.searchParams.get(\"tab\");\r\n            if (tab !== null && tab !== '') {\r\n                this.setTabURL(tab);\r\n                this.setState({activeScreen: tab});\r\n            } else {\r\n                this.setState({activeScreen: 'jobDetails'});\r\n            }\r\n        }).catch(err => {\r\n            console.log(err);\r\n        });\r\n    }\r\n\r\n    setTabURL = (tabName) => {\r\n        const url = new URL(window.location.href);\r\n        url.searchParams.set(\"tab\", tabName);\r\n        window.history.pushState('page2', 'Title', url.toString());\r\n    };\r\n\r\n    generateInvitationLink = () => {\r\n        axios.post('/api/job_links', {\r\n            job: this.state.job\r\n        }).then(res => {\r\n            this.setState({jobLink: res.data});\r\n        }).catch(err => {\r\n            console.log(err);\r\n        });\r\n        this.setState({showSharingModal: true});\r\n    };\r\n\r\n    handleShareModalClose = () => {\r\n        this.setState({showSharingModal: false, inputSelected: false});\r\n    };\r\n\r\n    handleDrawerClick(key) {\r\n        this.setTabURL(key);\r\n        this.setState({activeScreen: key});\r\n    }\r\n\r\n    handleCopy = () => {\r\n        this.setState({copied: true});\r\n        window.setTimeout(() => {\r\n            this.setState({copied: false})\r\n        }, 5000)\r\n    };\r\n\r\n\r\n    handleClose = () => {\r\n        this.setState({copied: false})\r\n    };\r\n\r\n    SlideTransition = (props) => {\r\n        return <Slide {...props} direction=\"up\"/>\r\n    };\r\n\r\n    saveJobCancellation = (job) => {\r\n        // Save job details\r\n        axios.put('/api/jobs', {\r\n            job,\r\n            sendEmailUpdate: false\r\n        }).then(res => {\r\n            this.setState({job: res.data});\r\n        }).catch(err => {\r\n            console.log(err);\r\n        });\r\n    };\r\n\r\n    handleChangeTab = (event, newValue) => {\r\n        this.setTabURL(newValue);\r\n        this.setState({activeScreen: newValue})\r\n    };\r\n\r\n    handleSelect = (e) => {\r\n        this.setState({inputSelected: true});\r\n    };\r\n\r\n    render() {\r\n        const showComponent = () => {\r\n            switch (this.state.activeScreen) {\r\n                case 'jobDetails':\r\n                    return <JobDetailCard job={this.state.job}/>;\r\n                case 'document':\r\n                    return <JobFilesDisplay job={this.state.job}/>;\r\n                case 'status':\r\n                    return <JobStatusDisplay job={this.state.job}/>;\r\n                case 'dropoff':\r\n                    return <JobDropoffDetail job={this.state.job}/>;\r\n                case 'billing':\r\n                    return <JobBillingDetail job={this.state.job} saveJobCancellation={this.saveJobCancellation}/>;\r\n                default:\r\n                    return <JobDetailCard job={this.state.job}/>;\r\n            }\r\n        };\r\n\r\n        switch (this.props.auth) {\r\n            case null:\r\n                return <div></div>;\r\n            case false:\r\n                return <Redirect to=\"/\"/>;\r\n            default:\r\n                switch (this.state.job) {\r\n                    case null:\r\n                        return <div></div>;\r\n                    default:\r\n                        return (\r\n                            <div>\r\n                                <MediaQuery minWidth={769}>\r\n                                    <Container fluid style={{marginTop: 20, marginBottom: 30}}>\r\n                                        <Row>\r\n                                            <Col xs={12} md={{span: 10, offset: 1}}>\r\n                                                <Paper elevation={0} className='job-detail-breadcrumbs' square={true}>\r\n                                                    <Breadcrumbs separator={<NavigateNextIcon fontSize=\"small\"/>}\r\n                                                                 aria-label=\"Breadcrumb\">\r\n                                                        <Link href=\"#\" onClick={(e) => {\r\n                                                            this.props.history.push('/');\r\n                                                        }} className='job-detail-breadcrumbs-link'>\r\n                                                            Dashboard\r\n                                                        </Link>\r\n                                                        <h4>{this.state.job.vessel.vesselName.toUpperCase()}, {this.state.job.vessel.vesselIMOID}</h4>\r\n                                                    </Breadcrumbs>\r\n                                                </Paper>\r\n                                                <Paper square={true}>\r\n                                                    <Paper className='job-details-ship-title' square={true}>\r\n                                                        <div className='d-flex align-items-center'>\r\n                                                            <h1 className='job-detail-fonts'\r\n                                                                style={{marginBottom: '0px'}}>{this.state.job.vessel.vesselName.toUpperCase()} {this.state.job.vessel.vesselIMOID}</h1>\r\n                                                            <Button variant=\"outlined\"\r\n                                                                    onClick={this.generateInvitationLink}\r\n                                                                    className='job-details-share-button ml-auto'\r\n                                                                    href=\"#\">\r\n                                                                <ShareIcon className='job-detail-share-icon'/>\r\n                                                                Share\r\n                                                            </Button>\r\n                                                        </div>\r\n                                                    </Paper>\r\n                                                    <Paper square={true} className='job-detail-side-bar'>\r\n                                                        <Container fluid>\r\n                                                            <Row className='align-items-stretch'>\r\n                                                                <Col xs={3} className='col-no-padding job-details-menu'>\r\n                                                                    <Paper square={true}\r\n                                                                           className='job-details-menu-paper'\r\n                                                                           elevation={0}>\r\n                                                                        <List disablePadding={true}>\r\n                                                                            <ListItem button key='jobDetails'\r\n                                                                                      onClick={() => {\r\n                                                                                          this.handleDrawerClick('jobDetails')\r\n                                                                                      }}\r\n                                                                                      className={this.state.activeScreen === 'jobDetails' ? 'job-details-nav-active' : 'job-details-nav'}>\r\n                                                                                <ListItemText>Job Details</ListItemText>\r\n                                                                            </ListItem>\r\n                                                                            <ListItem button key='status'\r\n                                                                                      onClick={() => {\r\n                                                                                          this.handleDrawerClick('status')\r\n                                                                                      }}\r\n                                                                                      className={this.state.activeScreen === 'status' ? 'job-details-nav-active' : 'job-details-nav'}>\r\n                                                                                <ListItemText>Status</ListItemText>\r\n                                                                            </ListItem>\r\n                                                                            <ListItem button key='document'\r\n                                                                                      onClick={() => {\r\n                                                                                          this.handleDrawerClick('document')\r\n                                                                                      }}\r\n                                                                                      className={this.state.activeScreen === 'document' ? 'job-details-nav-active' : 'job-details-nav'}>\r\n                                                                                <ListItemText>Document</ListItemText>\r\n                                                                            </ListItem>\r\n                                                                            <ListItem button key='dropoff'\r\n                                                                                      onClick={() => {\r\n                                                                                          this.handleDrawerClick('dropoff')\r\n                                                                                      }}\r\n                                                                                      className={this.state.activeScreen === 'dropoff' ? 'job-details-nav-active' : 'job-details-nav'}>\r\n                                                                                <ListItemText>Drop Off</ListItemText>\r\n                                                                            </ListItem>\r\n                                                                            <ListItem button key='billing'\r\n                                                                                      onClick={() => {\r\n                                                                                          this.handleDrawerClick('billing')\r\n                                                                                      }}\r\n                                                                                      className={this.state.activeScreen === 'billing' ? 'job-details-nav-active' : 'job-details-nav'}>\r\n                                                                                <ListItemText>Billing</ListItemText>\r\n                                                                            </ListItem>\r\n                                                                        </List>\r\n                                                                    </Paper>\r\n                                                                </Col>\r\n                                                                <Col xs={9}\r\n                                                                     className='col-no-padding job-detail-content-border-rad'\r\n                                                                     as={Paper}>\r\n                                                                    {showComponent()}\r\n                                                                </Col>\r\n                                                            </Row>\r\n                                                        </Container>\r\n                                                    </Paper>\r\n                                                </Paper>\r\n\r\n                                                <div>\r\n                                                    <JobShareModal show={this.state.showSharingModal}\r\n                                                                   Close={this.handleShareModalClose}\r\n                                                                   joblinkurl={this.state.jobLink.url}\r\n                                                                   job={this.state.job}\r\n                                                                   copied={this.handleCopy}\r\n                                                    />\r\n                                                    <Snackbar anchorOrigin={{horizontal: 'left', vertical: 'bottom'}}\r\n                                                              open={this.state.copied}\r\n                                                              message={<span\r\n                                                                  id=\"message-id\">Link Has Been Copied</span>}\r\n                                                              action={\r\n                                                                  <IconButton\r\n                                                                      key=\"close\"\r\n                                                                      color=\"inherit\"\r\n                                                                      onClick={this.handleClose}\r\n                                                                  >\r\n                                                                      <CloseIcon/>\r\n                                                                  </IconButton>\r\n                                                              }\r\n                                                              TransitionComponent={this.SlideTransition}\r\n                                                    />\r\n                                                </div>\r\n                                            </Col>\r\n                                        </Row>\r\n                                    </Container>\r\n                                </MediaQuery>\r\n                                <MediaQuery maxWidth={768}>\r\n                                    <Container fluid\r\n                                               style={{ padding: \"5% 8%\", backgroundColor: '#F7F8F7'}}>\r\n                                        <Row>\r\n                                            <Paper elevation={0} square={true}\r\n                                                   className='d-flex align-items-center w-100' style={{backgroundColor: '#F7F8F7'}}>\r\n                                                <Breadcrumbs separator={<NavigateNextIcon fontSize=\"small\"/>}\r\n                                                             aria-label=\"Breadcrumb\">\r\n                                                    <Link href=\"#\" onClick={(e) => {\r\n                                                        this.props.history.push('/');\r\n                                                    }} className='job-detail-breadcrumbs-link'>\r\n                                                        Dashboard\r\n                                                    </Link>\r\n                                                    <h4 className='job-details-ship-title-font'>{this.state.job.vessel.vesselName.toUpperCase()}, {this.state.job.vessel.vesselIMOID}</h4>\r\n                                                </Breadcrumbs>\r\n                                                <div className='ml-auto'>\r\n                                                    <FocusOn enabled={this.props.isPopoverOpen}\r\n                                                             onClickOutside={this.props.handlePopoverClose}\r\n                                                             onEscapeKey={this.props.handlePopoverClose}>\r\n                                                        <Popover\r\n                                                            isOpen={this.props.isPopoverOpen}\r\n                                                            position={'bottom'}\r\n                                                            padding={10}\r\n                                                            containerStyle={{marginTop: '-10px'}}\r\n                                                            windowBorderPadding={15}\r\n                                                            onClickOutside={this.props.handlePopoverClose}\r\n                                                            content={({position, targetRect, popoverRect}) => (\r\n                                                                <ArrowContainer // if you'd like an arrow, you can import the ArrowContainer!\r\n                                                                    position={position}\r\n                                                                    targetRect={targetRect}\r\n                                                                    popoverRect={popoverRect}\r\n                                                                    arrowColor={'#666666'}\r\n                                                                    arrowSize={10}\r\n                                                                    arrowStyle={{opacity: 1}}\r\n                                                                >\r\n                                                                    <div\r\n                                                                        style={{\r\n                                                                            backgroundColor: '#666666',\r\n                                                                            opacity: 1,\r\n                                                                            width: \"80vw\",\r\n                                                                            padding: 16,\r\n                                                                            borderRadius: '5px'\r\n                                                                        }}\r\n                                                                        onClick={this.props.handlePopoverClose}\r\n                                                                    ><span style={{\r\n                                                                        fontFamily: 'Roboto',\r\n                                                                        fontSize: '14px',\r\n                                                                        color: 'white'\r\n                                                                    }}>Click on this button to share the job with\r\n                                                            anyone who is sending items to the same\r\n                                                            vessel!</span>\r\n                                                                    </div>\r\n                                                                </ArrowContainer>\r\n                                                            )}\r\n                                                        >\r\n                                                            <IconButton onClick={this.generateInvitationLink}>\r\n                                                                <ShareIcon\r\n                                                                    className='job-detail-share-icon-button'/>\r\n                                                            </IconButton>\r\n                                                        </Popover>\r\n                                                    </FocusOn>\r\n                                                </div>\r\n                                            </Paper>\r\n                                        </Row>\r\n                                        <Row>\r\n                                            <AntTabs value={this.state.activeScreen} onChange={this.handleChangeTab} variant=\"fullWidth\" centered className='w-100'>\r\n                                                <AntTab label='Job Details' value='jobDetails'/>\r\n                                                <AntTab label='Status' value='status'/>\r\n                                                <AntTab label='Documents' value='document'/>\r\n                                                <AntTab label='Drop-off' value='dropoff'/>\r\n                                                <AntTab label='Billing' value='billing'/>\r\n                                            </AntTabs>\r\n                                        </Row>\r\n                                        <Row>\r\n                                            <Paper square={true} elevation={5} className='w-100'>\r\n                                                {showComponent()}\r\n                                            </Paper>\r\n                                        </Row>\r\n                                        <div>\r\n                                            <JobShareSlide open={this.state.showSharingModal}\r\n                                                           onClose={this.handleShareModalClose}\r\n                                                           joblinkurl={this.state.jobLink.url}\r\n                                                           job={this.state.job}\r\n                                                           inputSelected={this.state.inputSelected}\r\n                                                           handleSelect={this.handleSelect}/>\r\n                                        </div>\r\n                                    </Container>\r\n                                </MediaQuery>\r\n                            </div>\r\n                        );\r\n                }\r\n        }\r\n    }\r\n}\r\n\r\n\r\nconst mapStateToProps = ({auth}) => {\r\n    return {auth};\r\n};\r\n\r\n\r\nexport default withRouter(connect(mapStateToProps)(JobDetails));","import React from \"react\";\r\n\r\nexport default function UserApprovalModal(props) {\r\n  return (\r\n    <React.Fragment>\r\n      <div className=\"modal-dialog\" role=\"document\">\r\n        <div className=\"modal-content\">\r\n          <div className=\"modal-header\">\r\n            <h5 className=\"modal-title\" id=\"exampleModalLabel\">\r\n              User Approval\r\n            </h5>\r\n            <button\r\n              type=\"button\"\r\n              className=\"close\"\r\n              data-dismiss=\"modal\"\r\n              aria-label=\"Close\"\r\n            >\r\n              <span aria-hidden=\"true\">&times;</span>\r\n            </button>\r\n          </div>\r\n          <div className=\"modal-body\">\r\n            Are you sure to {props.status} {props.user} to login?\r\n          </div>\r\n          <div className=\"modal-footer\">\r\n            <button\r\n              type=\"button\"\r\n              className=\"btn btn-secondary\"\r\n              data-dismiss=\"modal\"\r\n            >\r\n              Cancel\r\n            </button>\r\n            <button\r\n              type=\"button\"\r\n              className={`btn btn-${\r\n                props.status === \"disable\" ? \"danger\" : \"primary\"\r\n              }`}\r\n              onClick={() => props.onUpdateIsApprove(props.users)}\r\n              data-dismiss=\"modal\"\r\n            >\r\n              {props.status}\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </React.Fragment>\r\n  );\r\n}\r\n","import React, { Component } from \"react\";\r\nimport { Container } from \"reactstrap\";\r\nimport { Row, Table, Col } from \"reactstrap\";\r\nimport axios from \"axios\";\r\nimport UserApprovalModal from \"./UserApprovalModal\";\r\n\r\nclass UserApproval extends Component {\r\n  state = {\r\n    users: null\r\n  };\r\n\r\n  componentDidMount() {\r\n    axios\r\n      .get(`/api/users`)\r\n      .then(res => {\r\n        let users = res.data;\r\n        this.setState({ users });\r\n      })\r\n      .catch(err => {\r\n        console.log(err);\r\n      });\r\n  }\r\n\r\n  onUpdateIsApprove = users => {\r\n    console.log(users);\r\n    axios.put(`/api/users`, users).then(\r\n      axios\r\n        .get(`/api/users`)\r\n        .then(res => {\r\n          let users = res.data;\r\n          this.setState({ users });\r\n        })\r\n        .catch(err => {\r\n          console.log(err);\r\n        })\r\n    );\r\n  };\r\n\r\n  render() {\r\n    switch (this.state.users) {\r\n      case null:\r\n        return <div></div>;\r\n      default:\r\n        const content = Object.keys(this.state.users).map((key, index) => {\r\n          const users = this.state.users[key];\r\n          const compObj = users.userCompany;\r\n          let compName = \"\";\r\n          if (compObj === null || compObj === undefined) {\r\n            compName = \"\";\r\n          } else {\r\n            compName = compObj.name;\r\n          }\r\n          return (\r\n            <React.Fragment key={index}>\r\n              <tr>\r\n                <td>{users.firstName === \"\" ? \"-\" : users.firstName}</td>\r\n                <td>{users.lastName === \"\" ? \"-\" : users.lastName}</td>\r\n                <td>{users.email === \"\" ? \"-\" : users.email}</td>\r\n                <td>{compName === \"\" ? \"-\" : compName}</td>\r\n                <td>\r\n                  {users.contactNumber === \"\" ? \"-\" : users.contactNumber}\r\n                </td>\r\n                <td>\r\n                  {users.isApproved === true ? \"approved\" : \"not yet approved\"}\r\n                </td>\r\n                <td>\r\n                  <button\r\n                    className={`btn btn-${\r\n                      users.isApproved ? \"danger\" : \"primary\"\r\n                    }`}\r\n                    /* onClick={() => this.onUpdateIsApprove(users) } */\r\n                    data-toggle=\"modal\"\r\n                    data-target={`#approvemodal${users._id}`}\r\n                  >\r\n                    {users.isApproved ? \"disable\" : \"enable\"}\r\n                  </button>\r\n                </td>\r\n              </tr>\r\n              {/* modal approve */}\r\n              <div\r\n                className=\"modal fade\"\r\n                id={`approvemodal${users._id}`}\r\n                tabIndex=\"-1\"\r\n                role=\"dialog\"\r\n                aria-labelledby=\"exampleModalLabel\"\r\n                aria-hidden=\"true\"\r\n              >\r\n                <UserApprovalModal\r\n                  user={\r\n                    users.firstName === \"\" ? \"this account\" : users.firstName\r\n                  }\r\n                  status={users.isApproved ? \"disable\" : \"enable\"}\r\n                  onUpdateIsApprove={this.onUpdateIsApprove}\r\n                  users={users}\r\n                />\r\n              </div>\r\n            </React.Fragment>\r\n          );\r\n        });\r\n        return (\r\n          <Container fluid>\r\n            <br />\r\n            <Row>\r\n              <Col cs=\"12\" md={{ size: 12, offset: 0 }} className=\"text-center\">\r\n                <h1>User Approval</h1>\r\n              </Col>\r\n              <Col cs=\"12\" md={{ size: 12, offset: 0 }}>\r\n                <Table hover bordered responsive striped>\r\n                  <thead>\r\n                    <tr>\r\n                      <th>First name</th>\r\n                      <th>Last name</th>\r\n                      <th>Email</th>\r\n                      <th>Company</th>\r\n                      <th>Contact</th>\r\n                      <th>Status</th>\r\n                      <th>Action</th>\r\n                    </tr>\r\n                  </thead>\r\n                  <tbody>{content}</tbody>\r\n                </Table>\r\n              </Col>\r\n            </Row>\r\n          </Container>\r\n        );\r\n    }\r\n  }\r\n}\r\nexport default UserApproval;\r\n","import React from \"react\";\r\n\r\nexport default function LogisticsUserApprovalModal(props) {\r\n  return (\r\n    <React.Fragment>\r\n      <div className=\"modal-dialog\" role=\"document\">\r\n        <div className=\"modal-content\">\r\n          <div className=\"modal-header\">\r\n            <h5 className=\"modal-title\" id=\"exampleModalLabel\">\r\n              User Approval\r\n            </h5>\r\n            <button\r\n              type=\"button\"\r\n              className=\"close\"\r\n              data-dismiss=\"modal\"\r\n              aria-label=\"Close\"\r\n            >\r\n              <span aria-hidden=\"true\">&times;</span>\r\n            </button>\r\n          </div>\r\n          <div className=\"modal-body\">\r\n            Are you sure to {props.status} {props.user} to login?\r\n          </div>\r\n          <div className=\"modal-footer\">\r\n            <button\r\n              type=\"button\"\r\n              className=\"btn btn-secondary\"\r\n              data-dismiss=\"modal\"\r\n            >\r\n              Cancel\r\n            </button>\r\n            <button\r\n              type=\"button\"\r\n              className={`btn btn-${\r\n                props.status === \"disable\" ? \"danger\" : \"primary\"\r\n              }`}\r\n              onClick={() => props.onUpdateIsApprove(props.users)}\r\n              data-dismiss=\"modal\"\r\n            >\r\n              {props.status}\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </React.Fragment>\r\n  );\r\n}\r\n","import React, { Component } from \"react\";\r\nimport { Container } from \"reactstrap\";\r\nimport { Row, Table, Col } from \"reactstrap\";\r\nimport axios from \"axios\";\r\nimport LogisticsUserApprovalModal from \"./LogisticsUserApprovalModal\";\r\n\r\nclass LogisticsUserApproval extends Component {\r\n  state = {\r\n    users: null\r\n  };\r\n\r\n  componentDidMount() {\r\n    axios\r\n      .get(`/api/logistics_users`)\r\n      .then(res => {\r\n        let users = res.data;\r\n        this.setState({ users });\r\n      })\r\n      .catch(err => {\r\n        console.log(err);\r\n      });\r\n  }\r\n\r\n  onUpdateIsApprove = users => {\r\n    console.log(users);\r\n    axios.put(`/api/logistics_users`, users).then(\r\n      axios\r\n        .get(`/api/logistics_users`)\r\n        .then(res => {\r\n          let users = res.data;\r\n          this.setState({ users });\r\n        })\r\n        .catch(err => {\r\n          console.log(err);\r\n        })\r\n    );\r\n  };\r\n\r\n  render() {\r\n    switch (this.state.users) {\r\n      case null:\r\n        return <div></div>;\r\n      default:\r\n        const content = Object.keys(this.state.users).map((key, index) => {\r\n          const users = this.state.users[key];\r\n          const compObj = users.company;\r\n          let compName = \"\";\r\n          if (compObj === null || compObj === undefined) {\r\n            compName = \"\";\r\n          } else {\r\n            compName = compObj.name;\r\n          }\r\n          return (\r\n            <React.Fragment key={index}>\r\n              <tr>\r\n                <td>{users.firstName === \"\" ? \"-\" : users.firstName}</td>\r\n                <td>{users.lastName === \"\" ? \"-\" : users.lastName}</td>\r\n                <td>{users.email === \"\" ? \"-\" : users.email}</td>\r\n                <td>{compName === \"\" ? \"-\" : compName}</td>\r\n                <td>\r\n                  {users.contactNumber === \"\" ? \"-\" : users.contactNumber}\r\n                </td>\r\n                <td>\r\n                  {users.isApproved === true ? \"approved\" : \"not yet approved\"}\r\n                </td>\r\n                <td>\r\n                  <button\r\n                    className={`btn btn-${\r\n                      users.isApproved ? \"danger\" : \"primary\"\r\n                    }`}\r\n                    /* onClick={() => this.onUpdateIsApprove(users) } */\r\n                    data-toggle=\"modal\"\r\n                    data-target={`#approvemodal${users._id}`}\r\n                  >\r\n                    {users.isApproved ? \"disable\" : \"enable\"}\r\n                  </button>\r\n                </td>\r\n              </tr>\r\n              {/* modal approve */}\r\n              <div\r\n                className=\"modal fade\"\r\n                id={`approvemodal${users._id}`}\r\n                tabIndex=\"-1\"\r\n                role=\"dialog\"\r\n                aria-labelledby=\"exampleModalLabel\"\r\n                aria-hidden=\"true\"\r\n              >\r\n                <LogisticsUserApprovalModal\r\n                  user={\r\n                    users.firstName === \"\" ? \"this account\" : users.firstName\r\n                  }\r\n                  status={users.isApproved ? \"disable\" : \"enable\"}\r\n                  onUpdateIsApprove={this.onUpdateIsApprove}\r\n                  users={users}\r\n                />\r\n              </div>\r\n            </React.Fragment>\r\n          );\r\n        });\r\n        return (\r\n          <Container fluid>\r\n            <br />\r\n            <Row>\r\n              <Col cs=\"12\" md={{ size: 12, offset: 0 }} className=\"text-center\">\r\n                <h1>Logistics User Approval</h1>\r\n              </Col>\r\n              <Col cs=\"12\" md={{ size: 12, offset: 0 }}>\r\n                <Table hover bordered responsive striped>\r\n                  <thead>\r\n                    <tr>\r\n                      <th>First name</th>\r\n                      <th>Last name</th>\r\n                      <th>Email</th>\r\n                      <th>Company</th>\r\n                      <th>Contact</th>\r\n                      <th>Status</th>\r\n                      <th>Action</th>\r\n                    </tr>\r\n                  </thead>\r\n                  <tbody>{content}</tbody>\r\n                </Table>\r\n              </Col>\r\n            </Row>\r\n          </Container>\r\n        );\r\n    }\r\n  }\r\n}\r\nexport default LogisticsUserApproval;\r\n","import React, { Component } from \"react\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport MaterialTable, { MTableBodyRow } from \"material-table\";\r\nimport Axios from \"axios\";\r\n\r\nclass EditUsers extends Component {\r\n  state = {\r\n    columns: [\r\n      { title: \"First Name\", field: \"firstName\" },\r\n      { title: \"Last Name\", field: \"lastName\" },\r\n      { title: \"Email\", field: \"email\" },\r\n      { title: \"Contact Number\", field: \"contactNumber\" },\r\n      { title: \"Company Name\", field: \"userCompany.name\", editable: \"never\" },\r\n      { title: \"User Type\", field: \"userType\", editable: \"never\" }\r\n    ],\r\n    logisticsColumns: [\r\n      { title: \"First Name\", field: \"firstName\" },\r\n      { title: \"Last Name\", field: \"lastName\" },\r\n      { title: \"Email\", field: \"email\" },\r\n      { title: \"Contact Number\", field: \"contactNumber\" },\r\n      { title: \"Company Name\", field: \"company.name\", editable: \"never\" },\r\n      { title: \"User Type\", field: \"userType\", editable: \"never\" }\r\n    ],\r\n    data: [],\r\n    logisticsData: []\r\n  };\r\n\r\n  componentDidMount() {\r\n    /* get user */\r\n    Axios.get(\"api/users\").then(res =>\r\n      this.setState({\r\n        data: res.data\r\n      })\r\n    );\r\n    /* get logistic user */\r\n    Axios.get(\"api/logistics_users\").then(res =>\r\n      this.setState({\r\n        logisticsData: res.data\r\n      })\r\n    );\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"ml-3 mr-3\">\r\n        {/* title */}\r\n        <h3 className=\"job-summary-header\">Edit Users</h3>\r\n        {/* user */}\r\n        <MaterialTable\r\n          title=\"User\"\r\n          columns={this.state.columns}\r\n          data={this.state.data}\r\n          editable={{\r\n            onRowUpdate: (newData, oldData) =>\r\n              new Promise(resolve => {\r\n                setTimeout(() => {\r\n                  resolve();\r\n                  if (oldData) {\r\n                    this.setState(prevState => {\r\n                      const data = [...prevState.data];\r\n                      data[data.indexOf(oldData)] = newData;\r\n                      return { ...prevState, data };\r\n                    });\r\n                    /* update db */\r\n                    Axios.put(\"/api/users/update\", { newData });\r\n                  }\r\n                }, 600);\r\n              })\r\n          }}\r\n          components={{\r\n            Container: props => <Paper {...props} elevation={0} />,\r\n            Row: props => <MTableBodyRow {...props} className=\"rows\" />\r\n          }}\r\n          options={{\r\n            sorting: true,\r\n            padding: \"dense\",\r\n            headerStyle: {\r\n              fontFamily: \"Roboto\",\r\n              fontSize: \"14px\",\r\n              fontWeight: \"bold\",\r\n              color: \"#707070\"\r\n            },\r\n            actionsColumnIndex: 12\r\n          }}\r\n        />\r\n        {/* logistics user */}\r\n        <MaterialTable\r\n          title=\"Logistics User\"\r\n          columns={this.state.logisticsColumns}\r\n          data={this.state.logisticsData}\r\n          editable={{\r\n            onRowUpdate: (newData, oldData) =>\r\n              new Promise(resolve => {\r\n                setTimeout(() => {\r\n                  resolve();\r\n                  if (oldData) {\r\n                    this.setState(prevState => {\r\n                      const logisticsData = [...prevState.logisticsData];\r\n                      logisticsData[logisticsData.indexOf(oldData)] = newData;\r\n                      return { ...prevState, logisticsData };\r\n                    });\r\n                    /* update db */\r\n                    Axios.put(\"/api/logistics_users/update\", { newData });\r\n                  }\r\n                }, 600);\r\n              })\r\n          }}\r\n          components={{\r\n            Container: props => <Paper {...props} elevation={0} />,\r\n            Row: props => <MTableBodyRow {...props} className=\"rows\" />\r\n          }}\r\n          options={{\r\n            sorting: true,\r\n            padding: \"dense\",\r\n            headerStyle: {\r\n              fontFamily: \"Roboto\",\r\n              fontSize: \"14px\",\r\n              fontWeight: \"bold\",\r\n              color: \"#707070\"\r\n            },\r\n            actionsColumnIndex: 12\r\n          }}\r\n        />\r\n      </div>\r\n    );\r\n  }\r\n}\r\nexport default EditUsers;\r\n","import React, { Component } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport \"./App.css\";\r\nimport { BrowserRouter as Router, Route, Switch } from \"react-router-dom\";\r\nimport { fetchUser } from \"./actions/fetchActions\";\r\nimport VIP from \"./components/common/PrivateRoute\";\r\nimport ExNavbar from \"./components/layout/ExNavbar\";\r\nimport Footer from \"./components/layout/Footer\";\r\nimport Login from \"./components/auth/Login\";\r\nimport Dashboard from \"./components/Dashboard/Dashboard\";\r\nimport History from \"./components/History/History\";\r\nimport JobAssignment from \"./components/Job/JobAssignment/JobAssignment\";\r\nimport SideMenuSlider from \"./components/SideMenuSlider/SideMenuSlider\";\r\nimport JobDetails from \"./components/Job/JobDetails/JobDetails\";\r\nimport UserApproval from \"./components/UserApproval/UserApproval\";\r\nimport LogisticsUserApproval from \"./components/LogisticsUserApproval/LogisticsUserApproval\";\r\nimport EditUsers from \"./components/EditUsers/EditUsers\";\r\n\r\nclass DynamicImport extends Component {\r\n  state = {\r\n    component: null\r\n  };\r\n\r\n  componentDidMount() {\r\n    this.props.load().then(component => {\r\n      this.setState(() => ({\r\n        component: component.default ? component.default : component\r\n      }));\r\n    });\r\n  }\r\n\r\n  render() {\r\n    return this.props.children(this.state.component);\r\n  }\r\n}\r\nconst MainNavbar = props => (\r\n  <DynamicImport load={() => import(\"./components/layout/MainNavbar.js\")}>\r\n    {Component =>\r\n      Component === null ? <p>Loading</p> : <Component {...props} />\r\n    }\r\n  </DynamicImport>\r\n);\r\nconst Home = props => (\r\n  <DynamicImport load={() => import(\"./components/content/Home.js\")}>\r\n    {Component =>\r\n      Component === null ? <p>Loading</p> : <Component {...props} />\r\n    }\r\n  </DynamicImport>\r\n);\r\nconst Analytics = props => (\r\n  <DynamicImport load={() => import(\"./components/Analytics/Analytics.js\")}>\r\n    {Component =>\r\n      Component === null ? <p>Loading</p> : <Component {...props} />\r\n    }\r\n  </DynamicImport>\r\n);\r\nclass App extends Component {\r\n  state = {\r\n    openMenu: false,\r\n    isPopoverOpen: false\r\n  };\r\n\r\n  handleMenuStateChange = state => {\r\n    this.setState({ openMenu: state.isOpen });\r\n  };\r\n\r\n  handlePopoverOpen = () => {\r\n    this.setState({ isPopoverOpen: true });\r\n  };\r\n\r\n  handleOpenMenu = () => {\r\n    this.setState({ openMenu: true });\r\n  };\r\n\r\n  handleCloseMenu = () => {\r\n    this.setState({ openMenu: false });\r\n  };\r\n\r\n  render() {\r\n    const { isAuthenticated, user } = this.props.auth;\r\n    return (\r\n      <div className=\"App\">\r\n        <Router>\r\n          {isAuthenticated ? (\r\n            <SideMenuSlider\r\n              open={this.state.openMenu}\r\n              handleCloseMenu={this.handleCloseMenu}\r\n              handleMenuStateChange={this.handleMenuStateChange}\r\n              handlePopoverOpen={this.handlePopoverOpen}\r\n            />\r\n          ) : (\r\n            \"\"\r\n          )}\r\n          <Switch>\r\n            {isAuthenticated ? (\r\n              <Route\r\n                exact\r\n                path=\"/\"\r\n                render={props => (\r\n                  <MainNavbar {...props} handleOpenMenu={this.handleOpenMenu} />\r\n                )}\r\n              />\r\n            ) : (\r\n              <Route exact path=\"/\" component={ExNavbar} />\r\n            )}\r\n            <Route\r\n              path=\"/\"\r\n              render={props => (\r\n                <MainNavbar {...props} handleOpenMenu={this.handleOpenMenu} />\r\n              )}\r\n            />\r\n          </Switch>\r\n          <Route exact path=\"/\" component={Home} />\r\n          <div className=\"\">\r\n            <Route exact path=\"/login\" component={Login} />\r\n            <Route exact path=\"/dashboard\" component={Dashboard} />\r\n            <Route exact path=\"/history\" component={History} />\r\n            <Route\r\n              exact\r\n              path=\"/job_details\"\r\n              render={props => (\r\n                <JobDetails\r\n                  {...props}\r\n                  handlePopoverClose={this.handlePopoverClose}\r\n                  isPopoverOpen={this.state.isPopoverOpen}\r\n                />\r\n              )}\r\n            ></Route>\r\n            {user.userType === \"Admin\" ? (\r\n              <React.Fragment>\r\n                <Route path=\"/user_approval\" component={UserApproval} />\r\n                <Route exact path=\"/job_assignment\" component={JobAssignment} />\r\n                <Route\r\n                  exact\r\n                  path=\"/logistics_user_approval\"\r\n                  component={LogisticsUserApproval}\r\n                />\r\n                <Route path=\"/analytics\" component={Analytics} />\r\n                <Route path=\"/edit_users\" component={EditUsers} />\r\n              </React.Fragment>\r\n            ) : null}\r\n          </div>\r\n          <Footer />\r\n        </Router>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n  auth: state.auth\r\n});\r\n\r\nexport default connect(mapStateToProps, fetchUser)(App);\r\n","import axios from \"axios\";\r\n\r\nimport { FETCH_USER } from \"./types\";\r\n\r\nexport const fetchUser = () => async dispatch => {\r\n  const res = await axios.get(\"/api/users/fetch\");\r\n  await dispatch({ type: FETCH_USER, payload: res.data });\r\n  if (res === {}) {\r\n    window.location.href = \"/\";\r\n  }\r\n};\r\n","// This optional code is used to register a services worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.1/8 is considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our services worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a services worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // services worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a services ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register services worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous services worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during services worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the services worker can be found. If it can't reload the page.\r\n  fetch(swUrl)\r\n    .then(response => {\r\n      // Ensure services worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No services worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready.then(registration => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}\r\n","import isEmpty from \"../validation/is-empty\";\r\n\r\nimport { FETCH_USER } from \"../actions/types\";\r\n\r\nconst initialState = {\r\n  isAuthenticated: false,\r\n  user: {}\r\n};\r\n\r\nexport default function(state = initialState, action) {\r\n  switch (action.type) {\r\n    case FETCH_USER:\r\n      return {\r\n        ...state,\r\n        isAuthenticated: !isEmpty(action.payload),\r\n        user: action.payload\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n","import { GET_ERRORS } from \"../actions/types\";\r\n\r\nconst initialState = {};\r\n\r\nexport default function(state = initialState, action) {\r\n  switch (action.type) {\r\n    case GET_ERRORS:\r\n      return action.payload;\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n","import { combineReducers } from \"redux\";\r\nimport fetchReducer from \"./fetchReducer\";\r\nimport errorReducer from \"./errorReducer\";\r\nexport default combineReducers({\r\n  auth: fetchReducer,\r\n  errors: errorReducer\r\n});\r\n","import { createStore, applyMiddleware, compose } from \"redux\";\r\nimport thunk from \"redux-thunk\";\r\nimport rootReducer from \"./reducers\";\r\n\r\nconst initialState = {};\r\n\r\nconst middleware = [thunk];\r\n\r\nconst store = createStore(\r\n  rootReducer,\r\n  initialState,\r\n  compose(\r\n    applyMiddleware(...middleware),\r\n    window.__REDUX_DEVTOOLS_EXTENSION__ && window.__REDUX_DEVTOOLS_EXTENSION__()\r\n  )\r\n);\r\n\r\nexport default store;\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport \"./index.css\";\r\nimport App from \"./App\";\r\nimport * as serviceWorker from \"./serviceWorker\";\r\nimport { Provider } from \"react-redux\";\r\nimport store from \"./store\";\r\n\r\nReactDOM.render(\r\n  <Provider store={store}>\r\n    <App />\r\n  </Provider>,\r\n  document.getElementById(\"root\")\r\n);\r\nserviceWorker.unregister();\r\n","export const GET_ERRORS = \"GET_ERRORS\";\r\nexport const FETCH_USER = \"FETCH_USER\";\r\n","import \"./SidebarMenu.css\";\r\nimport React, { Component } from \"react\";\r\nimport { NavLink, withRouter } from \"react-router-dom\";\r\nimport { connect } from \"react-redux\";\r\n\r\nimport Fab from \"@material-ui/core/Fab\";\r\nimport Grid from \"@material-ui/core/Grid\";\r\nimport axios from \"axios\";\r\n\r\nimport CreateJobModal from \"../Job/CreateJobModal\";\r\n\r\nclass SidebarMenu extends Component {\r\n  state = {\r\n    sidebarOpen: true,\r\n    showModal: false,\r\n    showHistory: false\r\n  };\r\n\r\n  componentDidMount() {\r\n    axios\r\n      .get(`/api/jobs?archive_only=true&user_only=true`)\r\n      .then(res => {\r\n        this.setState({\r\n          showHistory: res.data.length >= 1\r\n        });\r\n      })\r\n      .catch(err => {\r\n        console.log(err);\r\n      });\r\n  }\r\n\r\n  handleOpenModal = () => {\r\n    this.setState({ showModal: true });\r\n  };\r\n\r\n  handleCloseModal = () => {\r\n    this.setState({ showModal: false });\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <div id=\"sidebar-body\">\r\n        <Grid container spacing={3}>\r\n          {/* {this.props.auth.user.userType !== \"Admin\" ? (\r\n            <Grid item xs={12} className=\"d-flex justify-content-center\">\r\n              <Fab\r\n                variant=\"extended\"\r\n                size=\"medium\"\r\n                className=\"side-bar-create-job-button\"\r\n                onClick={this.handleOpenModal}\r\n              >\r\n                + Create job\r\n              </Fab>\r\n            </Grid>\r\n          ) : (\r\n            \"\"\r\n          )} */}\r\n          <Grid item xs={12}>\r\n            <NavLink to=\"/\" className=\"sidebar-link\">\r\n              Upcoming Jobs\r\n            </NavLink>\r\n          </Grid>\r\n          <Grid item xs={12}>\r\n            <NavLink to=\"/dashboard\" className=\"sidebar-link\">\r\n              Dashboard\r\n            </NavLink>\r\n          </Grid>\r\n          {this.state.showHistory ? (\r\n            <Grid item xs={12}>\r\n              <NavLink to=\"/history\" className=\"sidebar-link\">\r\n                History\r\n              </NavLink>\r\n            </Grid>\r\n          ) : (\r\n            \"\"\r\n          )}\r\n          {this.props.auth.user.userType === \"Admin\" ? (\r\n            <Grid item xs={12}>\r\n              <NavLink to=\"/job_assignment\" className=\"sidebar-link\">\r\n                Job Assignment\r\n              </NavLink>\r\n            </Grid>\r\n          ) : (\r\n            \"\"\r\n          )}\r\n          {this.props.auth.user.userType === \"Admin\" ? (\r\n            <Grid item xs={12}>\r\n              <NavLink to=\"/analytics\" className=\"sidebar-link\">\r\n                Analytics\r\n              </NavLink>\r\n            </Grid>\r\n          ) : (\r\n            \"\"\r\n          )}\r\n          {/*{this.props.auth.user.userType === \"Admin\" ? (*/}\r\n          {/*  <Grid item xs={12}>*/}\r\n          {/*    <NavLink to=\"/delivery_schedule\" className=\"sidebar-link\">*/}\r\n          {/*      Job Schedule*/}\r\n          {/*    </NavLink>*/}\r\n          {/*  </Grid>*/}\r\n          {/*) : (*/}\r\n          {/*  \"\"*/}\r\n          {/*)}*/}\r\n          {this.props.auth.user.userType === \"Admin\" ? (\r\n            <React.Fragment>\r\n              <Grid item xs={12}>\r\n                <NavLink to=\"/user_approval\" className=\"sidebar-link\">\r\n                  User Approval\r\n                </NavLink>\r\n              </Grid>\r\n              <Grid item xs={12}>\r\n                <NavLink to=\"/logistics_user_approval\" className=\"sidebar-link\">\r\n                  Logistics User Approval\r\n                </NavLink>\r\n              </Grid>\r\n              <Grid item xs={12}>\r\n                <NavLink to=\"/edit_users\" className=\"sidebar-link\">\r\n                  Edit Users\r\n                </NavLink>\r\n              </Grid>\r\n            </React.Fragment>\r\n          ) : (\r\n            \"\"\r\n          )}\r\n        </Grid>\r\n\r\n        <CreateJobModal\r\n          isOpen={this.state.showModal}\r\n          handleCloseModal={this.handleCloseModal}\r\n          fullScreen={false}\r\n        />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = ({ auth }) => {\r\n  return { auth };\r\n};\r\n\r\nexport default withRouter(connect(mapStateToProps)(SidebarMenu));\r\n","import React, {Component} from 'react';\r\nimport axios from 'axios';\r\n\r\nimport Button from '@material-ui/core/Button'\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport InputGroup from 'react-bootstrap/InputGroup'\r\nimport ButtonB from 'react-bootstrap/Button'\r\nimport FormControl from 'react-bootstrap/FormControl'\r\nimport {CopyToClipboard} from 'react-copy-to-clipboard';\r\n\r\nimport TagsInput from 'react-tagsinput';\r\nimport LinesEllipsis from 'react-lines-ellipsis'\r\n\r\nimport 'react-tagsinput/react-tagsinput.css'\r\n\r\nimport './JobShareModal.css';\r\n\r\nimport Snackbar from \"@material-ui/core/Snackbar\";\r\nimport Slide from \"@material-ui/core/Slide\";\r\n\r\nfunction defaultRenderTag(props) {\r\n    let {tag, key, disabled, onRemove, classNameRemove, getTagDisplayValue, ...other} = props\r\n    return (\r\n        <div key={key} {...other}>\r\n            <div style={{maxWidth:400, wordBreak:\"break-all\"}}>\r\n                <LinesEllipsis\r\n                    text={getTagDisplayValue(tag)}\r\n                    maxLine='1'\r\n                    ellipsis='...'\r\n                    trimRight\r\n                    basedOn='letters'\r\n                />\r\n            </div>\r\n            {!disabled &&\r\n            <a className={classNameRemove} onClick={(e) => onRemove(key)}/>\r\n            }\r\n        </div>\r\n    )\r\n}\r\n\r\nclass JobShareModal extends Component {\r\n    // Props: Close=Function to handle close, joburllink=url link string, show=boolean to show modal, job=job object//\r\n    state = {\r\n        copied: false,\r\n        emailList: [],\r\n        message: '',\r\n        emailInputs: '',\r\n        mobileWebShare: false,\r\n        showSuccessSnackBar: false,\r\n    };\r\n\r\n    componentDidMount() {\r\n        // Set whether mobile web share is possible\r\n        this.setState({\r\n            mobileWebShare: navigator.share !== undefined && navigator.share\r\n        });\r\n    }\r\n\r\n    handleMessageChange = (e) => {\r\n        this.setState({message: e.target.value});\r\n    };\r\n\r\n    updateEmailList = (emailList) => {\r\n        this.setState({emailList})\r\n    };\r\n\r\n    handleEmailInputChange = (value) => {\r\n        this.setState({emailInputs: value});\r\n    };\r\n\r\n    handleInputClear = () => {\r\n        this.setState({emailInputs: ''})\r\n    };\r\n\r\n\r\n    //For Mobile Sharing\r\n    webShareJobLink = () => {\r\n        if (this.state.mobileWebShare) {\r\n            navigator.share({\r\n                title: `Job Invitation - ${this.props.job.jobId}`,\r\n                text: `Click this link to join my delivery job to ${this.props.job.vessel.vesselName}`,\r\n                url: this.props.joblinkurl\r\n            })\r\n                .then(() => console.log('Successful share'))\r\n                .catch((error) => console.log('Error sharing', error));\r\n        }\r\n    };\r\n\r\n    sendEmail = () => {\r\n        const emailList = this.state.emailList;\r\n        if (this.state.emailInputs.includes('@')) {\r\n            emailList.push(this.state.emailInputs)\r\n        }\r\n\r\n        for (let i = 0; i < emailList.length; i++) {\r\n            const email = emailList[i];\r\n\r\n            if (email.trim() !== \"\") {\r\n                axios.post('/api/job_links/share', {\r\n                    email,\r\n                    job: this.props.job,\r\n                    message: this.state.message,\r\n                }).then(res => {\r\n                    this.setState({showSuccessSnackBar: true, emailList: [], emailInputs: '', message: ''});\r\n                    window.setTimeout(() => this.setState({showSuccessSnackBar: false}), 5000)\r\n                }).catch(err => {\r\n                    console.log(err);\r\n                });\r\n            }\r\n        }\r\n    };\r\n\r\n    SlideTransition = (props) => {\r\n        return <Slide {...props} direction=\"up\"/>\r\n    };\r\n\r\n    handleSnackBarClose = () => {\r\n        this.setState({showSuccessSnackBar: false})\r\n    };\r\n\r\n\r\n    render() {\r\n        return (\r\n            <div>\r\n                <Dialog open={this.props.show} onClose={this.props.Close} maxWidth=\"sm\" fullWidth={true}>\r\n                    <DialogTitle id=\"alert-dialog-title\" className='job-share-modal-top'>\r\n                        <div className='d-flex align-items-center'>\r\n                            <p className='job-share-modal-title'>{this.props.job.vessel.vesselName.toUpperCase()}, {this.props.job.vessel.vesselIMOID}</p>\r\n                            <IconButton aria-label=\"Close\" className='job-share-modal-close ml-auto'\r\n                                        onClick={this.props.Close}>\r\n                                <CloseIcon/>\r\n                            </IconButton>\r\n                        </div>\r\n                    </DialogTitle>\r\n                    <DialogContent className='job-share-modal-content'>\r\n                        <div className='job-share-modal-copy'>\r\n                            <h6 className='job-share-modal-copy-title'>Do you know anyone sending items\r\n                                to {this.props.job.vessel.vesselName.toUpperCase()}, {this.props.job.vessel.vesselIMOID}?</h6>\r\n                            <InputGroup className='job-share-modal-url'>\r\n                                <FormControl\r\n                                    value={this.props.joblinkurl}\r\n                                    disabled={true}\r\n                                    className='job-share-modal-url-link'\r\n                                />\r\n                                <InputGroup.Append>\r\n                                    <CopyToClipboard text={this.props.joblinkurl}\r\n                                                     onCopy={this.props.copied}\r\n                                    >\r\n                                        {\r\n                                            this.state.mobileWebShare\r\n                                                ? <ButtonB variant=\"outline-secondary\"\r\n                                                           className='job-share-modal-url-link'\r\n                                                           onClick={this.webShareJobLink}>Share</ButtonB>\r\n                                                : <ButtonB variant=\"outline-secondary\"\r\n                                                           className='job-share-modal-url-link'>Copy Link</ButtonB>\r\n                                        }\r\n                                    </CopyToClipboard>\r\n                                </InputGroup.Append>\r\n                            </InputGroup>\r\n                            <p style={{\r\n                                fontFamily: 'Roboto',\r\n                                fontSize: '10px',\r\n                                color: '#707070',\r\n                                marginTop: 5,\r\n                            }}><i>Please ensure that the other party using the link has an account and is logged in\r\n                                before entering the above link.</i></p>\r\n\r\n                        </div>\r\n                        <div className='job-share-modal-email'>\r\n                            <h6 className='job-share-modal-copy-title'>People</h6>\r\n                            <InputGroup>\r\n                                <div style={{width: '100%'}}>\r\n                                    <TagsInput value={this.state.emailList} onChange={this.updateEmailList}\r\n                                               className='form-control job-share-email-inputbox'\r\n                                               onChangeInput={this.handleEmailInputChange}\r\n                                               inputValue={this.state.emailInputs}\r\n                                               inputProps={{\r\n                                                   className: 'react-tagsinput-input job-share-email-input',\r\n                                                   placeholder: 'Please Enter Email Address'\r\n                                               }}\r\n                                               tagProps={{\r\n                                                   className: 'react-tagsinput-tag job-share-email-tag',\r\n                                                   classNameRemove: 'react-tagsinput-remove'\r\n                                               }}\r\n                                               validate={this.validate}\r\n                                               addKeys={[9, 13, 186]}\r\n                                               renderTag={defaultRenderTag}\r\n\r\n                                    />\r\n                                    <p style={{\r\n                                        fontFamily: 'Roboto',\r\n                                        fontSize: '10px',\r\n                                        color: '#707070',\r\n                                        marginBottom: '8px',\r\n                                    }}>for multiple recipients, please use semicolon to separate</p>\r\n                                </div>\r\n                            </InputGroup>\r\n                            <FormControl placeholder='Add a note (Optional)' value={this.state.message} as=\"textarea\"\r\n                                         rows=\"4\" onChange={this.handleMessageChange}\r\n                                         className='job-share-modal-message'/>\r\n                        </div>\r\n                    </DialogContent>\r\n                    <DialogActions className='d-flex justify-content-center job-share-modal-bottom'>\r\n                        <Button onClick={(e) => {\r\n                            if (this.state.emailList.length === 0 && this.state.emailInputs === '') {\r\n                                alert('Email Cannot be Empty!')\r\n                            } else {\r\n                                this.props.Close();\r\n                                this.sendEmail();\r\n                            }\r\n                        }} variant=\"contained\" size=\"large\" className='job-share-modal-button'>\r\n                            Send\r\n                        </Button>\r\n                    </DialogActions>\r\n                </Dialog>\r\n                <Snackbar anchorOrigin={{horizontal: 'left', vertical: 'bottom'}}\r\n                          open={this.state.showSuccessSnackBar}\r\n                          message={<span id=\"message-id\">Message has been sent!</span>}\r\n                          action={\r\n                              <IconButton\r\n                                  key=\"close\"\r\n                                  color=\"inherit\"\r\n                                  onClick={this.handleSnackBarClose}\r\n                              >\r\n                                  <CloseIcon/>\r\n                              </IconButton>\r\n                          }\r\n                          TransitionComponent={this.SlideTransition}\r\n                />\r\n            </div>\r\n        );\r\n    }\r\n\r\n    validate = (tag) => {\r\n        return tag.includes('@')\r\n    }\r\n\r\n}\r\n\r\nexport default JobShareModal;","import React, { Component } from \"react\";\r\nimport axios from \"axios\";\r\n\r\nimport InputGroup from \"react-bootstrap/InputGroup\";\r\nimport ButtonB from \"react-bootstrap/Button\";\r\nimport FormControl from \"react-bootstrap/FormControl\";\r\nimport { CopyToClipboard } from \"react-copy-to-clipboard\";\r\n\r\nimport { Drawer } from \"@material-ui/core\";\r\n\r\nimport \"./JobShareSlide.css\";\r\nimport Divider from \"@material-ui/core/Divider\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport clsx from \"clsx\";\r\nimport TagsInput from \"react-tagsinput\";\r\n\r\nclass JobShareSlide extends Component {\r\n  state = {\r\n    copied: false,\r\n    emailList: [],\r\n    message: \"\",\r\n    emailInputs: \"\",\r\n    mobileWebShare: false,\r\n    showSuccessSnackBar: false\r\n  };\r\n\r\n  componentDidMount() {\r\n    // Set whether mobile web share is possible\r\n    this.setState({\r\n      mobileWebShare: navigator.share !== undefined && navigator.share\r\n    });\r\n  }\r\n\r\n  handleMessageChange = e => {\r\n    this.setState({ message: e.target.value });\r\n  };\r\n\r\n  updateEmailList = emailList => {\r\n    this.setState({ emailList });\r\n  };\r\n\r\n  handleEmailInputChange = value => {\r\n    this.setState({ emailInputs: value });\r\n  };\r\n\r\n  handleInputClear = () => {\r\n    this.setState({ emailInputs: \"\" });\r\n  };\r\n\r\n  webShareJobLink = () => {\r\n    if (this.state.mobileWebShare) {\r\n      navigator\r\n        .share({\r\n          title: `Job Invitation - ${this.props.job.jobId}`,\r\n          text: `Click this link to join my delivery job to ${this.props.job.vessel.vesselName}`,\r\n          url: this.props.joblinkurl\r\n        })\r\n        .then(() => console.log(\"Successful share\"))\r\n        .catch(error => console.log(\"Error sharing\", error));\r\n    }\r\n  };\r\n\r\n  sendEmail = () => {\r\n    const emailInputs = this.state.emailInputs;\r\n    const emailList = emailInputs.split(\";\");\r\n\r\n    for (let i = 0; i < emailList.length; i++) {\r\n      const email = emailList[i];\r\n\r\n      if (email.trim() !== \"\") {\r\n        axios\r\n          .post(\"/api/job_links/share\", {\r\n            email,\r\n            job: this.props.job\r\n          })\r\n          .catch(err => {\r\n            console.log(err);\r\n          });\r\n      }\r\n    }\r\n  };\r\n\r\n  render() {\r\n    let renderContent;\r\n    if (this.props.inputSelected) {\r\n      renderContent = (\r\n        <div className=\"job-share-modal-copy\">\r\n          <h6 className=\"job-share-modal-copy-title\">Message</h6>\r\n          <FormControl\r\n            placeholder=\"Add a note (Optional)\"\r\n            value={this.state.message}\r\n            as=\"textarea\"\r\n            rows=\"6\"\r\n            onChange={this.handleMessageChange}\r\n            className=\"job-share-modal-message\"\r\n          />\r\n          <Button\r\n            onClick={e => {\r\n              this.props.onClose();\r\n              this.sendEmail();\r\n            }}\r\n            variant=\"contained\"\r\n            size=\"large\"\r\n            className=\"job-share-modal-button\"\r\n            fullWidth\r\n          >\r\n            Send\r\n          </Button>\r\n        </div>\r\n      );\r\n    } else {\r\n      renderContent = (\r\n        <div className=\"job-share-modal-copy\">\r\n          <h6 className=\"job-share-modal-copy-title\">\r\n            Do you know anyone sending items to{\" \"}\r\n            {this.props.job.vessel.vesselName.toUpperCase()},{\" \"}\r\n            {this.props.job.vessel.vesselIMOID}?\r\n          </h6>\r\n          <InputGroup className=\"job-share-modal-url\">\r\n            <FormControl\r\n              onChange={() => {}}\r\n              value={this.props.joblinkurl}\r\n              disabled={true}\r\n              className=\"job-share-modal-url-link\"\r\n            />\r\n            <InputGroup.Append>\r\n              <CopyToClipboard\r\n                text={this.props.joblinkurl}\r\n                onCopy={this.props.copied}\r\n              >\r\n                {this.state.mobileWebShare ? (\r\n                  <ButtonB\r\n                    variant=\"outline-secondary\"\r\n                    className=\"job-share-modal-url-link\"\r\n                    onClick={this.webShareJobLink}\r\n                  >\r\n                    Share\r\n                  </ButtonB>\r\n                ) : (\r\n                  <ButtonB\r\n                    variant=\"outline-secondary\"\r\n                    className=\"job-share-modal-url-link\"\r\n                  >\r\n                    Copy Link\r\n                  </ButtonB>\r\n                )}\r\n              </CopyToClipboard>\r\n            </InputGroup.Append>\r\n          </InputGroup>\r\n        </div>\r\n      );\r\n    }\r\n\r\n    return (\r\n      <Drawer\r\n        anchor=\"bottom\"\r\n        open={this.props.open}\r\n        onClose={this.props.onClose}\r\n        PaperProps={{\r\n          className: clsx(\r\n            \"MuiPaper-root MuiPaper-elevation16 MuiDrawer-paper MuiDrawer-paperAnchorBottom drawer-job-share\",\r\n            this.props.inputSelected && \"full-height-drawer\"\r\n          )\r\n        }}\r\n      >\r\n        <h3 onClick={this.props.onClose} className=\"job-slide-cancel\">\r\n          Cancel\r\n        </h3>\r\n        <Divider className=\"job-share-drawer-divider\" />\r\n        <Paper elevation={0} className=\"job-share-drawer-paper\">\r\n          <div className=\"job-share-modal-email\">\r\n            <h6 className=\"job-share-modal-copy-title\">Send to</h6>\r\n            <InputGroup>\r\n              <div style={{ width: \"100%\" }} onClick={this.props.handleSelect}>\r\n                <TagsInput\r\n                  value={this.state.emailList}\r\n                  onChange={this.updateEmailList}\r\n                  className=\"form-control job-share-email-inputbox\"\r\n                  onChangeInput={this.handleEmailInputChange}\r\n                  inputValue={this.state.emailInputs}\r\n                  inputProps={{\r\n                    className: \"react-tagsinput-input job-share-email-input\",\r\n                    placeholder: \"Please Enter Email Address\"\r\n                  }}\r\n                  tagProps={{\r\n                    className: \"react-tagsinput-tag job-share-email-tag\",\r\n                    classNameRemove: \"react-tagsinput-remove\"\r\n                  }}\r\n                  validate={this.validate}\r\n                  addKeys={[9, 13, 186]}\r\n                />\r\n                <p\r\n                  style={{\r\n                    fontFamily: \"Roboto\",\r\n                    fontSize: \"10px\",\r\n                    color: \"#707070\",\r\n                    marginBottom: \"8px\"\r\n                  }}\r\n                >\r\n                  for multiple recipients, please use semicolon to separate\r\n                </p>\r\n              </div>\r\n            </InputGroup>\r\n          </div>\r\n          {renderContent}\r\n        </Paper>\r\n      </Drawer>\r\n    );\r\n  }\r\n}\r\n\r\nexport default JobShareSlide;\r\n","import 'rc-time-picker/assets/index.css';\r\nimport \"react-datepicker/dist/react-datepicker.css\"\r\nimport 'react-bootstrap-typeahead/css/Typeahead.css';\r\nimport 'react-bootstrap-typeahead/css/Typeahead-bs4.css';\r\nimport \"./CreateJob.css\";\r\nimport React, { Component } from \"react\";\r\nimport { withRouter } from \"react-router-dom\";\r\nimport { connect } from \"react-redux\";\r\nimport { Container, Row, Col, Button } from \"react-bootstrap\";\r\nimport _ from \"lodash\";\r\nimport {Form, FormGroup, Input, Label, FormText} from \"reactstrap\";\r\nimport FormRB from 'react-bootstrap/Form';\r\nimport {Divider, Popover, FormControlLabel, Checkbox} from \"@material-ui/core\";\r\nimport TimePicker from 'rc-time-picker';\r\nimport moment from \"moment\";\r\n/* import JobItemInput from \"./JobDetails/Form/JobItemInput\";\r\nimport DateInputComponent from \"./JobDetails/Form/DateInputComponent\"; */\r\nimport {AsyncTypeahead, Typeahead, Highlighter, TypeaheadMenu} from 'react-bootstrap-typeahead';\r\nimport FormControl from \"@material-ui/core/FormControl\";\r\nimport RadioGroup from \"@material-ui/core/RadioGroup\";\r\nimport FormLabel from \"@material-ui/core/FormLabel\";\r\nimport Radio from \"@material-ui/core/Radio\";\r\n\r\nclass CreateJob extends Component {\r\n  state = {\r\n    jobId: \"\",\r\n    vesselIMOID: \"\",\r\n    vesselName: \"\",\r\n    vesselCallsign: \"\",\r\n    vesselLoadingLocation: \"PSA\",\r\n    vesselArrivalDateTime: new Date().toISOString(),\r\n    uploadedFile: null,\r\n    jobItems: [],\r\n    jobOfflandItems: [],\r\n    careOffParties: [],\r\n    remarks: \"\",\r\n    psaBerthingDateTime: \"\",\r\n    psaUnberthingDateTime: \"\",\r\n    vesselLoadingDateTime: new Date().toISOString(),\r\n    createDSA: false,\r\n    activeStep: 0,\r\n    steps: [\r\n      { title: \"Vessel Information\" },\r\n      { title: \"Vessel Location\" },\r\n      { title: \"Item Details\" },\r\n      { title: \"Confirmation\" }\r\n    ],\r\n    ItemsDeliverAnchorEl: null,\r\n    ItemsOfflandAnchorEl: null,\r\n    job: null,\r\n    vessels: [],\r\n    vesselLighterName: \"\",\r\n    //vesselLighterDateTime: new Date().toISOString(),\r\n    vesselLighterLocation: \"Marina South Wharves\",\r\n    vesselLighterRemarks: \"\",\r\n    otherVesselLocation: \"\",\r\n    submitButtonActive: true,\r\n    isLoading: false,\r\n    vesselQueryResults: [],\r\n    vesselSelected: \"\"\r\n  };\r\n\r\n  componentDidMount() {\r\n  }\r\n\r\n  handleJobIdChange = (e) => {\r\n      this.setState({jobId: e.target.value});\r\n  };\r\n\r\n  handleVesselLoadingLocationChange = (e) => {\r\n      this.setState({vesselLoadingLocation: e.target.value});\r\n  };\r\n\r\n  handleRemarksChange = (e) => {\r\n      this.setState({remarks: e.target.value});\r\n  };\r\n\r\n  handleVesselLighterRemarksChange = (e) => {\r\n      this.setState({vesselLighterRemarks: e.target.value});\r\n  };\r\n\r\n  validateItems = (items) => {\r\n      // Check for empty item entries\r\n      const filteredItems = [];\r\n      for (let i = 0; i < items.length; i++) {\r\n          const item = items[i];\r\n          if (item.quantity !== '' && item.uom !== '') {\r\n              delete item['id'];\r\n              filteredItems.push(item);\r\n          }\r\n      }\r\n      return filteredItems;\r\n  };\r\n\r\n  validateCareOffs = () => {\r\n      // Check for empty care-off entries\r\n      const careOffParties = this.state.careOffParties;\r\n      const filteredCareOffParties = [];\r\n      for (let i = 0; i < careOffParties.length; i++) {\r\n          const careOffParty = careOffParties[i];\r\n          if (careOffParty.companyName !== '' && careOffParty.personName !== '' && careOffParty.contactNumber !== '' && careOffParty.email !== '') {\r\n              delete careOffParty['id'];\r\n              filteredCareOffParties.push(careOffParty);\r\n          }\r\n      }\r\n      return filteredCareOffParties;\r\n  };\r\n\r\n  onSubmit = async (e) => {\r\n      e.preventDefault();\r\n\r\n      // Check for empty item entries\r\n      const filteredItems = this.validateItems(this.state.jobItems);\r\n      const filteredJobOfflandItems = this.validateItems(this.state.jobOfflandItems);\r\n\r\n      // Check for empty care-off entries\r\n      const filteredCareOffParties = this.validateCareOffs();\r\n\r\n      /* if (this.state.vesselQueryResults.length > 1) {\r\n          let vesselSelected = this.state.vesselQueryResults.filter((o) => o.vesselIMOID === this.state.vesselSelected)[0]\r\n          await this.setState({\r\n              vesselIMOID: vesselSelected.vesselIMOID ? vesselSelected.vesselIMOID : '',\r\n              vesselName: vesselSelected ? vesselSelected.vesselName : '',\r\n              vesselCallsign: vesselSelected ? vesselSelected.vesselCallsign : '',\r\n              isLoading: false,\r\n          });\r\n      }\r\n */\r\n      /* if (this.state.vesselIMOID === '' && this.state.vesselCallsign === '') {\r\n          window.alert('Either Vessel IMO or Callsign must be filled');\r\n      } else if (this.state.vesselName === '') {\r\n          window.alert('Vessel Name must be filled');\r\n      } else if (this.state.vesselLoadingLocation !== 'PSA' && (new Date(this.state.vesselLoadingDateTime) - new Date()) < 0) {\r\n          window.alert('Vessel Loading Time cannot be before now')\r\n      } else if (this.state.vesselLoadingDateTime === '') {\r\n          window.alert('Vessel Loading Date and Time must be filled');\r\n      } else if (isNaN(this.state.vesselIMOID) || this.state.vesselIMOID.length !== 7) {\r\n          window.alert('Vessel IMO must contain exactly 7 digits only');\r\n      } else if (filteredItems.length < 1) {\r\n          window.alert('At least one item must be submitted for delivery!');\r\n      } else if (this.state.vesselArrivalDateTime === '') {\r\n          window.alert('Vessel ETA must be filled');\r\n      } else {\r\n          // Disable submit button to prevent duplicate bookings\r\n          this.setState({submitButtonActive: false});\r\n\r\n          // Create job\r\n          axios.post('/api/jobs', {\r\n              jobId: this.state.jobId,\r\n              vesselIMOID: this.state.vesselIMOID,\r\n              vesselCallsign: this.state.vesselCallsign,\r\n              vesselName: this.state.vesselName,\r\n              vesselLoadingLocation: this.state.vesselLoadingLocation,\r\n              vesselArrivalDateTime: this.state.vesselArrivalDateTime,\r\n              jobItems: filteredItems,\r\n              jobOfflandItems: filteredJobOfflandItems,\r\n              careOffParties: filteredCareOffParties,\r\n              remarks: this.state.remarks,\r\n              psaBerthingDateTime: this.state.psaBerthingDateTime,\r\n              psaUnberthingDateTime: this.state.psaUnberthingDateTime,\r\n              vesselLoadingDateTime: this.state.vesselLoadingDateTime,\r\n              createDSA: this.state.createDSA,\r\n              vesselLighterName: this.state.vesselLighterName,\r\n              vesselLighterLocation: this.state.vesselLighterLocation,\r\n              vesselLighterRemarks: this.state.vesselLighterRemarks,\r\n              otherVesselLocation: this.state.otherVesselLocation\r\n          }).then(res => {\r\n              const job = res.data;\r\n\r\n              // Set job tracker to job approved automatically\r\n              axios.post('/api/job_trackers', {\r\n                  index: 2,\r\n                  title: 'Job booking confirmed',\r\n                  description: 'We have confirmed your job booking. Please deliver the items to \\'No. 6 Tuas Ave 6, Singapore 639311\\' at least 24 hours before the vessel arrives.',\r\n                  trackingType: 'Electronic',\r\n                  jobId: job._id\r\n              }).then(res => {\r\n                  axios.post('/api/job_links', {\r\n                      job\r\n                  }).then(res => {\r\n                      this.setState({activeStep: 2, job});\r\n                  }).catch(err => {\r\n                      console.log(err);\r\n                  });\r\n              }).catch(err => {\r\n                  console.log(err);\r\n              });\r\n          }).catch(err => {\r\n              console.log(err);\r\n          });\r\n      } */this.setState({activeStep: 2/* , job */});\r\n  };\r\n\r\n  handleVesselArrivalTimeChange = (value) => {\r\n      this.setState({vesselArrivalDateTime: value.toDate().toISOString()});\r\n  };\r\n\r\n  handleVesselArrivalDateChange = (vesselArrivalDateTime) => {\r\n      this.setState({vesselArrivalDateTime: vesselArrivalDateTime.toISOString()});\r\n  };\r\n\r\n  handleVesselLoadingTimeChange = (value) => {\r\n      this.setState({vesselLoadingDateTime: value.toDate().toISOString()});\r\n  };\r\n\r\n  handleVesselLoadingDateChange = (vesselLoadingDateTime) => {\r\n      this.setState({vesselLoadingDateTime: vesselLoadingDateTime.toISOString()});\r\n  };\r\n\r\n  handleVesselLighterNameChange = (e) => {\r\n      this.setState({vesselLighterName: e.target.value});\r\n  };\r\n\r\n  handleVesselLighterLocationChange = (e) => {\r\n      this.setState({vesselLighterLocation: e.target.value});\r\n  };\r\n\r\n  handleOtherVesselLocationChange = (e) => {\r\n      this.setState({otherVesselLocation: e.target.value});\r\n  };\r\n\r\n  handleDeliverClose = () => {\r\n      this.setState({ItemsDeliverAnchorEl: null})\r\n  };\r\n\r\n  handleOfflandClose = () => {\r\n      this.setState({ItemsOfflandAnchorEl: null})\r\n  };\r\n\r\n  handleCreateDSAChange = (e) => {\r\n      this.setState({createDSA: e.target.checked})\r\n  };\r\n\r\n  handleNextStep = async () => {\r\n      const filteredItems = this.validateItems(this.state.jobItems);\r\n      const filteredJobOfflandItems = this.validateItems(this.state.jobOfflandItems);\r\n\r\n      // Check for empty care-off entries\r\n      const filteredCareOffParties = this.validateCareOffs();\r\n\r\n      const now = new Date();\r\n\r\n      /* if (this.state.vesselIMOID === '' && this.state.vesselCallsign === '') { */\r\n          this.setState({isLoading: true});\r\n          const queryVesselName = this.state.vesselName;\r\n\r\n          try {\r\n              /* const res = await axios.get(`/api/vessels/search?query=${queryVesselName}`); */\r\n              /* const result = res.data;\r\n              if (result.length === 1) {\r\n                  this.setState({\r\n                      vesselIMOID: result[0].vesselIMOID ? result[0].vesselIMOID : '',\r\n                      vesselName: result[0] ? result[0].vesselName : '',\r\n                      vesselCallsign: result[0] ? result[0].vesselCallsign : '',\r\n                      isLoading: false,\r\n                  });\r\n              } else if (result.length > 1) {\r\n                  this.setState({vesselQueryResults: result})\r\n              } else {\r\n                  this.setState({isLoading: false});\r\n                  window.alert(`There is no such Vessel with Name: ${queryVesselName}`)\r\n                  return;\r\n              } */\r\n          } catch (err) {\r\n              console.log(err);\r\n          }/* \r\n      } */\r\n\r\n\r\n      /* if (this.state.vesselName === '') {\r\n          window.alert('Vessel Name must be filled');\r\n      } else if (this.state.vesselLoadingLocation !== 'PSA' && (new Date(this.state.vesselLoadingDateTime) - now.setHours( now.getHours() + 2 )) < 0) {\r\n          window.alert('Vessel Loading Time cannot be 2 hours before Arrival of Vessel')\r\n      } else if (this.state.vesselLoadingDateTime === '') {\r\n          window.alert('Vessel Loading Date and Time must be filled');\r\n      } else if (filteredItems.length < 1) {\r\n          window.alert('At least one item must be submitted for delivery!');\r\n      } else if (this.state.vesselArrivalDateTime === '') {\r\n          window.alert('Vessel ETA must be filled');\r\n      } else if (this.state.vesselLoadingLocation === 'Others' && this.state.otherVesselLocation === '') {\r\n          window.alert('Vessel Loading Location must be filled');\r\n      } else { */\r\n          this.setState({activeStep: 1});\r\n      /* } */\r\n  }; \r\n\r\n  handlePaymentBack = () => {\r\n      this.setState({activeStep: 0});\r\n  };\r\n\r\n  renderText = () => {\r\n      return (\r\n          <div className='d-flex flex-column'>\r\n              <span className='job-create-section-input-label' style={{marginBottom: '0px'}}><strong>I would like SimpFleet to produce DSA(JP LTs) or Entry/Export Permit(PSA) for me</strong></span>\r\n              <span className='job-create-section-label-helper-text'><i>It would cost extra fees if Simpfleet produces the DSA(JP LTs) or Entry/Export Permit(PSA)</i></span>\r\n          </div>);\r\n  };\r\n\r\n  renderJobTimeInfo = () => {\r\n      const vesselLoadingTime = moment(this.state.vesselLoadingDateTime);\r\n      const vesselArrivalTime = moment(this.state.vesselArrivalDateTime);\r\n      switch (this.state.vesselLoadingLocation) {\r\n          case \"PSA\":\r\n              return <div></div>;\r\n          default:\r\n              return (\r\n                  <div>\r\n                      <Row className='job-create-section'>\r\n                          <Col xs={12} sm={9}>\r\n                              <div className='d-flex align-items-center job-create-section-heading'>\r\n                                  <div className='job-create-green-circle'><strong>2</strong></div>\r\n                                  <h1 className='job-create-section-header'>Time</h1>\r\n                              </div>\r\n                              <FormGroup>\r\n                                  <Label className='job-create-section-label'>\r\n                                      {\r\n                                          this.state.vesselLoadingLocation === 'Jurong Port'\r\n                                              ? 'Lighter Loading Date & Time'\r\n                                              : 'Vessel Loading Date & Time'\r\n                                      }\r\n                                  </Label>\r\n                                  <Container fluid style={{paddingRight: \"0px\", paddingLeft: '0px'}}>\r\n                                      <Row>\r\n                                          <Col xs={7}>\r\n                                              {/* <DateInputComponent DateTime={this.state.vesselLoadingDateTime}\r\n                                                                  handleDateChange={this.handleVesselLoadingDateChange}\r\n                                                                  disabled={false}/> */}\r\n                                          </Col>\r\n                                          <Col xs={5}>\r\n                                              <TimePicker\r\n                                                  showSecond={false}\r\n                                                  defaultValue={vesselLoadingTime}\r\n                                                  value={vesselLoadingTime}\r\n                                                  onChange={this.handleVesselLoadingTimeChange}\r\n                                                  allowEmpty={false}\r\n                                                  className='job-create-section-input'\r\n                                              />\r\n                                          </Col></Row></Container>\r\n                              </FormGroup>\r\n                          </Col>\r\n                      </Row>\r\n                      <Divider className='job-create-section-divider'/>\r\n                  </div>\r\n              );\r\n      }\r\n  };\r\n\r\n  _renderMenuItemChildren = (option, props, index) => {\r\n      return [\r\n          <Highlighter key=\"vesselIMOID\" search={props.text}>\r\n              {option.vesselIMOID}\r\n          </Highlighter>,\r\n          <div key=\"vesselName\">\r\n              <small>\r\n                  Vessel Name: {option.vesselName}\r\n              </small>\r\n          </div>,\r\n      ];\r\n  };\r\n\r\n  renderMenu = (results, menuProps) => {\r\n      results.sort((a, b) => a.priority - b.priority);\r\n      // const sortedResults = results.slice(0,8);\r\n      return <TypeaheadMenu {...menuProps} options={results}/>;\r\n  };\r\n\r\n  handleTypeAheadVesselNameChange = (value) => {\r\n      this.setState({\r\n          vesselName: value.trim()\r\n      });\r\n  };\r\n\r\n  handleKeyDown = (e) => {\r\n      if (e.keyCode === 13) {\r\n          const query = e.target.value;\r\n      }\r\n  };\r\n\r\n  handleTypeAheadVesselSelect = (selected) => {\r\n      if (selected[0]) {\r\n          this.setState({\r\n              vesselIMOID: selected[0].vesselIMOID ? selected[0].vesselIMOID : '',\r\n              vesselName: selected[0] ? selected[0].vesselName : '',\r\n              vesselCallsign: selected[0] ? selected[0].vesselCallsign : ''\r\n          });\r\n      } else {\r\n          this.setState({\r\n              vesselIMOID: '',\r\n              vesselName: '',\r\n              vesselCallsign: ''\r\n          });\r\n      }\r\n  };\r\n\r\n  handleVesselSelectChange = (event) => {\r\n      this.setState({vesselSelected: event.target.value});\r\n  };\r\n\r\n  filter = (option, props) => {\r\n      let text = props.text.toLowerCase();\r\n      if (option.vesselCallsign.toLowerCase().indexOf(text) !== -1 ||\r\n          option.vesselIMOID.toLowerCase().indexOf(text) !== -1 ||\r\n          option.vesselName.toLowerCase().indexOf(text) !== -1) {\r\n          option.priority = 1;\r\n          return true\r\n      }\r\n      let textArr = text.split(' ');\r\n      let res = false;\r\n      for (let i = 0; i < textArr.length; i++) {\r\n          const o = textArr[i];\r\n          if (o.length >= 3 && (option.vesselCallsign.toLowerCase().split(' ').includes(o) ||\r\n              option.vesselIMOID.toLowerCase().split(' ').includes(o) ||\r\n              option.vesselName.toLowerCase().split(' ').includes(o))) {\r\n              option.priority = 2;\r\n              res = true;\r\n              break;\r\n          }\r\n      }\r\n      return res\r\n  };\r\n\r\n  renderJobInfo = () => {\r\n      const openDeliver = Boolean(this.state.ItemsDeliverAnchorEl);\r\n      let jobItemText = this.state.jobItems.reduce((a, item) => {\r\n          a.push(item.quantity.toString().concat(' '.concat(item.uom)));\r\n          return a;\r\n      }, []);\r\n      const openOffland = Boolean(this.state.ItemsOfflandAnchorEl);\r\n      let jobOfflandItemsText = this.state.jobOfflandItems.reduce((a, item) => {\r\n          a.push(item.quantity.toString().concat(' '.concat(item.uom)));\r\n          return a;\r\n      }, []);\r\n      return (\r\n          <div>\r\n              <Row className='job-create-section'>\r\n                  <Col xs={12} sm={9}>\r\n                      <div className='d-flex align-items-center job-create-section-heading'>\r\n                          <div className='job-create-green-circle'><strong>1</strong></div>\r\n                          <h1 className='job-create-section-header'>Vessel Information</h1>\r\n                      </div>\r\n\r\n                      <FormGroup>\r\n                          <Label className='job-create-section-label'>Job Number</Label>\r\n                          <Input type=\"text\" onChange={this.handleJobIdChange} value={this.state.jobId}\r\n                                 placeholder='Enter Job Number' className='job-create-section-input'/>\r\n                          <FormText color=\"red\" className=\"job-create-section-formtext\">* If left blank, Job Number\r\n                              will be auto-generated.</FormText>\r\n                      </FormGroup>\r\n\r\n                      <FormGroup>\r\n                          <Label className='job-create-section-label'>Vessel Loading Location</Label>\r\n                          <Input type=\"select\" value={this.state.vesselLoadingLocation}\r\n                                 onChange={this.handleVesselLoadingLocationChange}\r\n                                 className='job-create-section-input'>\r\n                              <option>PSA</option>\r\n                              <option>Jurong Port</option>\r\n                              <option>Others</option>\r\n                          </Input>\r\n                          {\r\n                              this.state.vesselLoadingLocation === 'PSA'\r\n                                  ?\r\n                                  <FormText color=\"red\" className=\"job-create-section-formtext\">* For PSA deliveries,\r\n                                      please note that delivery time will be based on the closest upcoming vessel\r\n                                      berth.</FormText>\r\n                                  : ''\r\n                          }\r\n                          <FormText color=\"red\" className=\"job-create-section-formtext\">* 'Jurong Port' here refers to\r\n                              the JP Lighterage Terminals. For Jurong Port, please select 'Others'.</FormText>\r\n                      </FormGroup>\r\n\r\n                      {\r\n                          this.state.vesselLoadingLocation === 'Others'\r\n                              ? <FormGroup>\r\n                                  <Label className='job-create-section-label'>Address of Vessel Loading Location</Label>\r\n                                  <Input type=\"text\" value={this.state.otherVesselLocation}\r\n                                         onChange={this.handleOtherVesselLocationChange}\r\n                                         className='job-create-section-input'\r\n                                         required\r\n                                  >\r\n                                  </Input>\r\n                              </FormGroup>\r\n                              : ''\r\n                      }\r\n\r\n                      <FormGroup>\r\n                          <Label className='job-create-section-label'>Vessel Name</Label>\r\n                          <Typeahead id='vesselNameInput'\r\n                                     renderMenuItemChildren={this._renderMenuItemChildren}\r\n                                     renderMenu={this.renderMenu}\r\n                                     labelKey=\"vesselName\"\r\n                                     options={this.state.vessels}\r\n                                     placeholder=\"Enter Vessel Name\"\r\n                                     maxResults={1000}\r\n                                     paginate={false}\r\n                                     minLength={3}\r\n                                     onInputChange={this.handleTypeAheadVesselNameChange}\r\n                                     onChange={(selected) => {\r\n                                         this.handleTypeAheadVesselSelect(selected);\r\n                                     }}\r\n                                     inputProps={{className: 'job-create-section-input margin-bottom-zero'}}\r\n                                     filterBy={this.filter}\r\n                                     emptyLabel={false}\r\n                          />\r\n                          <span className='job-create-section-label-helper-text'><i>If vessel is not listed, it is okay to just submit the form.</i></span>\r\n                      </FormGroup>\r\n\r\n                      {\r\n                          this.state.vesselIMOID !== ''\r\n                              ? <FormGroup>\r\n                                  <Label className='job-create-section-label'>Vessel IMO</Label>\r\n                                  <Input type=\"text\" className='job-create-section-input' value={this.state.vesselIMOID}\r\n                                         disabled/>\r\n                              </FormGroup> : ''\r\n                      }\r\n\r\n                      {\r\n                          this.state.vesselCallsign !== ''\r\n                              ? <FormGroup>\r\n                                  <Label className='job-create-section-label'>Vessel Callsign</Label>\r\n                                  <Input type=\"text\" className='job-create-section-input'\r\n                                         value={this.state.vesselCallsign} disabled/>\r\n                              </FormGroup> : ''\r\n                      }\r\n\r\n                      {this.state.vesselLoadingLocation === 'Jurong Port'\r\n                          ? <div>\r\n                              <FormGroup style={{marginBottom: '0px'}}>\r\n                                  <Label className='job-create-section-label'>Lighter Name\r\n                                      (Optional)</Label>\r\n                                  <Input type=\"text\"\r\n                                         onChange={this.handleVesselLighterNameChange}\r\n                                         value={this.state.vesselLighterName}\r\n                                         className='job-create-section-input'\r\n                                         placeholder='Enter Lighter Name'/>\r\n                              </FormGroup>\r\n                              <FormGroup>\r\n                                  <Label className='job-create-section-label'>Lighter Location</Label>\r\n                                  <Input type=\"select\" value={this.state.vesselLighterLocation}\r\n                                         onChange={this.handleVesselLighterLocationChange}\r\n                                         className='job-create-section-input'>\r\n                                      <option>Marina South Wharves</option>\r\n                                      <option>Penjuru Terminal</option>\r\n                                  </Input>\r\n                              </FormGroup>\r\n                              <FormGroup>\r\n                                  <Label className='job-create-section-label'>Lighter Contact Remarks\r\n                                      (Optional)</Label>\r\n                                  <Input type=\"textarea\" value={this.state.vesselLighterRemarks} rows=\"3\"\r\n                                         className='job-create-section-input'\r\n                                         style={{marginBottom: 0}}\r\n                                         onChange={this.handleVesselLighterRemarksChange}/>\r\n                                  <span className='job-create-section-label-helper-text'><i>Please enter contact details for lighter here</i></span>\r\n                              </FormGroup>\r\n                          </div>\r\n                          : ''\r\n                      }\r\n                  </Col>\r\n              </Row>\r\n              <Divider className='job-create-section-divider'/>\r\n\r\n              {this.renderJobTimeInfo()}\r\n\r\n              <Row className='job-create-section'>\r\n                  <Col xs={12} sm={9}>\r\n                      <div className='d-flex align-items-center job-create-section-heading'>\r\n                          <div className='job-create-green-circle'>\r\n                              <strong>{this.state.vesselLoadingLocation === 'PSA' ? '2' : '3'}</strong></div>\r\n                          <h1 className='job-create-section-header'>Delivery Details</h1>\r\n                      </div>\r\n                      <FormRB.Group>\r\n                          <FormRB.Label className='job-create-section-label'>Items to\r\n                              Deliver</FormRB.Label>\r\n                          <FormRB.Control as=\"input\"\r\n                                          value={jobItemText.join(', ')}\r\n                                          onClick={(e) => {\r\n                                              this.setState({ItemsDeliverAnchorEl: e.currentTarget})\r\n                                          }}\r\n                                          style={{marginBottom: 0}}\r\n                                          className='job-create-section-input' onChange={() => {\r\n                          }}>\r\n                          </FormRB.Control>\r\n                          <span className='job-create-section-label-helper-text'><i>* Please let us know if you have any refrigeration, fragile, dangerous or over-sized items in the remarks</i></span>\r\n                          <br/>\r\n                          <span className='job-create-section-label-helper-text'><i>* Please let us know whether blue bin needs to be provided in the remarks</i></span>\r\n                          <br/>\r\n                          <span className='job-create-section-label-helper-text' style={{color: 'red'}}><i>* We have a standard sizing, please refer to our Terms of Services</i></span>\r\n                          <Popover\r\n                              open={openDeliver}\r\n                              anchorEl={this.state.ItemsDeliverAnchorEl}\r\n                              onClose={this.handleDeliverClose}\r\n                              anchorOrigin={{\r\n                                  vertical: 'bottom',\r\n                                  horizontal: 'left',\r\n                              }}\r\n                              transformOrigin={{\r\n                                  vertical: 'top',\r\n                                  horizontal: 'left',\r\n                              }}\r\n                          >\r\n                              {/* <JobItemInput jobItems={this.state.jobItems}\r\n                                            job={this.state.job}\r\n                                            setItems={(jobItems) => this.setState({jobItems})}\r\n                                            disabled={false}\r\n                                            type={\"delivery\"}\r\n                              /> */}\r\n\r\n                          </Popover>\r\n                      </FormRB.Group>\r\n\r\n                      <FormRB.Group>\r\n                          <FormRB.Label className='job-create-section-label'>Items to\r\n                              Offland (Optional)</FormRB.Label>\r\n                          <FormRB.Control as=\"input\"\r\n                                          value={jobOfflandItemsText.join(', ')}\r\n                                          onClick={(e) => {\r\n                                              this.setState({ItemsOfflandAnchorEl: e.currentTarget})\r\n                                          }}\r\n                                          className='job-create-section-input' onChange={() => {\r\n                          }}>\r\n                          </FormRB.Control>\r\n                          <Popover\r\n                              open={openOffland}\r\n                              anchorEl={this.state.ItemsOfflandAnchorEl}\r\n                              onClose={this.handleOfflandClose}\r\n                              anchorOrigin={{\r\n                                  vertical: 'bottom',\r\n                                  horizontal: 'left',\r\n                              }}\r\n                              transformOrigin={{\r\n                                  vertical: 'top',\r\n                                  horizontal: 'left',\r\n                              }}\r\n                          >\r\n                              {/* <JobItemInput jobItems={this.state.jobOfflandItems}\r\n                                            job={this.state.job}\r\n                                            setItems={(jobOfflandItems) => this.setState({jobOfflandItems})}\r\n                                            disabled={false}\r\n                                            type={\"Offland\"}\r\n                              /> */}\r\n                          </Popover>\r\n                      </FormRB.Group>\r\n                      <FormGroup>\r\n                          <Label className='job-create-section-label'>Remarks (Optional)</Label>\r\n                          <Input type=\"textarea\" value={this.state.remarks} rows=\"7\"\r\n                                 className='job-create-section-input margin-bottom-zero'\r\n                                 onChange={this.handleRemarksChange}/>\r\n                          <span className='job-create-section-label-helper-text'><i>* If you require pickup, please input address in the remarks.</i></span>\r\n                      </FormGroup>\r\n                      <FormControlLabel\r\n                          value=\"dsa\"\r\n                          control={<Checkbox color=\"default\" checked={this.state.createDSA}\r\n                                             className='create-dsa-checkbox'/>}\r\n                          onChange={this.handleCreateDSAChange}\r\n                          label={this.renderText()}\r\n                      />\r\n                  </Col>\r\n              </Row>\r\n              <Row className='job-create-section-action'>\r\n                  <Col xs={12}>\r\n                      <div className='d-flex align-items-center justify-content-center'>\r\n                          <Button variant='success' className='job-create-submit-btn'\r\n                                  onClick={this.handleNextStep}>Submit</Button>\r\n                          <Button variant='outline-success' className='job-create-cancel-btn'\r\n                                  onClick={this.props.handleCloseModal}>Cancel</Button>\r\n\r\n                      </div>\r\n                  </Col>\r\n              </Row>\r\n          </div>\r\n\r\n      );\r\n  };\r\n\r\n  renderJobPayment = () => {\r\n      if (this.state.vesselQueryResults.length > 1) {\r\n          return (\r\n              <div>\r\n                  <Row className='job-create-section full-height'>\r\n                      <Col>\r\n                          <div className='d-flex align-items-center job-create-section-heading-price'>\r\n                              <h1 className='job-create-section-header-price'>Confirm Booking?</h1>\r\n                          </div>\r\n                          <div>\r\n                              <FormControl component=\"fieldset\">\r\n                                  <FormLabel component=\"legend\" className='job-create-section-label'\r\n                                             style={{paddingTop: 10, paddingBottom: 10}}>Please Select a\r\n                                      Vessel:</FormLabel>\r\n                                  <RadioGroup\r\n                                      value={this.state.vesselSelected}\r\n                                      onChange={this.handleVesselSelectChange}\r\n                                  >\r\n                                      {this.state.vesselQueryResults.map((obj, index) => {\r\n                                          return (\r\n                                              <FormControlLabel key={index} value={obj.vesselIMOID} control={<Radio/>}\r\n                                                                label={`${obj.vesselName}, ${obj.vesselIMOID}`}/>\r\n                                          );\r\n                                      })}\r\n                                  </RadioGroup>\r\n                              </FormControl>\r\n                          </div>\r\n                          <div className='d-flex align-items-center justify-content-center'\r\n                               style={{marginTop: \"20px\"}}>\r\n                              <Button disabled={!this.state.submitButtonActive} variant='success'\r\n                                      className='job-create-submit-btn'\r\n                                      type=\"submit\">Yes</Button>\r\n                              <Button variant='outline-success' className='job-create-cancel-btn'\r\n                                      onClick={this.props.handleCloseModal}>No</Button>\r\n                          </div>\r\n                      </Col>\r\n                  </Row>\r\n              </div>\r\n          );\r\n      } else {\r\n          return (\r\n              <div>\r\n                  <Row className='job-create-section full-height'>\r\n                      <Col>\r\n                          <div className='d-flex align-items-center job-create-section-heading-price'>\r\n                              <h1 className='job-create-section-header-price'>Confirm Booking?</h1>\r\n                          </div>\r\n\r\n                          <div className='d-flex align-items-center justify-content-center'\r\n                               style={{marginTop: \"20px\"}}>\r\n                              <Button disabled={!this.state.submitButtonActive} variant='success'\r\n                                      className='job-create-submit-btn'\r\n                                      type=\"submit\">Yes</Button>\r\n                              <Button variant='outline-success' className='job-create-cancel-btn'\r\n                                      onClick={this.props.handleCloseModal}>No</Button>\r\n                          </div>\r\n                      </Col>\r\n                  </Row>\r\n              </div>\r\n          );\r\n      }\r\n      // return (<div>\r\n      //     <Row className='job-create-section full-height'>\r\n      //         <Col>\r\n      //             <div className='d-flex align-items-center job-create-section-heading-price'>\r\n      //                 <h1 className='job-create-section-header-price'>Price</h1>\r\n      //             </div>\r\n      //             <JobCreatePriceTable tableHeading=\"Items to Deliver\" jobItems={this.state.jobItems}/>\r\n      //             <br/>\r\n      //             {\r\n      //                 this.state.jobOfflandItems.length > 0\r\n      //                     ?\r\n      //                     <JobCreatePriceTable tableHeading=\"Items to Offland\" jobItems={this.state.jobOfflandItems}/>\r\n      //                     : ''\r\n      //             }\r\n      //             <div className='d-flex align-items-center justify-content-center' style={{marginTop: \"20px\"}}>\r\n      //                 <Button variant='success' className='job-create-submit-btn'\r\n      //                         type=\"submit\">Submit</Button>\r\n      //                 <Button variant='outline-success' className='job-create-cancel-btn'\r\n      //                         onClick={this.props.handleCloseModal}>Cancel</Button>\r\n      //             </div>\r\n      //         </Col>\r\n      //     </Row>\r\n      // </div>)\r\n  };\r\n\r\n  renderSuccess = () => {\r\n      return (\r\n          <Row className='job-create-section-success'>\r\n              <Col>\r\n                  <div\r\n                      className='d-flex align-items-center justify-content-center flex-column job-create-section-heading-price'>\r\n                      <svg className=\"checkmark\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 52 52\">\r\n                          <circle className=\"checkmark__circle\" cx=\"26\" cy=\"26\" r=\"25\" fill=\"none\"/>\r\n                          <path className=\"checkmark__check\" fill=\"none\" d=\"M14.1 27.2l7.1 7.2 16.7-16.8\"/>\r\n                      </svg>\r\n                      <p className='job-create-success-text text-center'>You have successfully booked a job with\r\n                          Simpfleet.</p>\r\n                      <Button variant='success' className='job-create-details-btn' onClick={() => {\r\n                          /* this.props.history.push(`/job_details?job=${this.state.job.index}`); */\r\n                          if (this.props.mobile) {\r\n                              this.props.handlePopoverOpen();\r\n                              this.props.handleCloseModal();\r\n                              this.props.handleCloseMenu();\r\n                          }\r\n                          ;\r\n                      }}>View your job details</Button>\r\n                  </div>\r\n              </Col>\r\n          </Row>\r\n      );\r\n  };\r\n\r\n  renderForm = () => {\r\n      let formDisplay;\r\n      if (this.state.activeStep === 0) {\r\n          formDisplay = this.renderJobInfo();\r\n      } else if (this.state.activeStep === 1) {\r\n          formDisplay = this.renderJobPayment();\r\n      } else if (this.state.activeStep === 2) {\r\n          formDisplay = this.renderSuccess();\r\n      }\r\n\r\n      return (\r\n          <Form onSubmit={this.onSubmit} style={{height: \"100%\"}}>\r\n              {formDisplay}\r\n          </Form>\r\n      );\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <Container fluid style={{ height: \"100%\" }}>\r\n        <Row style={{ height: \"100%\" }}>\r\n          <Col xs={12}> {this.renderForm()} </Col>\r\n        </Row>\r\n      </Container>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = ({ auth }) => {\r\n  return { auth };\r\n};\r\n\r\nexport default withRouter(connect(mapStateToProps)(CreateJob));\r\n","import \"./CreateJobModal.css\";\r\nimport React, { Component } from \"react\";\r\n\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogContent from \"@material-ui/core/DialogContent\";\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\nimport CreateJob from \"./CreateJob\";\r\n\r\nexport default class CreateJobModal extends Component {\r\n  render() {\r\n    return (\r\n      <div className=\"job-create-modal\">\r\n        <Dialog\r\n          open={this.props.isOpen}\r\n          onClose={this.props.handleCloseModal}\r\n          maxWidth=\"sm\"\r\n          fullWidth={true}\r\n          fullScreen={this.props.fullScreen}\r\n        >\r\n          <DialogTitle id=\"alert-dialog-title\" className=\"job-share-modal-top\">\r\n            <div className=\"d-flex align-items-center\">\r\n              <p className=\"job-share-modal-title\">Job Booking</p>\r\n              <IconButton\r\n                aria-label=\"Close\"\r\n                className=\"job-share-modal-close ml-auto\"\r\n                onClick={this.props.handleCloseModal}\r\n              >\r\n                <CloseIcon />\r\n              </IconButton>\r\n            </div>\r\n          </DialogTitle>\r\n          <DialogContent className=\"job-create-modal-content\">\r\n            <CreateJob\r\n              handleCloseModal={this.props.handleCloseModal}\r\n              handlePopoverOpen={this.props.handlePopoverOpen}\r\n              handleCloseMenu={this.props.handleCloseMenu}\r\n              mobile={this.props.fullScreen}\r\n            />\r\n          </DialogContent>\r\n        </Dialog>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import axios from \"axios\";\r\n\r\nimport { GET_ERRORS } from \"./types\";\r\n\r\n// Login - Get User Token\r\nexport const loginUser = userData => dispatch => {\r\n  axios\r\n    .post(\"/api/users/login\", userData)\r\n    .then(res => {\r\n      window.location.href = \"/\";\r\n    })\r\n    .catch(err => {\r\n      dispatch({\r\n        type: GET_ERRORS,\r\n        payload: err.response.data\r\n      });\r\n    });\r\n};\r\n\r\n// Log user out\r\nexport const logoutUser = () => {\r\n  axios.post(\"/api/users/logout\").then(res => {\r\n    window.location.href = \"/\";\r\n  });\r\n};\r\n","const isEmpty = value =>\r\n  value === undefined ||\r\n  value === null ||\r\n  (typeof value === \"object\" && Object.keys(value).length === 0) ||\r\n  (typeof value === \"string\" && value.trim().length === 0);\r\n\r\nmodule.exports = isEmpty;\r\n"],"sourceRoot":""}