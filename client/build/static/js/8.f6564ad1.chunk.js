(window.webpackJsonpclient=window.webpackJsonpclient||[]).push([[8],{1415:function(e,t,a){"use strict";a.r(t);var l=a(14),n=a(11),r=a(15),o=a(16),c=a(17),s=a(0),u=a.n(s),h=a(7),i=a(25),m=a.n(i),g=(a(1252),function(e){function t(){return Object(l.a)(this,t),Object(r.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(n.a)(t,[{key:"render",value:function(){var e=this.props.jobMonthCategory;switch(e){case null:return u.a.createElement("div",null);default:var t=Object.keys(e).map(function(t,a){for(var l=e[t],n=0,r=0,o=0,c=0,s=[],h=[],i=[],m=0;m<l.length;m++){var g=l[m];if("Confirmed"===g.isCancelled)s.push(g);else{6===g.jobTrackers.length?i.push(g):h.push(g);var b=g.jobItems,d=g.jobOfflandItems;if(b&&b.length>0){o++;for(var E=0;E<b.length;E++){n+=b[E].quantity}}if(d&&d.length>0){c++;for(var p=0;p<d.length;p++){r+=d[p].quantity}}}}return u.a.createElement("tr",{key:a},u.a.createElement("td",null,t),u.a.createElement("td",null,l.length),u.a.createElement("td",{style:{color:"red"}},s.length),u.a.createElement("td",null,h.length),u.a.createElement("td",null,i.length),u.a.createElement("td",null,n),u.a.createElement("td",null,0===n?"0":(n/o).toFixed(2)),u.a.createElement("td",null,r),u.a.createElement("td",null,0===r?"0":(r/c).toFixed(2)))});return u.a.createElement(h.v,null,u.a.createElement(h.f,{cs:"12",md:{size:12,offset:0},className:"text-center"},u.a.createElement("h1",null,"Job breakdown by month")),u.a.createElement(h.f,{cs:"12",md:{size:12,offset:0}},u.a.createElement(h.w,{striped:!0,hover:!0,bordered:!0,responsive:!0},u.a.createElement("thead",null,u.a.createElement("tr",{style:{backgroundColor:"#49AE4B",color:"white"}},u.a.createElement("th",null,"Month"),u.a.createElement("th",null,"Total jobs"),u.a.createElement("th",{style:{color:"red"}},"Cancelled jobs"),u.a.createElement("th",null,"Ongoing jobs"),u.a.createElement("th",null,"Completed jobs"),u.a.createElement("th",null,"No. of Pallets (Delivery)"),u.a.createElement("th",null,"Avg No. of Pallets per Delivery"),u.a.createElement("th",null,"No. of Pallets (Offland)"),u.a.createElement("th",null,"Avg No. of Pallets per Offland"))),u.a.createElement("tbody",null,t))))}}}]),t}(s.Component)),b=function(e){function t(){return Object(l.a)(this,t),Object(r.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(n.a)(t,[{key:"render",value:function(){var e=this.props.jobDeliveryCategory;switch(e){case null:return u.a.createElement("div",null);default:var t=0,a=0,l=0,n=0,r=[],o=[],c=[],s=[],i=[],m=[],g=Object.keys(e).map(function(h,g){var b=e[h],d=0,E=0,p=[],f=[],v=[];if("PSA"===h||"Jurong Port"===h){for(var y=0;y<b.length;y++){var j=b[y];if("Confirmed"===j.isCancelled)p.push(j),r.push(j);else{6===j.jobTrackers.length?(v.push(j),c.push(j)):(f.push(j),o.push(j));var C=j.jobItems,k=j.jobOfflandItems;if(C&&C.length>0)for(var O=0;O<C.length;O++){var D=C[O];d+=D.quantity,l+=D.quantity}if(k&&k.length>0)for(var A=0;A<k.length;A++){var w=k[A];E+=w.quantity,n+=w.quantity}}}return u.a.createElement("tr",{key:g},u.a.createElement("td",null,h),u.a.createElement("td",null,d),u.a.createElement("td",null,E),u.a.createElement("td",null,f.length),u.a.createElement("td",null,v.length),u.a.createElement("td",{style:{color:"red"}},p.length),u.a.createElement("td",null,b.length))}if("PSA"!==h||"Jurong Port"!==h)for(var J=0;J<b.length;J++){var S=b[J];if("Confirmed"===S.isCancelled)s.push(S);else{6===S.jobTrackers.length?m.push(S):i.push(S);var I=S.jobItems,T=S.jobOfflandItems;if(I&&I.length>0)for(var M=0;M<I.length;M++){var P=I[M];t+=P.quantity}if(T&&T.length>0)for(var B=0;B<T.length;B++){var N=T[B];a+=N.quantity}}}});return u.a.createElement(h.v,null,u.a.createElement(h.f,{cs:"12",md:{size:12,offset:0},className:"text-center"},u.a.createElement("h1",null,"Job breakdown by Delivery Locations")),u.a.createElement(h.f,{cs:"12",md:{size:12,offset:0}},u.a.createElement(h.w,{striped:!0,hover:!0,bordered:!0,responsive:!0},u.a.createElement("thead",null,u.a.createElement("tr",{style:{backgroundColor:"#49AE4B",color:"white"}},u.a.createElement("th",null,"Delivery Location"),u.a.createElement("th",null,"No. of Pallets (Delivery)"),u.a.createElement("th",null,"No. of Pallets (Offland)"),u.a.createElement("th",null,"Ongoing Jobs"),u.a.createElement("th",null,"Completed Jobs"),u.a.createElement("th",{style:{color:"red"}},"Cancelled Jobs"),u.a.createElement("th",null,"Total Jobs"))),u.a.createElement("tbody",null,g,u.a.createElement("tr",null,u.a.createElement("td",null,"Others"),u.a.createElement("td",null,t),u.a.createElement("td",null,a),u.a.createElement("td",null,i.length),u.a.createElement("td",null,m.length),u.a.createElement("td",{style:{color:"red"}},s.length),u.a.createElement("td",null,i.length+m.length+s.length))),u.a.createElement("br",null),u.a.createElement("tfoot",null,u.a.createElement("tr",null,u.a.createElement("th",null,"Total"),u.a.createElement("th",null,t+l," Pallets"),u.a.createElement("th",null,a+n," Pallets"),u.a.createElement("th",null,i.length+o.length," Jobs"),u.a.createElement("th",null,m.length+c.length," ","Jobs"),u.a.createElement("th",{style:{color:"red"}},s.length+r.length," ","jobs"),u.a.createElement("th",null,i.length+m.length+s.length+(o.length+c.length+r.length)," ","Jobs"))))))}}}]),t}(s.Component),d=function(e){function t(){return Object(l.a)(this,t),Object(r.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(n.a)(t,[{key:"render",value:function(){var e=this.props,t=e.jobVesselsCategory,a=e.Vessel;switch(t&&a){case null:return u.a.createElement("div",null);default:var l=[],n=0,r=[],o=[],c=[],s=0,i=0,m=0;a.map(function(e){Object.keys(t).map(function(a,s){var u=t[a],h=[],i=[],m=[];if(a===e._id){for(var g=0;g<u.length;g++){var b=u[g];"confirmed"===b.isCancelled?(h.push(b),r.push(b)):6===b.jobTrackers.length?(m.push(b),c.push(b)):(i.push(b),o.push(b))}var d={id:"".concat(n++),vessel:"".concat(e.vesselName),vesselIMO:"".concat(e.vesselIMOID),vesselCallsign:"".concat(e.vesselCallsign),ongoing:"".concat(i.length),completed:"".concat(m.length),cancelled:"".concat(h.length),total:"".concat(i.length+m.length+h.length)};l.push(d)}})});l.sort(function(e,t){return t.total-e.total});var g=l.map(function(e,t){if(t<50)return u.a.createElement("tr",{key:e.id},u.a.createElement("td",null,e.vessel?e.vessel:"-"),u.a.createElement("td",null,e.vesselIMO),u.a.createElement("td",null,e.vesselCallsign?e.vesselCallsign:"-"),u.a.createElement("td",null,e.ongoing),u.a.createElement("td",null,e.completed),u.a.createElement("td",{style:{color:"red"}},e.cancelled),u.a.createElement("td",null,e.total));i+=parseInt(e.ongoing),m+=parseInt(e.completed),s+=parseInt(e.cancelled)});return u.a.createElement(h.v,null,u.a.createElement(h.f,{cs:"12",md:{size:12,offset:0},className:"text-center"},u.a.createElement("h1",null,"Job breakdown by Vessels")),u.a.createElement(h.f,{cs:"12",md:{size:12,offset:0}},u.a.createElement(h.w,{striped:!0,hover:!0,bordered:!0,responsive:!0},u.a.createElement("thead",null,u.a.createElement("tr",{style:{backgroundColor:"#49AE4B",color:"white"}},u.a.createElement("th",null,"Vessels Name"),u.a.createElement("th",null,"Vessels IMO"),u.a.createElement("th",null,"Vessels Callsign"),u.a.createElement("th",null,"Ongoing Jobs"),u.a.createElement("th",null,"Completed Jobs"),u.a.createElement("th",null,"Cancelled Jobs"),u.a.createElement("th",null,"Total Jobs"))),u.a.createElement("tbody",null,g,u.a.createElement("tr",null,u.a.createElement("td",null,"Others"),u.a.createElement("td",null),u.a.createElement("td",null),u.a.createElement("td",null,i),u.a.createElement("td",null,m),u.a.createElement("td",{style:{color:"red"}},s),u.a.createElement("td",null,i+m+s))),u.a.createElement("br",null),u.a.createElement("tfoot",null,u.a.createElement("tr",null,u.a.createElement("th",null,"Total"),u.a.createElement("th",null),u.a.createElement("th",null),u.a.createElement("th",null,o.length," Jobs"),u.a.createElement("th",null,c.length," Jobs"),u.a.createElement("th",{style:{color:"red"}},r.length," jobs"),u.a.createElement("th",null,o.length+c.length+r.length," ","Jobs"))))))}}}]),t}(s.Component),E=function(e){function t(){return Object(l.a)(this,t),Object(r.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(n.a)(t,[{key:"render",value:function(){var e=this.props,t=e.jobCompaniesCategory,a=e.Company;switch(t&&a){case null:return u.a.createElement("div",null);default:var l=[],n=0,r=[],o=[],c=[];Object.keys(a).map(function(e,a){var s=[],u=[],h=[],i=(Object.keys(t).map(function(a,l){var n=t[a];if(e===a)for(var i=0;i<n.length;i++){var m=n[i];"Confirmed"===m.isCancelled?(s.push(m),r.push(m)):6===m.jobTrackers.length?(h.push(m),c.push(m)):(u.push(m),o.push(m))}}),{id:"".concat(n++),company:"".concat(e),ongoing:"".concat(u.length),completed:"".concat(h.length),cancelled:"".concat(s.length),total:"".concat(u.length+h.length+s.length)});l.push(i)});l.sort(function(e,t){return t.total-e.total});var s=l.map(function(e){return u.a.createElement("tr",{key:e.id},u.a.createElement("td",null,e.company),u.a.createElement("td",null,e.ongoing),u.a.createElement("td",null,e.completed),u.a.createElement("td",{style:{color:"red"}},e.cancelled),u.a.createElement("td",null,e.total))});return u.a.createElement(h.v,null,u.a.createElement(h.f,{cs:"12",md:{size:12,offset:0},className:"text-center"},u.a.createElement("h1",null,"Job breakdown by Companies")),u.a.createElement(h.f,{cs:"12",md:{size:12,offset:0}},u.a.createElement(h.w,{striped:!0,hover:!0,bordered:!0,responsive:!0},u.a.createElement("thead",null,u.a.createElement("tr",{style:{backgroundColor:"#49AE4B",color:"white"}},u.a.createElement("th",null,"Companies"),u.a.createElement("th",null,"Ongoing Jobs"),u.a.createElement("th",null,"Completed Jobs"),u.a.createElement("th",{style:{color:"red"}},"Cancelled Jobs"),u.a.createElement("th",null,"Total Jobs"))),u.a.createElement("tbody",null,s),u.a.createElement("br",null),u.a.createElement("tfoot",null,u.a.createElement("tr",null,u.a.createElement("th",null,"Total"),u.a.createElement("th",null,o.length," Jobs"),u.a.createElement("th",null,c.length," Jobs"),u.a.createElement("th",{style:{color:"red"}},r.length," Jobs"),u.a.createElement("th",null,o.length+c.length+r.length," ","Jobs"))))))}}}]),t}(s.Component),p=a(1306),f=function(e){function t(){return Object(l.a)(this,t),Object(r.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(n.a)(t,[{key:"render",value:function(){var e=this.props,t=e.jobMonthAnalys,a=e.jobDeliveryCategory;switch(t&&a){case null:return u.a.createElement("div",null);default:var l=[],n=[],r=[],o=[],c=[],s=[],i=[],m=[],g=[],b=(Object.keys(t).map(function(e,t){var u=0,h=0,b=0,d=0,E=[],p=[],f=[],v=[];Object.keys(a).map(function(t){var l=a[t];if("PSA"===t)for(var n=0;n<l.length;n++){var r=l[n];if(e==="".concat(new Date(r.jobBookingDateTime).getMonth()+1,"/").concat(new Date(r.jobBookingDateTime).getFullYear())&&0!==r.jobItems.length){for(var o=0;o<r.jobItems.length;o++)u+=r.jobItems[o].quantity;E.push(r)}}else if("Jurong Port"===t)for(var c=0;c<l.length;c++){var s=l[c];if(e==="".concat(new Date(s.jobBookingDateTime).getMonth()+1,"/").concat(new Date(s.jobBookingDateTime).getFullYear())&&0!==s.jobItems.length){for(var i=0;i<s.jobItems.length;i++)h+=s.jobItems[i].quantity;p.push(s)}}else if("Shipyard"===t)for(var m=0;m<l.length;m++){var g=l[m];if(e==="".concat(new Date(g.jobBookingDateTime).getMonth()+1,"/").concat(new Date(g.jobBookingDateTime).getFullYear())&&0!==g.jobItems.length){for(var y=0;y<g.jobItems.length;y++)b+=g.jobItems[y].quantity;f.push(g)}}else for(var j=0;j<l.length;j++){var C=l[j];if(e==="".concat(new Date(C.jobBookingDateTime).getMonth()+1,"/").concat(new Date(C.jobBookingDateTime).getFullYear())&&0!==C.jobItems.length){for(var k=0;k<C.jobItems.length;k++)d+=C.jobItems[k].quantity;v.push(C)}}});"1/"==="".concat(e.charAt(0)).concat(e.charAt(1))?l.push("Jan"):"2/"===String("".concat(e.charAt(0)).concat(e.charAt(1)))?l.push("Feb"):"3/"===String("".concat(e.charAt(0)).concat(e.charAt(1)))?l.push("Mar"):"4/"===String("".concat(e.charAt(0)).concat(e.charAt(1)))?l.push("Apr"):"5/"===String("".concat(e.charAt(0)).concat(e.charAt(1)))?l.push("May"):"6/"===String("".concat(e.charAt(0)).concat(e.charAt(1)))?l.push("Jun"):"7/"===String("".concat(e.charAt(0)).concat(e.charAt(1)))?l.push("Jul"):"8/"===String("".concat(e.charAt(0)).concat(e.charAt(1)))?l.push("Aug"):"9/"===String("".concat(e.charAt(0)).concat(e.charAt(1)))?l.push("Sep"):"10"===String("".concat(e.charAt(0)).concat(e.charAt(1)))?l.push("Oct"):"11"===String("".concat(e.charAt(0)).concat(e.charAt(1)))?l.push("Nov"):"12"===String("".concat(e.charAt(0)).concat(e.charAt(1)))&&l.push("Dec"),s.push(u),i.push(h),m.push(b),g.push(d),n.push(E.length),r.push(p.length),o.push(f.length),c.push(v.length)}),{labels:l,datasets:[{label:"PSA Port",stack:"Stack 0",data:n,backgroundColor:"rgb(161, 217, 180)"},{label:"JP-LT",stack:"Stack 0",data:r,backgroundColor:"rgb(28, 201, 140)"},{label:"Shipyard",stack:"Stack 0",data:o,backgroundColor:"rgb(13, 140, 100)"},{label:"Others",stack:"Stack 0",data:c,backgroundColor:"rgb(10, 92, 60)"}]}),d={labels:l,datasets:[{label:"PSA Port",stack:"Stack 0",data:n,backgroundColor:"rgb(161, 217, 180)"},{label:"JP-LT",stack:"Stack 0",data:r,backgroundColor:"rgb(28, 201, 140)"},{label:"Shipyard",stack:"Stack 0",data:o,backgroundColor:"rgb(13, 140, 100)"},{label:"Others",stack:"Stack 0",data:c,backgroundColor:"rgb(10, 92, 60)"}]};return u.a.createElement(h.v,{style:{marginBottom:"15px"}},u.a.createElement(h.f,{cs:"6",md:{size:6,offset:0}},u.a.createElement(h.b,null,u.a.createElement(h.c,null,u.a.createElement(h.e,{style:{textDecoration:"bold"}},"No Of Deliveries"),u.a.createElement(h.d,null,u.a.createElement(p.a,{data:b,options:{legend:{display:!0,position:"bottom"},scales:{yAxes:[{ticks:{callback:function(e,t,a){return e+" Deliveries"},beginAtZero:!0}}]}}}))))),u.a.createElement(h.f,{cs:"6",md:{size:6,offset:0}},u.a.createElement(h.b,null,u.a.createElement(h.c,null,u.a.createElement(h.e,null,"No Of Items"),u.a.createElement(h.d,null,u.a.createElement(p.a,{data:d,options:{legend:{display:!0,position:"bottom"},scales:{yAxes:[{ticks:{callback:function(e,t,a){return e+" Items"},beginAtZero:!0}}]}}}))))))}}}]),t}(s.Component),v=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,c=new Array(n),s=0;s<n;s++)c[s]=arguments[s];return(a=Object(r.a)(this,(e=Object(o.a)(t)).call.apply(e,[this].concat(c)))).state={userCompany:null,vessel:null,jobMonthCategories:null,jobDeliveryCategories:null,jobCompaniesCategories:null,AnalysData:null,jobVesselsCategories:null},a}return Object(c.a)(t,e),Object(n.a)(t,[{key:"componentDidMount",value:function(){var e=this;m.a.get("/api/company/usercompany").then(function(t){for(var a=t.data,l={},n=0;n<a.length;n++){var r=a[n].name,o=l[r];o||(o=[],l[r]=o)}e.setState({userCompany:l})}),m.a.get("/api/vessels").then(function(t){e.setState({vessel:t.data})}),m.a.get("/api/jobs?user_only=false&numLimit=false&archive_only=false&non_archive_only=false&page=false&limit=false").then(function(t){for(var a=t.data,l={},n={},r={},o={},c={},s=0;s<a.length;s++){var u=a[s],h="".concat(new Date(u.jobBookingDateTime).getMonth()+1,"/").concat(new Date(u.jobBookingDateTime).getFullYear()),i=l[h];i||(i=[],l[h]=i);var m=n[u.vesselLoadingLocation];if(m||(m=[],n[u.vesselLoadingLocation]=m),null!==u.user.userCompany&&null!==u.user.userCompany.name){var g=r[u.user.userCompany.name];g||(g=[],r[u.user.userCompany.name]=g),g.push(u)}if(null!==u.vessel&&null!==u.vessel.vesselName){var b=o[u.vessel._id];b||(b=[],o[u.vessel._id]=b),b.push(u)}i.push(u),m.push(u)}a.sort(function(e,t){return new Date(e.jobBookingDateTime.toString())-new Date(t.jobBookingDateTime.toString())});for(var d=0;d<a.length;d++){var E=a[d],p="".concat(new Date(E.jobBookingDateTime).getMonth()+1,"/").concat(new Date(E.jobBookingDateTime).getFullYear()),f=c[p];f||(f=[],c[p]=f),f.push(E)}e.setState({jobMonthCategories:l,jobDeliveryCategories:n,jobCompaniesCategories:r,AnalysData:c,jobVesselsCategories:o})}).catch(function(e){console.log(e)})}},{key:"componentDidUpdate",value:function(e,t,a){console.log(this.state)}},{key:"render",value:function(){return u.a.createElement("div",null,u.a.createElement(f,{jobMonthAnalys:this.state.AnalysData,jobDeliveryCategory:this.state.jobDeliveryCategories}),u.a.createElement(g,{jobMonthCategory:this.state.jobMonthCategories}),u.a.createElement(b,{jobDeliveryCategory:this.state.jobDeliveryCategories}),u.a.createElement(d,{jobVesselsCategory:this.state.jobVesselsCategories,Vessel:this.state.vessel}),u.a.createElement(E,{jobCompaniesCategory:this.state.jobCompaniesCategories,Company:this.state.userCompany}))}}]),t}(s.Component),y=function(e){function t(){return Object(l.a)(this,t),Object(r.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(n.a)(t,[{key:"render",value:function(){return u.a.createElement(h.h,{fluid:!0},u.a.createElement("br",null),u.a.createElement(v,null))}}]),t}(s.Component);t.default=y}}]);
//# sourceMappingURL=8.f6564ad1.chunk.js.map