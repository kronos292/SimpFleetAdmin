(window.webpackJsonpclient=window.webpackJsonpclient||[]).push([[8],{1418:function(e,t,l){"use strict";l.r(t);var a=l(14),n=l(11),r=l(15),o=l(16),s=l(17),c=l(0),u=l.n(c),h=l(7),i=l(25),m=l.n(i),d=(l(1252),function(e){function t(){return Object(a.a)(this,t),Object(r.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(n.a)(t,[{key:"render",value:function(){var e=this.props.jobMonthCategory;switch(e){case null:return u.a.createElement("div",null);default:var t=Object.keys(e).map(function(t,l){for(var a=e[t],n=0,r=0,o=0,s=0,c=[],h=[],i=[],m=0;m<a.length;m++){var d=a[m];if("Confirmed"===d.isCancelled)c.push(d);else{6===d.jobTrackers.length?i.push(d):h.push(d);var b=d.jobItems,g=d.jobOfflandItems;if(b&&b.length>0){o++;for(var E=0;E<b.length;E++){n+=b[E].quantity}}if(g&&g.length>0){s++;for(var p=0;p<g.length;p++){r+=g[p].quantity}}}}return u.a.createElement("tr",{key:l},u.a.createElement("td",null,t),u.a.createElement("td",null,a.length),u.a.createElement("td",{style:{color:"red"}},c.length),u.a.createElement("td",null,h.length),u.a.createElement("td",null,i.length),u.a.createElement("td",null,n),u.a.createElement("td",null,0===n?"0":(n/o).toFixed(2)),u.a.createElement("td",null,r),u.a.createElement("td",null,0===r?"0":(r/s).toFixed(2)))});return u.a.createElement(h.v,null,u.a.createElement(h.f,{cs:"12",md:{size:12,offset:0},className:"text-center"},u.a.createElement("h1",null,"Job breakdown by month")),u.a.createElement(h.f,{cs:"12",md:{size:12,offset:0}},u.a.createElement(h.w,{striped:!0,hover:!0,bordered:!0,responsive:!0},u.a.createElement("thead",null,u.a.createElement("tr",{style:{backgroundColor:"#49AE4B",color:"white"}},u.a.createElement("th",null,"Month"),u.a.createElement("th",null,"Total jobs"),u.a.createElement("th",{style:{color:"red"}},"Cancelled jobs"),u.a.createElement("th",null,"Ongoing jobs"),u.a.createElement("th",null,"Completed jobs"),u.a.createElement("th",null,"No. of Pallets (Delivery)"),u.a.createElement("th",null,"Avg No. of Pallets per Delivery"),u.a.createElement("th",null,"No. of Pallets (Offland)"),u.a.createElement("th",null,"Avg No. of Pallets per Offland"))),u.a.createElement("tbody",null,t))))}}}]),t}(c.Component)),b=function(e){function t(){return Object(a.a)(this,t),Object(r.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(n.a)(t,[{key:"render",value:function(){var e=this.props.jobDeliveryCategory;switch(e){case null:return u.a.createElement("div",null);default:var t=0,l=0,a=0,n=0,r=[],o=[],s=[],c=[],i=[],m=[],d=Object.keys(e).map(function(h,d){var b=e[h],g=0,E=0,p=[],f=[],v=[];if("PSA"===h||"Jurong Port"===h){for(var y=0;y<b.length;y++){var j=b[y];if("Confirmed"===j.isCancelled)p.push(j),r.push(j);else{6===j.jobTrackers.length?(v.push(j),s.push(j)):(f.push(j),o.push(j));var C=j.jobItems,k=j.jobOfflandItems;if(C&&C.length>0)for(var O=0;O<C.length;O++){var J=C[O];g+=J.quantity,a+=J.quantity}if(k&&k.length>0)for(var D=0;D<k.length;D++){var w=k[D];E+=w.quantity,n+=w.quantity}}}return u.a.createElement("tr",{key:d},u.a.createElement("td",null,h),u.a.createElement("td",null,g),u.a.createElement("td",null,E),u.a.createElement("td",null,f.length),u.a.createElement("td",null,v.length),u.a.createElement("td",{style:{color:"red"}},p.length),u.a.createElement("td",null,b.length))}if("PSA"!==h||"Jurong Port"!==h)for(var I=0;I<b.length;I++){var A=b[I];if("Confirmed"===A.isCancelled)c.push(A);else{6===A.jobTrackers.length?m.push(A):i.push(A);var M=A.jobItems,T=A.jobOfflandItems;if(M&&M.length>0)for(var P=0;P<M.length;P++){var S=M[P];t+=S.quantity}if(T&&T.length>0)for(var N=0;N<T.length;N++){var q=T[N];l+=q.quantity}}}});return u.a.createElement(h.v,null,u.a.createElement(h.f,{cs:"12",md:{size:12,offset:0},className:"text-center"},u.a.createElement("h1",null,"Job breakdown by Delivery Locations")),u.a.createElement(h.f,{cs:"12",md:{size:12,offset:0}},u.a.createElement(h.w,{striped:!0,hover:!0,bordered:!0,responsive:!0},u.a.createElement("thead",null,u.a.createElement("tr",{style:{backgroundColor:"#49AE4B",color:"white"}},u.a.createElement("th",null,"Delivery Location"),u.a.createElement("th",null,"No. of Pallets (Delivery)"),u.a.createElement("th",null,"No. of Pallets (Offland)"),u.a.createElement("th",null,"Ongoing Jobs"),u.a.createElement("th",null,"Completed Jobs"),u.a.createElement("th",{style:{color:"red"}},"Cancelled Jobs"),u.a.createElement("th",null,"Total Jobs"))),u.a.createElement("tbody",null,d,u.a.createElement("tr",null,u.a.createElement("td",null,"Others"),u.a.createElement("td",null,t),u.a.createElement("td",null,l),u.a.createElement("td",null,i.length),u.a.createElement("td",null,m.length),u.a.createElement("td",{style:{color:"red"}},c.length),u.a.createElement("td",null,i.length+m.length+c.length))),u.a.createElement("br",null),u.a.createElement("tfoot",null,u.a.createElement("tr",null,u.a.createElement("th",null,"Total"),u.a.createElement("th",null,t+a," Pallets"),u.a.createElement("th",null,l+n," Pallets"),u.a.createElement("th",null,i.length+o.length," Jobs"),u.a.createElement("th",null,m.length+s.length," ","Jobs"),u.a.createElement("th",{style:{color:"red"}},c.length+r.length," ","jobs"),u.a.createElement("th",null,i.length+m.length+c.length+(o.length+s.length+r.length)," ","Jobs"))))))}}}]),t}(c.Component),g=function(e){function t(){return Object(a.a)(this,t),Object(r.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(n.a)(t,[{key:"render",value:function(){var e=this.props,t=e.jobVesselsCategory,l=e.Vessel;switch(t&&l){case null:return u.a.createElement("div",null);default:var a=[],n=0,r=[],o=[],s=[],c=0,i=0,m=0;l.map(function(e){Object.keys(t).map(function(l,c){var u=t[l],h=[],i=[],m=[];if(l===e._id){for(var d=0;d<u.length;d++){var b=u[d];"confirmed"===b.isCancelled?(h.push(b),r.push(b)):6===b.jobTrackers.length?(m.push(b),s.push(b)):(i.push(b),o.push(b))}var g={id:"".concat(n++),vessel:"".concat(e.vesselName),vesselIMO:"".concat(e.vesselIMOID),vesselCallsign:"".concat(e.vesselCallsign),ongoing:"".concat(i.length),completed:"".concat(m.length),cancelled:"".concat(h.length),total:"".concat(i.length+m.length+h.length)};a.push(g)}})});a.sort(function(e,t){return t.total-e.total});var d=a.map(function(e,t){if(t<50)return u.a.createElement("tr",{key:e.id},u.a.createElement("td",null,e.vessel?e.vessel:"-"),u.a.createElement("td",null,e.vesselIMO),u.a.createElement("td",null,e.vesselCallsign?e.vesselCallsign:"-"),u.a.createElement("td",null,e.ongoing),u.a.createElement("td",null,e.completed),u.a.createElement("td",{style:{color:"red"}},e.cancelled),u.a.createElement("td",null,e.total));i+=parseInt(e.ongoing),m+=parseInt(e.completed),c+=parseInt(e.cancelled)});return u.a.createElement(h.v,null,u.a.createElement(h.f,{cs:"12",md:{size:12,offset:0},className:"text-center"},u.a.createElement("h1",null,"Job breakdown by Vessels")),u.a.createElement(h.f,{cs:"12",md:{size:12,offset:0}},u.a.createElement(h.w,{striped:!0,hover:!0,bordered:!0,responsive:!0},u.a.createElement("thead",null,u.a.createElement("tr",{style:{backgroundColor:"#49AE4B",color:"white"}},u.a.createElement("th",null,"Vessels Name"),u.a.createElement("th",null,"Vessels IMO"),u.a.createElement("th",null,"Vessels Callsign"),u.a.createElement("th",null,"Ongoing Jobs"),u.a.createElement("th",null,"Completed Jobs"),u.a.createElement("th",null,"Cancelled Jobs"),u.a.createElement("th",null,"Total Jobs"))),u.a.createElement("tbody",null,d,u.a.createElement("tr",null,u.a.createElement("td",null,"Others"),u.a.createElement("td",null),u.a.createElement("td",null),u.a.createElement("td",null,i),u.a.createElement("td",null,m),u.a.createElement("td",{style:{color:"red"}},c),u.a.createElement("td",null,i+m+c))),u.a.createElement("br",null),u.a.createElement("tfoot",null,u.a.createElement("tr",null,u.a.createElement("th",null,"Total"),u.a.createElement("th",null),u.a.createElement("th",null),u.a.createElement("th",null,o.length," Jobs"),u.a.createElement("th",null,s.length," Jobs"),u.a.createElement("th",{style:{color:"red"}},r.length," jobs"),u.a.createElement("th",null,o.length+s.length+r.length," ","Jobs"))))))}}}]),t}(c.Component),E=function(e){function t(){return Object(a.a)(this,t),Object(r.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(n.a)(t,[{key:"render",value:function(){var e=this.props,t=e.jobCompaniesCategory,l=e.Company;switch(t&&l){case null:return u.a.createElement("div",null);default:var a=[],n=0,r=[],o=[],s=[];Object.keys(l).map(function(e,l){var c=[],u=[],h=[],i=(Object.keys(t).map(function(l,a){var n=t[l];if(e===l)for(var i=0;i<n.length;i++){var m=n[i];"Confirmed"===m.isCancelled?(c.push(m),r.push(m)):6===m.jobTrackers.length?(h.push(m),s.push(m)):(u.push(m),o.push(m))}}),{id:"".concat(n++),company:"".concat(e),ongoing:"".concat(u.length),completed:"".concat(h.length),cancelled:"".concat(c.length),total:"".concat(u.length+h.length+c.length)});a.push(i)});a.sort(function(e,t){return t.total-e.total});var c=a.map(function(e){return u.a.createElement("tr",{key:e.id},u.a.createElement("td",null,e.company),u.a.createElement("td",null,e.ongoing),u.a.createElement("td",null,e.completed),u.a.createElement("td",{style:{color:"red"}},e.cancelled),u.a.createElement("td",null,e.total))});return u.a.createElement(h.v,null,u.a.createElement(h.f,{cs:"12",md:{size:12,offset:0},className:"text-center"},u.a.createElement("h1",null,"Job breakdown by Companies")),u.a.createElement(h.f,{cs:"12",md:{size:12,offset:0}},u.a.createElement(h.w,{striped:!0,hover:!0,bordered:!0,responsive:!0},u.a.createElement("thead",null,u.a.createElement("tr",{style:{backgroundColor:"#49AE4B",color:"white"}},u.a.createElement("th",null,"Companies"),u.a.createElement("th",null,"Ongoing Jobs"),u.a.createElement("th",null,"Completed Jobs"),u.a.createElement("th",{style:{color:"red"}},"Cancelled Jobs"),u.a.createElement("th",null,"Total Jobs"))),u.a.createElement("tbody",null,c),u.a.createElement("br",null),u.a.createElement("tfoot",null,u.a.createElement("tr",null,u.a.createElement("th",null,"Total"),u.a.createElement("th",null,o.length," Jobs"),u.a.createElement("th",null,s.length," Jobs"),u.a.createElement("th",{style:{color:"red"}},r.length," Jobs"),u.a.createElement("th",null,o.length+s.length+r.length," ","Jobs"))))))}}}]),t}(c.Component),p=l(1306),f=(l(1405),function(e){function t(){return Object(a.a)(this,t),Object(r.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(n.a)(t,[{key:"render",value:function(){var e=this.props,t=e.jobMonthAnalityc,l=e.jobDeliveryCategory;switch(t&&l){case null:return u.a.createElement("div",null);default:var a=[],n=[],r=[],o=[],s=[],c=[],i=[],m=[],d=[],b=(Object.keys(t).map(function(e,t){var u=0,h=0,b=0,g=0,E=[],p=[],f=[],v=[];Object.keys(l).map(function(t){var a=l[t];if("PSA"===t)for(var n=0;n<a.length;n++){var r=a[n];if(e==="".concat(new Date(r.jobBookingDateTime).getMonth()+1)&&0!==r.jobItems.length){for(var o=0;o<r.jobItems.length;o++)u+=r.jobItems[o].quantity;E.push(r)}}else if("Jurong Port"===t)for(var s=0;s<a.length;s++){var c=a[s];if(e==="".concat(new Date(c.jobBookingDateTime).getMonth()+1)&&0!==c.jobItems.length){for(var i=0;i<c.jobItems.length;i++)h+=c.jobItems[i].quantity;p.push(c)}}else if("Shipyard"===t)for(var m=0;m<a.length;m++){var d=a[m];if(e==="".concat(new Date(d.jobBookingDateTime).getMonth()+1)&&0!==d.jobItems.length){for(var y=0;y<d.jobItems.length;y++)b+=d.jobItems[y].quantity;f.push(d)}}else for(var j=0;j<a.length;j++){var C=a[j];if(e==="".concat(new Date(C.jobBookingDateTime).getMonth()+1)&&0!==C.jobItems.length){for(var k=0;k<C.jobItems.length;k++)g+=C.jobItems[k].quantity;v.push(C)}}});"1"===e?a.push("Jan"):"2"===e?a.push("Feb"):"3"===e?a.push("Mar"):"4"===e?a.push("Apr"):"5"===e?a.push("May"):"6"===e?a.push("Jun"):"7"===e?a.push("Jul"):"8"===e?a.push("Aug"):"9"===e?a.push("Sep"):"10"===e?a.push("Oct"):"11"===e?a.push("Nov"):"12"===e&&a.push("Dec"),c.push(u),i.push(h),m.push(b),d.push(g),n.push(E.length),r.push(p.length),o.push(f.length),s.push(v.length)}),{labels:a,datasets:[{label:"PSA Port",stack:"Stack 0",data:n,backgroundColor:"rgb(161, 217, 180)"},{label:"JP-LT",stack:"Stack 0",data:r,backgroundColor:"rgb(28, 201, 86)"},{label:"Shipyard",stack:"Stack 0",data:o,backgroundColor:"rgb(13, 140, 55)"},{label:"Others",stack:"Stack 0",data:s,backgroundColor:"rgb(10, 92, 37)"}]}),g={labels:a,datasets:[{label:"PSA Port",stack:"Stack 0",data:c,backgroundColor:"rgb(161, 217, 180)"},{label:"JP-LT",stack:"Stack 0",data:i,backgroundColor:"rgb(28, 201, 86)"},{label:"Shipyard",stack:"Stack 0",data:m,backgroundColor:"rgb(13, 140, 55)"},{label:"Others",stack:"Stack 0",data:d,backgroundColor:"rgb(10, 92, 37)"}]};return u.a.createElement(h.v,{style:{marginBottom:"15px"}},u.a.createElement(h.f,{cs:"6",md:{size:6,offset:0}},u.a.createElement(h.b,null,u.a.createElement(h.c,null,u.a.createElement(h.e,{style:{textDecoration:"bold"}},"No Of Deliveries"),u.a.createElement(h.d,null,u.a.createElement(p.a,{data:b,options:{legend:{display:!0,position:"bottom"},scales:{yAxes:[{ticks:{callback:function(e,t,l){return e+" Deliveries"},beginAtZero:!0}}]}}}))))),u.a.createElement(h.f,{cs:"6",md:{size:6,offset:0}},u.a.createElement(h.b,null,u.a.createElement(h.c,null,u.a.createElement(h.e,null,"No Of Items"),u.a.createElement(h.d,null,u.a.createElement(p.a,{data:g,options:{legend:{display:!0,position:"bottom"},scales:{yAxes:[{ticks:{callback:function(e,t,l){return e+" Items"},beginAtZero:!0}}]}}}))))))}}}]),t}(c.Component)),v=function(e){function t(){var e,l;Object(a.a)(this,t);for(var n=arguments.length,s=new Array(n),c=0;c<n;c++)s[c]=arguments[c];return(l=Object(r.a)(this,(e=Object(o.a)(t)).call.apply(e,[this].concat(s)))).state={userCompany:null,vessel:null,jobMonthCategories:null,jobDeliveryCategories:null,jobCompaniesCategories:null,monthOfAnalityc:null,jobVesselsCategories:null},l}return Object(s.a)(t,e),Object(n.a)(t,[{key:"componentDidMount",value:function(){var e=this;m.a.get("/api/company/usercompany").then(function(t){for(var l=t.data,a={},n=0;n<l.length;n++){var r=l[n].name,o=a[r];o||(o=[],a[r]=o)}e.setState({userCompany:a})}),m.a.get("/api/vessels").then(function(t){e.setState({vessel:t.data})}),m.a.get("/api/jobs?user_only=false&numLimit=false&archive_only=false&non_archive_only=false&page=false&limit=false").then(function(t){for(var l=t.data,a={},n={},r={},o={},s={},c=0;c<l.length;c++){var u=l[c],h="".concat(new Date(u.jobBookingDateTime).getMonth()+1,"/").concat(new Date(u.jobBookingDateTime).getFullYear()),i="".concat(new Date(u.jobBookingDateTime).getMonth()+1),m=o[i];m||(m=[],o[i]=m);var d=a[h];d||(d=[],a[h]=d);var b=n[u.vesselLoadingLocation];if(b||(b=[],n[u.vesselLoadingLocation]=b),null!==u.user.userCompany&&null!==u.user.userCompany.name){var g=r[u.user.userCompany.name];g||(g=[],r[u.user.userCompany.name]=g),g.push(u)}if(m.push(u),null!==u.vessel&&null!==u.vessel.vesselName){var E=s[u.vessel._id];E||(E=[],s[u.vessel._id]=E),E.push(u)}d.push(u),b.push(u)}e.setState({jobMonthCategories:a,jobDeliveryCategories:n,jobCompaniesCategories:r,monthOfAnalityc:o,jobVesselsCategories:s})}).catch(function(e){console.log(e)})}},{key:"componentDidUpdate",value:function(e,t,l){console.log(this.state)}},{key:"render",value:function(){return u.a.createElement("div",null,u.a.createElement(f,{jobMonthAnalityc:this.state.monthOfAnalityc,jobDeliveryCategory:this.state.jobDeliveryCategories}),u.a.createElement(d,{jobMonthCategory:this.state.jobMonthCategories}),u.a.createElement(b,{jobDeliveryCategory:this.state.jobDeliveryCategories}),u.a.createElement(g,{jobVesselsCategory:this.state.jobVesselsCategories,Vessel:this.state.vessel}),u.a.createElement(E,{jobCompaniesCategory:this.state.jobCompaniesCategories,Company:this.state.userCompany}))}}]),t}(c.Component),y=function(e){function t(){return Object(a.a)(this,t),Object(r.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(n.a)(t,[{key:"render",value:function(){return u.a.createElement(h.h,{fluid:!0},u.a.createElement("br",null),u.a.createElement(v,null))}}]),t}(c.Component);t.default=y}}]);
//# sourceMappingURL=8.2c67b188.chunk.js.map